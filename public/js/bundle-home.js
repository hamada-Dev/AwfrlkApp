"use strict";angular.module("websiteApp",["ngCookies","ngResource","ngSanitize","ui.router","ui.bootstrap","vAccordion","mailchimp","bootstrapLightbox","rzModule","LocalStorageModule","angularLazyImg","nsPopover"]).config(function($stateProvider,$urlRouterProvider,$locationProvider,$httpProvider,LightboxProvider,localStorageServiceProvider){$urlRouterProvider.otherwise("/"),$locationProvider.html5Mode(!0),$locationProvider.hashPrefix("!"),LightboxProvider.fullScreenMode=!0,localStorageServiceProvider.setPrefix("ls"),$httpProvider.interceptors.push("authInterceptor")}).factory("authInterceptor",function($rootScope,$q,$cookieStore,$location){return{request:function(config){return config.headers=config.headers||{},$cookieStore.get("token")&&(config.headers.Authorization="Bearer "+$cookieStore.get("token")),config},responseError:function(response){return 401===response.status?($location.path("/login"),$cookieStore.remove("token"),$q.reject(response)):$q.reject(response)}}}).run(function($rootScope,$window,$sce,$document,$location,Auth,$stateParams,$anchorScroll,$state){$rootScope.$stateParams=$stateParams,$anchorScroll.yOffset=50,$rootScope.$on("$stateChangeStart",function(event,next){Auth.isLoggedInAsync(function(loggedIn){next.authenticate&&!loggedIn&&(event.preventDefault(),$location.path("/login"),$state.go("login"))})})}),angular.module("websiteApp").controller("aboutUsCtrl",function($scope,$location,$state,$http,$stateParams,smoothScroll,$sce,DataService,$modal,Lightbox,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0),$scope.tab={internationalTour:!0,company:!1,award:!1,kesari:!1,guest:!1},"Company-Profile"==$stateParams.location&&($scope.tab.guest=!1,$scope.tab.company=!0,$scope.tab.family=!1,$scope.tab.kesari=!1,$scope.award=!1),"Why-Kesari"==$stateParams.location&&($scope.tab.kesari=!0,$scope.tab.guest=!1,$scope.tab.family=!1,$scope.award=!1,$scope.company=!1),"Awards&Accolades"==$stateParams.location&&($scope.tab.award=!0,$scope.tab.guest=!1,$scope.tab.family=!1,$scope.tab.kesari=!1,$scope.company=!1),"Guest-Corner"==$stateParams.location&&($scope.tab.guest=!0,$scope.tab.family=!1,$scope.tab.kesari=!1,$scope.award=!1,$scope.company=!1),"trans_id5"===$location.$$hash&&($scope.tab.guest=!0,$scope.tab.family=!1,$scope.tab.kesari=!1,$scope.award=!1,$scope.company=!1),DataService.getData("testimonial/").then(function(testimonialData){$scope.testimonial=testimonialData}),$scope.trustSrc=function(src){return $sce.trustAsResourceUrl(src)},$scope.changePath=function(loc){$state.go("aboutUs",{location:loc})}}).controller("DitCtrl",function(smoothScroll){smoothScroll.scrollTo("start")}).controller("faqCtrl",function(smoothScroll,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0)}).controller("guesthelplineCtrl",function(smoothScroll){smoothScroll.scrollTo("start")}).controller("pressCtrl",function(smoothScroll){smoothScroll.scrollTo("start")}).controller("404ErrorCtrl",function(smoothScroll){smoothScroll.scrollTo("start")}).controller("pptLossCtrl",function($scope,$http,smoothScroll){smoothScroll.scrollTo("start"),$http.get("https://api.kesari.in/route/staticPage/showDataBySlug/lost-passport-2").success(function(data1){$scope.pptloss=data1,$scope.pptContent=$scope.pptloss.description}),$http.get("https://api.kesari.in/route/staticPage/showDataBySlug/lost-passport-marathi-2").success(function(data1M){$scope.pptlossM=data1M,$scope.pptContentM=$scope.pptlossM.description})}).controller("accidentHospCtrl",function($scope,$http,smoothScroll){smoothScroll.scrollTo("start"),$http.get("https://api.kesari.in/route/staticPage/showDataBySlug/medical-emergancy-2").success(function(data2){$scope.accidentHosp=data2,$scope.accidentHospContent=$scope.accidentHosp.description}),$http.get("https://api.kesari.in/route/staticPage/showDataBySlug/medical-emergancy-marathi").success(function(data2M){$scope.accidentHospM=data2M,$scope.accidentHospContentM=$scope.accidentHospM.description})}).controller("deathTourCtrl",function($scope,$http,smoothScroll){smoothScroll.scrollTo("start"),$http.get("https://api.kesari.in/route/staticPage/showDataBySlug/on-tour-death").success(function(data3){$scope.deathTour=data3,$scope.deathTourContent=$scope.deathTour.description}),$http.get("https://api.kesari.in/route/staticPage/showDataBySlug/on-tour-death-marathi").success(function(data3M){$scope.deathTourM=data3M,$scope.deathTourContentM=$scope.deathTourM.description})}).controller("naturalCalamityCtrl",function($scope,$http,smoothScroll){smoothScroll.scrollTo("start"),$http.get("//login.kesari.in/route/staticPage/showDataBySlug/force-majeure-conditions-natural-calamities").success(function(data4){$scope.naturalCalamity=data4,$scope.naturalCalamityContent=$scope.naturalCalamity.description}),$http.get("//login.kesari.in/route/staticPage/showDataBySlug/natural-calamities-marathi").success(function(data4M){$scope.naturalCalamityM=data4M,$scope.naturalCalamityContentM=$scope.naturalCalamityM.description})}).controller("giftVoucherCtrl",function($scope,$http,smoothScroll){smoothScroll.scrollTo("start"),$scope.show=!1,$scope.disableButton=!1,$scope.save=function(form){if(form.$valid){var voucherData={Guest:$scope.Guest,To:$scope.To,message:$scope.message};$scope.disableButton=!0,$http.post("https://login.kesari.in/route/giftvoucher/",voucherData).success(function(data,status){data&&(smoothScroll.scrollTo("start"),$scope.show=!0,$scope.disableButton=!1,voucherData={},$scope.Guest={},$scope.To={},$scope.message="",form.$setPristine(!0),form.$setUntouched(!0))})}}}).controller("BestDealCtrl",function($scope,DataService,$modal,smoothScroll){smoothScroll.scrollTo("start"),$scope.awesomeThings=[],$scope.dealLoading=!0,DataService.getData("webHeaderMenu/getWebPackages/").then(function(awesomeThings){$scope.dealloading=!1,$scope.BestDeal=awesomeThings.BESTDEAL_PACKAGE,$scope.BestDeal.forEach(function(deal){deal.TOUR_NIGHTS=deal.TM_DAYS-1,deal.TOUR_DAYS=deal.TOUR_NIGHTS+1})}),$scope.open2=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/touritinerary/ad-landing.html",controller:"gitInquiryCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start"),$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.open5=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/Best-Deal/dealsDep.html",controller:"dealsDepCtrl",size:"md",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})}}).controller("historyCtrl",function($scope,DataService,$modal){$scope.historyData=[],$scope.dealLoading=!0,DataService.getData("webHeaderMenu/getWebPackages/").then(function(historyData){$scope.dealloading=!1,$scope.BestDeal=historyData.BESTDEAL_PACKAGE,$scope.BestDeal.forEach(function(deal){deal.TOUR_NIGHTS=deal.TM_DAYS-1,deal.TOUR_DAYS=deal.TOUR_NIGHTS+1})}),$scope.open2=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/touritinerary/ad-landing.html",controller:"gitInquiryCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start"),$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.open5=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/Best-Deal/dealsDep.html",controller:"dealsDepCtrl",size:"md",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})}}).controller("preferSalesAgentCtrl",function($scope,smoothScroll,$http,$location,$state){smoothScroll.scrollTo("start"),$scope.tab={psa:!1,advantage:!1,ourpsa:!1,registration:!0,faq:!1,guide:!1},$scope.disableButton=!1,$scope.JobInquiry={},$scope.save=function(form){form.$valid&&0==$scope.disableButton&&($scope.disableButton=!0,$http.post("//login.kesari.in/route/psa_registration",$scope.JobInquiry).success(function(data,status){data&&(0==data.success?(alert(data.message),$scope.JobInquiry={},$scope.disableButton=!1):($state.go("thankyouPSA"),$scope.JobInquiry={}))}))}}).controller("preferSalesAgentRegCtrl",function($scope,smoothScroll,$http,$location,$state,$stateParams){smoothScroll.scrollTo("start"),$scope.disableButton=!1,$scope.Inquiry={};var urlID=$location.path(),pathArray=urlID.split("/PSA-Registration/"),IdArray=pathArray[1],uploadFileArray=[],fileData=null,photoData=null,uploadIntaxImage=null,shopImageData=null;$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.minDate=new Date,$scope.maxDate=new Date(2020,5,22),$scope.formats=["dd MMMM yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0],$scope.example={value:new Date,anniversary:new Date},$scope.open=function(){$scope.opened=!0},$scope.open1=function(){$scope.opened1=!0},$scope.uploadImage=function(file){var fd=new FormData;fd.file=file,fd.append("path","PSA"),fd.append("file",file),fd.path="PSA",$http.post("//login.kesari.in/route/upload/upload",fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(d){fileData=d.url}).error(function(){console.log("error")})},$scope.uploadIntaxImage=function(file){var fd=new FormData;fd.file=file,fd.append("path","PSA"),fd.append("file",file),fd.path="PSA",$http.post("//login.kesari.in/route/upload/upload",fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(d){uploadIntaxImage=d.url}).error(function(){console.log("error")})},$scope.uploadPhoto=function(file){var fd=new FormData;fd.file=file,fd.append("path","PSA"),fd.append("file",file),fd.path="PSA",$http.post("//login.kesari.in/route/upload/upload",fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(d){photoData=d.url}).error(function(){console.log("error")})},$scope.uploadShopImage=function($files){angular.forEach($files,function(value,key){var fd=new FormData;fd.file=value,fd.append("path","PSA"),fd.append("file",value),fd.path="PSA",$http.post("//login.kesari.in/route/upload/upload",fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(d){shopImageData=d.url,uploadFileArray.push(shopImageData)}).error(function(){})})},$scope.save=function(form){$scope.PSARegistration={personalInformation:{FName:$scope.PSAReg.FName,LName:$scope.PSAReg.LName,alternateContactNumber:$scope.PSAReg.alternateContactNumber,gender:$scope.PSAReg.gender,residentialAddress:$scope.PSAReg.residentialAddress,dateOfBirth:$scope.PSAReg.dateOfBirth,educationalQualification:$scope.PSAReg.educationalQualification,knowAboutKesariPSA:$scope.PSAReg.knowAboutKesariPSA},detailsOfExistingBusiness:{nameOfCompany:$scope.PSAReg.nameOfCompany,ownership:$scope.PSAReg.ownership,officeAddress:$scope.PSAReg.officeAddress,noOfYearExistingBusiness:$scope.PSAReg.noOfYearExistingBusiness,noOfEmployees:$scope.PSAReg.noOfEmployees,annualTurnover:$scope.PSAReg.annualTurnover,panNumber:$scope.PSAReg.panNumber,aadharCardNumber:$scope.PSAReg.aadharCardNumber,GSTRegistrationNumber:$scope.PSAReg.GSTRegistrationNumber,telePhoneNo:$scope.PSAReg.telePhoneNo,faxNumber:$scope.PSAReg.faxNumber,businessEmail:$scope.PSAReg.businessEmail,website:$scope.PSAReg.website,facebookID:$scope.PSAReg.facebookID,KnowlOfDomesticInterHoli:$scope.PSAReg.KnowlOfDomesticInterHoli},moreDetailsOfExistingOrProposedOffice:{addessOfProposedOffice:$scope.PSAReg.addessOfProposedOffice,sizeOfOffice:$scope.PSAReg.sizeOfOffice,kindlySharePhotos:uploadFileArray,locatedOnwhichFloor:$scope.PSAReg.locatedOnwhichFloor,visibilityFromMainRoad:$scope.PSAReg.visibilityFromMainRoad,detailsOfTravelAgents:$scope.PSAReg.detailsOfTravelAgents,detailsOfNearbyResidence:$scope.PSAReg.detailsOfNearbyResidence,connectivityFromStation:$scope.PSAReg.connectivityFromStation,parkingAvailable:$scope.PSAReg.parkingAvailable,anyKtBrnhfranchiAddr:$scope.PSAReg.anyKtBrnhfranchiAddr,highIncome:$scope.PSAReg.highIncome,middleIncome:$scope.PSAReg.middleIncome,travelAgentsNearby:$scope.PSAReg.travelAgentsNearby,knownNewspapersRegion:$scope.PSAReg.knownNewspapersRegion},referencesTwoTravelIndustry:{name1:$scope.PSAReg.name1,contactNumber1:$scope.PSAReg.contactNumber1,emailID1:$scope.PSAReg.emailID1,name2:$scope.PSAReg.name2,contactNumber2:$scope.PSAReg.contactNumber2,emailID2:$scope.PSAReg.emailID2,name3:$scope.PSAReg.name3,contactNumber3:$scope.PSAReg.contactNumber3,emailID3:$scope.PSAReg.emailID3,name4:$scope.PSAReg.name4,contactNumber4:$scope.PSAReg.contactNumber4,emailID4:$scope.PSAReg.emailID4},nameAndSignature:{Name:$scope.PSAReg.Name,Date:$scope.PSAReg.Date,location:$scope.PSAReg.location}},$scope.newValidationEmail=function(){var allTextBoxes=[];$(".order").each(function(){allTextBoxes.push($(this).val())});for(var sorted_arr=allTextBoxes.sort(),i=0;i<allTextBoxes.length-1;i++)if(sorted_arr[i+1]==sorted_arr[i])return alert("Please enter different email in each TextBox."),!1},$scope.newValidationContact=function(){var allTextBoxes=[];$(".contact_order").each(function(){allTextBoxes.push($(this).val())});for(var sorted_arr=allTextBoxes.sort(),i=0;i<allTextBoxes.length-1;i++)if(sorted_arr[i+1]==sorted_arr[i])return alert("Please enter different contact in each TextBox."),!1},form.$valid&&($scope.newValidationEmail(),$scope.newValidationContact(),$scope.disableButton=!0,""!=uploadFileArray?uploadFileArray.length>=6?$http.put("https://login.kesari.in/route/psa_registration/"+IdArray,$scope.PSARegistration).success(function(data,status){data&&(0==data.success?(alert(data.message),$scope.disableButton=!1,$scope.PSARegistration={}):($scope.disableButton=!1,$state.go("thankYouForRegistration")))}).error(function(data,status){alert(data.message),$scope.disableButton=!1,$scope.PSARegistration={}}):alert("Please attached minimum 6 Shop photographs"):alert("Please fill in the valid details before clicking Submit."))}}).controller("preferSalesAgentApptCtrl",function($scope,smoothScroll,$http,$location,$state,$stateParams){smoothScroll.scrollTo("start"),$scope.disableButton=!1,$scope.Inquiry={};var urlID=$location.path(),pathArray=urlID.split("/PSA-Appointment/"),IdArray=pathArray[1];console.log("IdArray==",IdArray);var ITreturnsPhotograph=[],bankStmtPhotograph=[],bankReferLetterPhotograph=[],panCardPhotograph=[],GSTRegiPhotograph=[],ShopAgreePhotograph=[],ResiProofPhotograph=[],AadharCardPhotograph=[],ShopEstCerfPhotograph=[],ITReturnImageData=null,BankStmtImageData=null,BankReferImageData=null,PanCardImageData=null,GSTRegiImageData=null,ShopAgreeImageData=null,ResiProofImageData=null,AadharCardImageData=null,ShopEstCerfImageData=null;$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.minDate=new Date,$scope.maxDate=new Date(2020,5,22),$scope.formats=["dd MMMM yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0],$scope.example={value:new Date,anniversary:new Date},$scope.open=function(){$scope.opened=!0},$scope.open1=function(){$scope.opened1=!0},$scope.uploadITReturnImage=function($files){angular.forEach($files,function(value,key){var fd=new FormData;fd.file=value,fd.append("path","PSA"),fd.append("file",value),fd.path="PSA",$http.post("//login.kesari.in/route/upload/upload",fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(d){ITReturnImageData=d.url,ITreturnsPhotograph.push(ITReturnImageData)}).error(function(){})})},$scope.uploadBankStmtImage=function($files){angular.forEach($files,function(value,key){var fd=new FormData;fd.file=value,fd.append("path","PSA"),fd.append("file",value),fd.path="PSA",$http.post("//login.kesari.in/route/upload/upload",fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(d){BankStmtImageData=d.url,bankStmtPhotograph.push(BankStmtImageData)}).error(function(){})})},$scope.uploadBankReferImage=function($files){angular.forEach($files,function(value,key){var fd=new FormData;fd.file=value,fd.append("path","PSA"),fd.append("file",value),fd.path="PSA",$http.post("//login.kesari.in/route/upload/upload",fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(d){BankReferImageData=d.url,bankReferLetterPhotograph.push(BankReferImageData)}).error(function(){})})},$scope.uploadPanCardImage=function($files){angular.forEach($files,function(value,key){var fd=new FormData;fd.file=value,fd.append("path","PSA"),fd.append("file",value),fd.path="PSA",$http.post("//login.kesari.in/route/upload/upload",fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(d){PanCardImageData=d.url,panCardPhotograph.push(PanCardImageData)}).error(function(){})})},$scope.uploadGSTRegiImage=function($files){angular.forEach($files,function(value,key){var fd=new FormData;fd.file=value,fd.append("path","PSA"),fd.append("file",value),fd.path="PSA",$http.post("//login.kesari.in/route/upload/upload",fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(d){GSTRegiImageData=d.url,GSTRegiPhotograph.push(GSTRegiImageData)}).error(function(){})})},$scope.uploadShopAgreeImage=function($files){angular.forEach($files,function(value,key){var fd=new FormData;fd.file=value,fd.append("path","PSA"),fd.append("file",value),fd.path="PSA",$http.post("//login.kesari.in/route/upload/upload",fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(d){ShopAgreeImageData=d.url,ShopAgreePhotograph.push(ShopAgreeImageData)}).error(function(){})})},$scope.uploadResiProofImage=function($files){angular.forEach($files,function(value,key){var fd=new FormData;fd.file=value,fd.append("path","PSA"),fd.append("file",value),fd.path="PSA",$http.post("//login.kesari.in/route/upload/upload",fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(d){ResiProofImageData=d.url,ResiProofPhotograph.push(ResiProofImageData)}).error(function(){})})},$scope.uploadAadharCardImage=function($files){angular.forEach($files,function(value,key){var fd=new FormData;fd.file=value,fd.append("path","PSA"),fd.append("file",value),fd.path="PSA",$http.post("//login.kesari.in/route/upload/upload",fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(d){AadharCardImageData=d.url,AadharCardPhotograph.push(AadharCardImageData)}).error(function(){})})},$scope.uploadShopEstCerfImage=function($files){angular.forEach($files,function(value,key){var fd=new FormData;fd.file=value,fd.append("path","PSA"),fd.append("file",value),fd.path="PSA",$http.post("//login.kesari.in/route/upload/upload",fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(d){ShopEstCerfImageData=d.url,ShopEstCerfPhotograph.push(ShopEstCerfImageData)}).error(function(){})})},$scope.save=function(form){$scope.PSAAppintment={appointment:{ITreturnsPhotograph:ITreturnsPhotograph,bankStmtPhotograph:bankStmtPhotograph,bankReferLetterPhotograph:bankReferLetterPhotograph,panCardPhotograph:panCardPhotograph,GSTRegiPhotograph:GSTRegiPhotograph,ShopAgreePhotograph:ShopAgreePhotograph,ResiProofPhotograph:ResiProofPhotograph,AadharCardPhotograph:AadharCardPhotograph,ShopEstCerfPhotograph:ShopEstCerfPhotograph,nameOfBankDtl:$scope.PSAappt.nameOfBankDtl,BankAccount:$scope.PSAappt.BankAccount,BankName:$scope.PSAappt.BankName,BankIFSC:$scope.PSAappt.BankIFSC}},form.$valid&&($scope.disableButton=!0,""!=ITreturnsPhotograph?$http.put("//login.kesari.in/route/psa_registration/appointment/"+IdArray,$scope.PSAAppintment).success(function(data,status){data&&(0==data.success?(alert(data.message),$scope.disableButton=!1,$scope.PSAAppintment={}):($scope.disableButton=!1,$state.go("thankYouForRegistration")))}).error(function(data,status){alert(data.message),$scope.disableButton=!1,$scope.PSAAppintment={}}):alert("Please fill in the valid details before clicking Submit."))}}).controller("PSAThankyouCtrl",function(smoothScroll,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0)}).controller("PSAThankyouRegistrationCtrl",function(smoothScroll,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0)}).controller("thankyouCareerCtrl",function(smoothScroll,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0)}).controller("thankyouTourleaderCtrl",function(smoothScroll,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0)}).controller("thankyouFeedbackCtrl",function(smoothScroll,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0)}).controller("HtBookCtrl",function(smoothScroll,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0)}).controller("contactCtrl",function($scope,DataService,$modal,smoothScroll,$http,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0),$scope.awesomeThings=[],$scope.branchLoading=!0,$scope.psaLoading=!0,$scope.frnLoading=!0,$scope.regionLoading=!0,DataService.getData("rsData/getAgentBranch/").then(function(getAgentData){$scope.zBrn=getAgentData,$scope.branchLoading=!1}),DataService.getData("rsData/getFrnDetail/").then(function(getFranchiseeData){$scope.zFrn=getFranchiseeData,console.log(getFranchiseeData),$scope.frnLoading=!1}),DataService.getData("rsData/getPsaDetail/").then(function(getPsaData){$scope.zPSA=getPsaData.india,$scope.iPSA=getPsaData.world,$scope.psaLoading=!1,$scope.max=5,$scope.isReadonly=!1,$scope.hoveringOver=function(value){$scope.overStar=value,$scope.percent=100*(value/$scope.max)}})}).controller("dealsDepCtrl",function($scope,$modal,items,$modalInstance){$scope.items=items.data,$scope.cancel=function(){$modalInstance.dismiss("cancel")}}).controller("careerCtrl",function($scope,$window,$http,DataService,$modal,$uibModal,Lightbox,$location,$stateParams,smoothScroll,$state,$log){$window.scrollTo(0,0),$scope.careerLoaded=!1,$scope.show=!1;var cData={department:"all"};$http.post("//login.kesari.in/route/rsData/Job_postings",cData).then(function(obj,status){$scope.job=obj.data,$scope.careerLoaded=!0}),$scope.onCategoryChange=function(items){$http.post("//login.kesari.in/route/rsData/Job_postings",$scope.items).success(function(data,status){$scope.career=data,$scope.careerLoaded=!1})},$scope.open5=function(data){$scope.show=!1;var modalInstance=$uibModal.open({animation:$scope.animationsEnabled,templateUrl:"app/career/applyjob.html",controller:"jobApplyCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance.result.then(function(items){$scope.show=items,smoothScroll.scrollTo("start"),$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})}}).controller("jobApplyCtrl",function($scope,$http,$location,$stateParams,$modal,$uibModal,items,$state,$modalInstance,$uibModalInstance,smoothScroll,DataService){smoothScroll.scrollTo("start"),$scope.errors={},$scope.items=items,$scope.disableButton=!1,$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.minDate=new Date,$scope.maxDate=new Date(2020,5,22),$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0],$scope.open=function(){$scope.opened=!0},$scope.cancel=function(){$uibModalInstance.dismiss("Close")};var fileData=null;$scope.uploadImage=function(file){var fd=new FormData;fd.file=file,fd.path="resume",fd.append("file",file),fd.append("path","resume"),$http.post("//login.kesari.in/route/upload/upload",fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(d){fileData=d.url})},$scope.save=function(form){$scope.items.flag=!0,form.$valid&&($scope.disableButton=!0,$scope.JobInquiry.applyFor=$scope.items.data,$scope.JobInquiry.resume=fileData,$http.post("https://login.kesari.in/route/careerApplicationLists/add",$scope.JobInquiry).success(function(data){data&&$modalInstance.close($scope.items.flag),$modalInstance.dismiss(),$state.go("thankyouCareer")}))}}).controller("joinusCtrl",function($scope,$window,$http,DataService,$modal,$uibModal,Lightbox,$location,$stateParams,smoothScroll,$state,$log){smoothScroll.scrollTo("start"),$window.scrollTo(0,0),$scope.open6=function(data){$scope.show=!1;var modalInstance=$uibModal.open({animation:$scope.animationsEnabled,templateUrl:"app/career/tourleaderapply.html",controller:"tourleaderApplyCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance.result.then(function(items){$scope.show=items,smoothScroll.scrollTo("start"),$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})}}).controller("tourleaderApplyCtrl",function($scope,$http,$location,$stateParams,$modal,$uibModal,items,$state,$modalInstance,$uibModalInstance,smoothScroll,DataService){smoothScroll.scrollTo("start"),$scope.errors={},$scope.items=items,$scope.disableButton=!1,$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.minDate=new Date,$scope.maxDate=new Date(2020,5,22),$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0],$scope.open=function(){$scope.opened=!0},$scope.cancel=function(){$uibModalInstance.dismiss("Close")};var fileData={};$scope.uploadImage=function(file,title){var fd=new FormData;fd.file=file,fd.path="resume",fd.append("file",file),fd.append("path","resume"),$http.post("//login.kesari.in/route/upload/upload",fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(d){fileData[title]=d.url})},$scope.save=function(form){$scope.items.flag=!0,form.$valid&&($scope.disableButton=!0,$scope.JobInquiry.applyFor="Tour Leader",$scope.JobInquiry.resume=fileData.resume,$scope.JobInquiry.closeUpImageUrl=fileData.close,$scope.JobInquiry.fullImageUrl=fileData.full,$http.post("https://login.kesari.in/route/careerApplicationLists/add",$scope.JobInquiry).success(function(data){data&&$modalInstance.close($scope.items.flag),$modalInstance.dismiss(),$state.go("thankyouCareer")}))}}).controller("franchiseeCtrl",function($scope,$location,$window,$http,$stateParams,smoothScroll){smoothScroll.scrollTo("start"),$scope.show=!1,$scope.Franchisee={},$scope.disableButton=!1,$scope.tab={franchisee:!0,invest:!1,require:!1,support:!1,application:!1},$scope.save=function(form){form.$valid&&0==$scope.disableButton&&($scope.disableButton=!0,$http.post("https://login.kesari.in/route/franchisee/",$scope.Franchisee).success(function(data,status){data&&($scope.show=!0,$scope.disableButton=!1,$scope.Franchisee={},form.$setPristine(!0),form.$setUntouched(!0))}))}}).controller("academyCtrl",function($scope,$modal,smoothScroll,$log,$http,DataService,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0),$scope.tab={coursetravel:!0,coursetour:!1,courseretail:!1},$scope.open=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/academy/register.html",controller:"academyRegisterCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start"),$window.scrollTo(0,0),$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},DataService.getData("rsData/view_schema_wrapper_collection_data/academyTestimonials").then(function(academyTestimonials){$scope.academyTesti=academyTestimonials})}).controller("academyRegisterCtrl",function($scope,smoothScroll,$modal,$http,$modalInstance,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0),$scope.status={opened:!1},$scope.dateOptions={formatYear:"yyyy",startingDay:1,minMode:"year"},$scope.open=function($event){$scope.status.opened=!0},$scope.close=function(){$modalInstance.close(!1)},$scope.minDate=new Date,$scope.maxDate=new Date(2020,5,22),$scope.formats=["yyyy"],$scope.format=$scope.formats[0],$scope.save=function(form){if(form.$valid){$scope.register.name=$scope.register.firstname+" "+$scope.register.lastname;var str=$scope.register.year_of_passing;$scope.register.year_of_passing=new Date(str).getFullYear(),$http.post("https://login.kesari.in/route/academyRegistration/",$scope.register).success(function(data,status){data&&$modalInstance.close(!0)})}}}).controller("infotechCtrl",function($scope,smoothScroll,$modal,$log,$http,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0)}).controller("logoCtrl",function($scope,smoothScroll,$http,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0)}).controller("unsubscribeCtrl",function($scope,smoothScroll,$http,$window,$location){smoothScroll.scrollTo("start"),$window.scrollTo(0,0);var data=$location.search();$http.get("https://login.kesari.in/route/emailer/unsubscribe/?userID="+data.userID+"&emailerId="+data.emailerId).success(function(data1){$scope.footerImages=data1})}).controller("generalSalesAgentCtrl",function($scope,smoothScroll,$http,$location,$state,$stateParams){smoothScroll.scrollTo("start"),$scope.tab={gsa:!1,advantage:!1,ourpsa:!1,registration:!0,faq:!1,guide:!1},$scope.disableButton=!1,$scope.gsaInquiry={},$scope.save=function(form){form.$valid&&0==$scope.disableButton&&($scope.disableButton=!0,$http.post("//login.kesari.in/route/GSA",$scope.gsaInquiry).success(function(data,status){data&&(0==data.success?(alert(data.message),$scope.gsaInquiry={},$scope.disableButton=!1):($state.go("thankyouGSA"),$scope.gsaInquiry={}))}))}}).controller("generalSalesAgentRegCtrl",function($scope,smoothScroll,$http,$location,$state,$stateParams){smoothScroll.scrollTo("start"),$scope.disableButton=!1,$scope.Inquiry={};var urlID=$location.path(),pathArray=urlID.split("/GSA-Registration/"),IdArray=pathArray[1],uploadFileArray=[],fileData=null,shopImageData=null;$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.minDate=new Date,$scope.maxDate=new Date(2020,5,22),$scope.formats=["dd MMMM yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0],$scope.example={value:new Date,anniversary:new Date},$scope.open=function(){$scope.opened=!0},$scope.open1=function(){$scope.opened1=!0},$scope.uploadImage=function(file){var fd=new FormData;fd.file=file,fd.append("path","GSA"),fd.append("file",file),fd.path="GSA",$http.post("//login.kesari.in/route/upload/upload",fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(d){fileData=d.url}).error(function(){console.log("error")})},$scope.uploadShopImage=function($files){angular.forEach($files,function(value,key){var fd=new FormData;fd.file=value,fd.append("path","GSA"),fd.append("file",value),fd.path="GSA",$http.post("//login.kesari.in/route/upload/upload",fd,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(d){shopImageData=d.url,uploadFileArray.push(shopImageData)}).error(function(){console.log("error")})})},$scope.save=function(form){$scope.GSARegistration={personalInformation:{FName:$scope.GSAReg.FName,LName:$scope.GSAReg.LName,alternateContactNumber:$scope.GSAReg.alternateContactNumber,gender:$scope.GSAReg.gender,residentialAddress:$scope.GSAReg.residentialAddress,dateOfBirth:$scope.GSAReg.dateOfBirth,educationalQualification:$scope.GSAReg.educationalQualification,knowAboutKesariGSA:$scope.GSAReg.knowAboutKesariGSA},detailsOfExistingBusiness:{nameOfCompany:$scope.GSAReg.nameOfCompany,ownership:$scope.GSAReg.ownership,officeAddress:$scope.GSAReg.officeAddress,noOfYearExistingBusiness:$scope.GSAReg.noOfYearExistingBusiness,noOfEmployees:$scope.GSAReg.noOfEmployees,annualTurnover:$scope.GSAReg.annualTurnover,panNumber:$scope.GSAReg.panNumber,
aadharCardNumber:$scope.GSAReg.aadharCardNumber,GSTRegistrationNumber:$scope.GSAReg.GSTRegistrationNumber,telePhoneNo:$scope.GSAReg.telePhoneNo,faxNumber:$scope.GSAReg.faxNumber,businessEmail:$scope.GSAReg.businessEmail,website:$scope.GSAReg.website,facebookID:$scope.GSAReg.facebookID,KnowlOfDomesticInterHoli:$scope.GSAReg.KnowlOfDomesticInterHoli},moreDetailsOfExistingOrProposedOffice:{addessOfProposedOffice:$scope.GSAReg.addessOfProposedOffice,sizeOfOffice:$scope.GSAReg.sizeOfOffice,kindlySharePhotos:uploadFileArray,locatedOnwhichFloor:$scope.GSAReg.locatedOnwhichFloor,visibilityFromMainRoad:$scope.GSAReg.visibilityFromMainRoad,detailsOfTravelAgents:$scope.GSAReg.detailsOfTravelAgents,detailsOfNearbyResidence:$scope.GSAReg.detailsOfNearbyResidence,connectivityFromStation:$scope.GSAReg.connectivityFromStation,parkingAvailable:$scope.GSAReg.parkingAvailable,anyKtBrnhfranchiAddr:$scope.GSAReg.anyKtBrnhfranchiAddr,highIncome:$scope.GSAReg.highIncome,middleIncome:$scope.GSAReg.middleIncome,travelAgentsNearby:$scope.GSAReg.travelAgentsNearby,knownNewspapersRegion:$scope.GSAReg.knownNewspapersRegion},nameAndSignature:{Name:$scope.GSAReg.Name,Date:$scope.GSAReg.Date,location:$scope.GSAReg.location}},form.$valid&&($scope.disableButton=!0,""!=uploadFileArray?uploadFileArray.length>=6?$http.put("https://login.kesari.in/route/GSA/"+IdArray,$scope.GSARegistration).success(function(data,status){data&&(0==data.success?(alert(data.message),$scope.disableButton=!1,$scope.GSARegistration={}):($scope.disableButton=!1,$state.go("thankYouForRegistration")))}).error(function(data,status){alert(data.message),$scope.disableButton=!1,$scope.GSARegistration={}}):alert("Please attached minimum 6 Shop photographs"):alert("Please fill in the valid details before clicking Submit."))}}).controller("GSAThankyouCtrl",function(smoothScroll,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0)}).controller("GSAThankyouRegistrationCtrl",function(smoothScroll,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0)}).controller("shotreadyCtrl",function(smoothScroll,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0)}).controller("blogCtrl",function(smoothScroll,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0)}).controller("europeSeminarCtrl",function($scope,smoothScroll,$http,$location){smoothScroll.scrollTo("start"),$scope.show=!0,$scope.showLoader=!1,$scope.done=!0,$scope.Seminar={},$scope.save=function(form){form.$valid&&($scope.show=!1,$http.post("https://login.kesari.in/route/seminar_registration/",$scope.Seminar).success(function(data,status){data&&(smoothScroll.scrollTo("start"),$scope.done=!1,$scope.msg="Thank You For Registeration of Seminar",$scope.show=!0,$scope.Seminar.name="",$scope.Seminar.mobile="",$scope.Seminar.seminar_title="",$scope.Seminar.branch_name="",$scope.Seminar.date="",$scope.Seminar.time="",$scope.Seminar.pax="",$scope.form.$setPristine(),$scope.form.$setValidity(),$scope.form.$setUntouched())}))},$scope.changedSeminar=function(){var America=["Ahmedabad"],Europe=["Ahmedabad"];"America"==$scope.Seminar.seminar_title&&($scope.items=America),"Europe"==$scope.Seminar.seminar_title&&($scope.items=Europe),$scope.seminarDates=""},$scope.changedValue=function(item){var arrayNo=0;"America"==$scope.Seminar.seminar_title&&"Ahmedabad"==$scope.Seminar.branch_name&&(arrayNo=8,$scope.seminarDates=["25 November 2018 (10 am - 1 pm)"]),"Europe"==$scope.Seminar.seminar_title&&"Ahmedabad"==$scope.Seminar.branch_name&&(arrayNo=8,$scope.seminarDates=["25 November 2018 (02 pm - 06 pm)"]),"America"==$scope.Seminar.seminar_title&&"Hyderabad"==$scope.Seminar.branch_name&&(arrayNo=1,$scope.seminarDates=["28 Jan 2018 (11am - 1pm)"]),"EuropeScan"==$scope.Seminar.seminar_title&&"Hyderabad"==$scope.Seminar.branch_name&&(arrayNo=3,$scope.seminarDates=["28 Jan 2018 (4 pm - 6 pm)"]),"SouthArica"==$scope.Seminar.seminar_title&&"Hyderabad"==$scope.Seminar.branch_name&&(arrayNo=4,$scope.seminarDates=["27 Jan 2018 (4 pm - 6 pm)"]),"India"==$scope.Seminar.seminar_title&&"Hyderabad"==$scope.Seminar.branch_name&&(arrayNo=8,$scope.seminarDates=["27 Jan 2018 (11 am - 1 pm)"])}}).controller("carnivalCtrl",function($scope,smoothScroll,$http,$location,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0),$scope.show=!0,$scope.showLoader=!1,$scope.done=!0,$scope.carnival={},$scope.save=function(form){form.$valid&&($scope.show=!1,$http.post("https://login.kesari.in/route/seminar_registration/",$scope.carnival).success(function(data,status){data&&(smoothScroll.scrollTo("start"),$scope.done=!1,$scope.msg="Thank You For Registeration of Carnival",$scope.show=!0,$scope.carnival.name="",$scope.carnival.mobile="",$scope.carnival.carnival_title="",$scope.carnival.branch_name="",$scope.carnival.date="",$scope.carnival.time="",$scope.carnival.pax="",$scope.form.$setPristine(),$scope.form.$setValidity(),$scope.form.$setUntouched())}))},$scope.changedcarnival=function(){var OffBeat=["Hyderabad - Kesari Tours Pvt. Ltd., 2nd Floor, Above Shankarlal & Sons Jewellers, Road No. 10, Banjara Hills, Hyderabad, 500034."],europe=["Hyderabad - Kesari Tours Pvt. Ltd., 2nd Floor, Above Shankarlal & Sons Jewellers, Road No. 10, Banjara Hills, Hyderabad, 500034.","Ahmedabad - Kesari Tours Pvt. Ltd., 414 Crystal Arcade, C.G. Road, Near Navrangpura Telephone Exchange, Ahmedabad, Gujarat 380009.","Indore - Kesari Tours Pvt. Ltd., 101, 1st Floor, The Magnate Tower, New Palasia, Curewell Hospital Road, Indore 452001."],europeOffBeat=["Ahmedabad - Kesari Tours Pvt. Ltd., 414 Crystal Arcade, C.G. Road, Near Navrangpura Telephone Exchange, Ahmedabad, Gujarat 380009.","Indore - Kesari Tours Pvt. Ltd., 101, 1st Floor, The Magnate Tower, New Palasia, Curewell Hospital Road, Indore 452001."],america=["Ahmedabad - Kesari Tours Pvt. Ltd., 414 Crystal Arcade, C.G. Road, Near Navrangpura Telephone Exchange, Ahmedabad, Gujarat 380009."],india=["Hyderabad - Kesari Tours Pvt. Ltd., 2nd Floor, Above Shankarlal & Sons Jewellers, Road No. 10, Banjara Hills, Hyderabad, 500034.","Indore - Kesari Tours Pvt. Ltd., 101, 1st Floor, The Magnate Tower, New Palasia, Curewell Hospital Road, Indore 452001."],indiaWorldDestinations=["Ahmedabad - Kesari Tours Pvt. Ltd., 414 Crystal Arcade, C.G. Road, Near Navrangpura Telephone Exchange, Ahmedabad, Gujarat 380009."],WorldDestinations=["Indore - Kesari Tours Pvt. Ltd., 101, 1st Floor, The Magnate Tower, New Palasia, Curewell Hospital Road, Indore 452001."],USACanada=["Hyderabad - Kesari Tours Pvt. Ltd., 2nd Floor, Above Shankarlal & Sons Jewellers, Road No. 10, Banjara Hills, Hyderabad, 500034."],SouthEastAsia=["Ahmedabad - Kesari Tours Pvt. Ltd., 414 Crystal Arcade, C.G. Road, Near Navrangpura Telephone Exchange, Ahmedabad, Gujarat 380009."],USASouthAmerica=["Indore - Kesari Tours Pvt. Ltd., 101, 1st Floor, The Magnate Tower, New Palasia, Curewell Hospital Road, Indore 452001."],japanChina=["Hyderabad - Kesari Tours Pvt. Ltd., 2nd Floor, Above Shankarlal & Sons Jewellers, Road No. 10, Banjara Hills, Hyderabad, 500034."],australiaNewZealand=["Hyderabad - Kesari Tours Pvt. Ltd., 2nd Floor, Above Shankarlal & Sons Jewellers, Road No. 10, Banjara Hills, Hyderabad, 500034."];"OffBeat"==$scope.carnival.carnival_title&&($scope.items=OffBeat),"europe"==$scope.carnival.carnival_title&&($scope.items=europe),"europeOffBeat"==$scope.carnival.carnival_title&&($scope.items=europeOffBeat),"america"==$scope.carnival.carnival_title&&($scope.items=america),"india"==$scope.carnival.carnival_title&&($scope.items=india),"japanChina"==$scope.carnival.carnival_title&&($scope.items=japanChina),"australiaNewZealand"==$scope.carnival.carnival_title&&($scope.items=australiaNewZealand),"indiaWorldDestinations"==$scope.carnival.carnival_title&&($scope.items=indiaWorldDestinations),"WorldDestinations"==$scope.carnival.carnival_title&&($scope.items=WorldDestinations),"USACanada"==$scope.carnival.carnival_title&&($scope.items=USACanada),"SouthEastAsia"==$scope.carnival.carnival_title&&($scope.items=SouthEastAsia),"USASouthAmerica"==$scope.carnival.carnival_title&&($scope.items=USASouthAmerica),$scope.carnivalDates="",$scope.carnival.branch_name="",$scope.carnival.pax=""},$scope.changedValue=function(item){var arrayNo=0;"OffBeat"==$scope.carnival.carnival_title&&"Hyderabad - Kesari Tours Pvt. Ltd., 2nd Floor, Above Shankarlal & Sons Jewellers, Road No. 10, Banjara Hills, Hyderabad, 500034."==$scope.carnival.branch_name&&(arrayNo=8,$scope.carnivalDates=["27th January 2019 (10 am - 1 pm)"]),"europe"==$scope.carnival.carnival_title&&("Hyderabad - Kesari Tours Pvt. Ltd., 2nd Floor, Above Shankarlal & Sons Jewellers, Road No. 10, Banjara Hills, Hyderabad, 500034."==$scope.carnival.branch_name&&(arrayNo=8,$scope.carnivalDates=["2nd February 2019 (10 am - 1 pm)"]),"Ahmedabad - Kesari Tours Pvt. Ltd., 414 Crystal Arcade, C.G. Road, Near Navrangpura Telephone Exchange, Ahmedabad, Gujarat 380009."==$scope.carnival.branch_name&&(arrayNo=8,$scope.carnivalDates=["3rd February 2019 (4 pm - 6 pm)"]),"Indore - Kesari Tours Pvt. Ltd., 101, 1st Floor, The Magnate Tower, New Palasia, Curewell Hospital Road, Indore 452001."==$scope.carnival.branch_name&&(arrayNo=8,$scope.carnivalDates=["3rd February 2019 (4 pm - 6 pm)"])),"europeOffBeat"==$scope.carnival.carnival_title&&("Ahmedabad - Kesari Tours Pvt. Ltd., 414 Crystal Arcade, C.G. Road, Near Navrangpura Telephone Exchange, Ahmedabad, Gujarat 380009."==$scope.carnival.branch_name&&(arrayNo=8,$scope.carnivalDates=["27th January 2019 (4 pm - 6 pm)"]),"Indore - Kesari Tours Pvt. Ltd., 101, 1st Floor, The Magnate Tower, New Palasia, Curewell Hospital Road, Indore 452001."==$scope.carnival.branch_name&&(arrayNo=8,$scope.carnivalDates=["2nd February 2019 (4 pm - 6 pm)"])),"america"==$scope.carnival.carnival_title&&"Ahmedabad - Kesari Tours Pvt. Ltd., 414 Crystal Arcade, C.G. Road, Near Navrangpura Telephone Exchange, Ahmedabad, Gujarat 380009."==$scope.carnival.branch_name&&(arrayNo=8,$scope.carnivalDates=["2nd February 2019 (4 pm - 6 pm)"]),"india"==$scope.carnival.carnival_title&&("Hyderabad - Kesari Tours Pvt. Ltd., 2nd Floor, Above Shankarlal & Sons Jewellers, Road No. 10, Banjara Hills, Hyderabad, 500034."==$scope.carnival.branch_name&&(arrayNo=8,$scope.carnivalDates=["3rd February 2019 (10 am â€“ 1 pm)"]),"Indore - Kesari Tours Pvt. Ltd., 101, 1st Floor, The Magnate Tower, New Palasia, Curewell Hospital Road, Indore 452001."==$scope.carnival.branch_name&&(arrayNo=8,$scope.carnivalDates=["1st February 2019 (4 pm - 6 pm)"])),"japanChina"==$scope.carnival.carnival_title&&"Hyderabad - Kesari Tours Pvt. Ltd., 2nd Floor, Above Shankarlal & Sons Jewellers, Road No. 10, Banjara Hills, Hyderabad, 500034."==$scope.carnival.branch_name&&(arrayNo=8,$scope.carnivalDates=["27th January 2019 (4 pm - 6 pm)"]),"australiaNewZealand"==$scope.carnival.carnival_title&&"Hyderabad - Kesari Tours Pvt. Ltd., 2nd Floor, Above Shankarlal & Sons Jewellers, Road No. 10, Banjara Hills, Hyderabad, 500034."==$scope.carnival.branch_name&&(arrayNo=8,$scope.carnivalDates=["2nd February 2019 (4 pm - 6 pm)"]),"indiaWorldDestinations"==$scope.carnival.carnival_title&&"Ahmedabad - Kesari Tours Pvt. Ltd., 414 Crystal Arcade, C.G. Road, Near Navrangpura Telephone Exchange, Ahmedabad, Gujarat 380009."==$scope.carnival.branch_name&&(arrayNo=8,$scope.carnivalDates=["2nd February 2019 (10 am - 1 pm)"]),"WorldDestinations"==$scope.carnival.carnival_title&&"Indore - Kesari Tours Pvt. Ltd., 101, 1st Floor, The Magnate Tower, New Palasia, Curewell Hospital Road, Indore 452001."==$scope.carnival.branch_name&&(arrayNo=8,$scope.carnivalDates=["2nd February 2019 (10 am - 1 pm)"]),"USACanada"==$scope.carnival.carnival_title&&"Hyderabad - Kesari Tours Pvt. Ltd., 2nd Floor, Above Shankarlal & Sons Jewellers, Road No. 10, Banjara Hills, Hyderabad, 500034."==$scope.carnival.branch_name&&(arrayNo=8,$scope.carnivalDates=["3rd February 2019 (4 pm - 6 pm)"]),"SouthEastAsia"==$scope.carnival.carnival_title&&"Ahmedabad - Kesari Tours Pvt. Ltd., 414 Crystal Arcade, C.G. Road, Near Navrangpura Telephone Exchange, Ahmedabad, Gujarat 380009."==$scope.carnival.branch_name&&(arrayNo=8,$scope.carnivalDates=["3rd February 2019 (10 am - 1 pm)"]),"USASouthAmerica"==$scope.carnival.carnival_title&&"Indore - Kesari Tours Pvt. Ltd., 101, 1st Floor, The Magnate Tower, New Palasia, Curewell Hospital Road, Indore 452001."==$scope.carnival.branch_name&&(arrayNo=8,$scope.carnivalDates=["3rd February 2019 (10 am - 1 pm)"])}}).controller("LFCtrl",function($scope,smoothScroll,$http){smoothScroll.scrollTo("start"),$scope.show=!0,$scope.showLoader=!1,$scope.done=!0,$scope.Seminar={},$scope.Seminar.seminar_title="Lakshya Foundation",$scope.save=function(form){form.$valid&&($scope.show=!1,$http.post("//login.kesari.in/route/seminar_registration/",$scope.Seminar).success(function(data,status){data&&(smoothScroll.scrollTo("start"),$scope.done=!1,$scope.msg="Thank You For Registeration of  Lakshya Foundation",$scope.show=!0,$scope.Seminar.name="",$scope.Seminar.mobile="",$scope.Seminar.email="",$scope.Seminar.pax="",$scope.form.$setPristine(),$scope.form.$setValidity(),$scope.form.$setUntouched())}))}}).controller("AccordionAwardCtrl",function($scope){$scope.oneAtATime=!0,$scope.status={isCustomHeaderOpen:!1,isFirstOpen:!0,isFirstDisabled:!1}}),angular.module("websiteApp").filter("roundup",function(){return function(value){return Math.ceil(value)}}),angular.module("websiteApp").directive("numbersOnly",function(){return{require:"ngModel",link:function(scope,element,attr,ngModelCtrl){function fromUser(text){if(text){var transformedInput=text.replace(/[^0-9]/g,"");return transformedInput!==text&&(ngModelCtrl.$setViewValue(transformedInput),ngModelCtrl.$render()),transformedInput}}ngModelCtrl.$parsers.push(fromUser)}}}),angular.module("websiteApp").factory("seoService",function($http,$q){function getActivities(data){var request=$http({method:"post",url:"https://api.kesari.in/route/WEB_META_TAG/pagetitle",data:data});return request.then(handleSuccess,handleError)}function handleSuccess(response){return response.data}function handleError(response){return $q.reject(response.data.message)}return{getActivities:getActivities}}),angular.module("websiteApp").controller("seoCtrl",function($rootScope,$scope,$location,$window,$http,DataService,seoService,$document,$rootElement,localStorageService,$cookieStore,$state){function pushDataCookieWithId(id){if(void 0===id)var formData={host:window.location.host,createdOn:new Date};else var formData={id:id,tour:getCookie("tour"),href:getCookie("href"),lastUrl:getCookie("lastUrl"),ga:getCookie("_ga"),createdOn:new Date};$cookieStore.put("invoices",id),$.getJSON("https://api.ipify.org/?format=json",function(ip){formData.locationInfo=ip,$.ajax({url:"https://api.kesari.in/route/cookieData/",type:"POST",data:JSON.stringify(formData),contentType:"application/json;charset=utf-8",dataType:"json",success:function(result){result&&(void 0===id?setCookie("track_web",result.tracking_hash,3650):console.log("updated"))},error:function(jqXHR,textStatus,errorThrown){console.log("Error in adding new cookie")}})})}function setCookie(cname,cvalue,exdays){var d=new Date;d.setTime(d.getTime()+24*exdays*60*60*1e3);var expires="expires="+d.toGMTString();document.cookie=cname+"="+cvalue+";"+expires+";path=/"}function getCookie(cname){for(var name=cname+"=",decodedCookie=decodeURIComponent(document.cookie),ca=decodedCookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""}function checkCookie(){setCookie("href",window.location.href);var user=getCookie("track_web");""!=user?pushDataCookieWithId(user):pushDataCookieWithId()}$cookieStore.put("lastUrl",{path:$location.path(),status:"undone"}),$cookieStore.put("href",{path:window.location.href}),$scope.meta_title="World Class Travel Company:Group Tours|Speciality Tours",$scope.currentValue,$scope.currentLoc,$scope.description="The trailblazing journey of Kesari began in 1984 with a pledge - safety and security of escorted Group tours, someone seeking exclusive customised holidays-Strawberi Holidays or the business traveler-KMICE, My Fair Lady which is womens special tour, Second Innings, Student Special, Educational Tours, Honeymoon Tours, Chota Break which is short tour.",$scope.keywords="Tour Packages,Tour,holiday Packages,indian holidays,india tour packages,darjeeling tour package,india travel,Holiday Packages in india,asian tour,tour package for nainital,Package Holidays,south india tour packages,Indonesia tours package,international Holiday packages,North india Tour Packages,honeymoon packages in shimla,europe tour packages from india,Travel sites,travel companies,travel tours,tour operator,Vacations,best holiday packages,best tour packages,Cheap tour Packages,cheap package holidays,Trip Packages,india travel packages,Travel and Tours Agency,family tour Packages,best tour operators in india,tour companies,family holiday packages,tourism companies in india,best holiday packages in india,Vacation Packages,all india tour packages,Group Tours,group tour packages,rajasthan tour packages from mumbai,sikkim darjeeling tour packages,women travel groups,Travel Tour Packages,asia Tour  packages,customized tour packages,holidays packages for sikkim,srinagar honeymoon package,womens tour,holiday package deals,trips for women,trip to japan from india,holiday package for shimla manali,honeymoon trip to mauritius,corporate tour package,europe tours operators,trip to srilanka from india,women Tour packages,Vacation deal,women only travel,book tour package online,South East Asia Tours packages,ladies tour packages,Last minute holiday packages,hong kong vacation packages,special holiday for a couple,Spiritual Tours to Holy Places,tour exclusively for ladies,world tours operators,europe tour operators,tour package for south africa kenya,best tour package for south africa",$scope.$watch(function(){return $location.path()},function(value){if($scope.currentValue=value,value.indexOf("-Tours")>-1&&value.indexOf("Low-Price-Tours")==-1){var nth=0;value=value.replace(/-Tours/g,function(match,i,original){return nth++,2===nth?"":match})}if($scope.currentLoc=value,"/"==value)$window.document.title="World Class Travel Company:Group Tours|Speciality Tours",$scope.description="The trailblazing journey of Kesari began in 1984 with a pledge - safety and security of escorted Group tours, someone seeking exclusive customised holidays-Strawberi Holidays or the business traveler-KMICE, My Fair Lady which is womens special tour, Second Innings, Student Special, Educational Tours, Honeymoon Tours, Chota Break which is short tour.",$scope.keywords="Tour Packages,Tour,holiday Packages,indian holidays,india tour packages,darjeeling tour package,india travel,Holiday Packages in india,asian tour,tour package for nainital,Package Holidays,south india tour packages,Indonesia tours package,international Holiday packages,North india Tour Packages,honeymoon packages in shimla,europe tour packages from india,Travel sites,travel companies,travel tours,tour operator,Vacations,best holiday packages,best tour packages,Cheap tour Packages,cheap package holidays,Trip Packages,india travel packages,Travel and Tours Agency,family tour Packages,best tour operators in india,tour companies,family holiday packages,tourism companies in india,best holiday packages in india,Vacation Packages,all india tour packages,Group Tours,group tour packages,rajasthan tour packages from mumbai,sikkim darjeeling tour packages,women travel groups,Travel Tour Packages,asia Tour  packages,customized tour packages,holidays packages for sikkim,srinagar honeymoon package,womens tour,holiday package deals,trips for women,trip to japan from india,holiday package for shimla manali,honeymoon trip to mauritius,corporate tour package,europe tours operators,trip to srilanka from india,women Tour packages,Vacation deal,women only travel,book tour package online,South East Asia Tours packages,ladies tour packages,Last minute holiday packages,hong kong vacation packages,special holiday for a couple,Spiritual Tours to Holy Places,tour exclusively for ladies,world tours operators,europe tour operators,tour package for south africa kenya,best tour package for south africa";else{if(value.indexOf("tourIti")==-1)var url={page:value.substr(1),isProduct:!1};if(url&&seoService.getActivities(url).then(function(data){data&&data[0]&&($scope.description=data[0].meta_description?data[0].meta_description:"",$scope.metaTags=data[0].meta_tag?data[0].meta_tag:"",$scope.keywords=data[0].meta_keyword?data[0].meta_keyword:"",$window.document.title=data[0].meta_title,$scope.meta_title=data[0].meta_title)}),value.indexOf("landingpage")){var pathArray=$location.path().split("/");pathArray.splice(0,1);var pgnm=pathArray.splice(1);pathArray.splice(0);"landingpage"==value&&DataService.getData("WEB_META_TAG_LANDINGPAGE/locationName/"+pgnm).then(function(landingpageMeta){$scope.description=landingpageMeta.meta_description,$scope.metaTags=landingpageMeta.meta_tag,$scope.keywords=landingpageMeta.meta_keyword,$window.document.title=landingpageMeta.meta_title,$scope.meta_title=landingpageMeta.meta_title})}else $http.post(url,{page:value.substr(1),isProduct:!0}).success(function(data,status){data&&data[0].metatag&&($scope.description=data[0].metatag[0].metadescription?data[0].metatag[0].metadescription:"",$scope.metaTags=data[0].metatag[0].metakeyword?data[0].metatag[0].metakeyword:"",$scope.metaTags=data[0].metatag[0].metakeyword?data[0].metatag[0].metakeyword:"",$scope.metaTags=data[0].metatag[0].metakeyword?data[0].metatag[0].metakeyword:"",$scope.keywords=data[0].metatag[0].metakeyword?data[0].metatag[0].metakeyword:"",$window.document.title=data[0].metatag[0].metatitle?data[0].metatag[0].metatitle:"",$scope.meta_title=data[0].metatag[0].metatitle?data[0].metatag[0].metatitle:"")});var fitPath=$location.path().split("/"),fitPath=fitPath[1];"Tailor-Made"==fitPath&&($scope.meta_title="Best Indian & International Holiday Packages India â€“ Kesari Tours",$window.document.title="Best Indian & International Holiday Packages India â€“ Kesari Tours",$scope.description="Strawberi Holidays is an FIT division of Kesari Tours Pvt. Ltd. Specializes in holiday packages at international & Indian level. Check all best and cheap international holiday packages from Mumbai India.",$scope.keywords="kesari tours, holiday packages in india, best holiday packages in india, india holiday packages, indian holiday packages, cheap holiday packages in india, holiday packages international, international holiday packages, international holiday packages from mumbai")}var pathArray=$location.url().split("/"),tourSeries=pathArray[4];value.indexOf("tourIti")>-1&&"undefined"!=tourSeries&&DataService.getData("tourname_metatag/getMetaTagForSeries/"+tourSeries).then(function(tourSeriesMeta){$scope.description=tourSeriesMeta.metatag[0].metadescription,$scope.keywords=tourSeriesMeta.metatag[0].metakeyword,$window.document.title=tourSeriesMeta.metatag[0].metatitle,$scope.meta_title=tourSeriesMeta.metatag[0].metatitle,$scope.primaryUrl=tourSeriesMeta.primaryUrl})}),$rootScope.$on("$stateChangeSuccess",function(event,to,toParams,from,fromParams){$rootScope.previousState=from}),$scope.$on("$locationChangeStart",function(evt,absNewUrl,absOldUrl){$scope.currentLoc.indexOf("login")==-1&&$scope.currentLoc.indexOf("reset")==-1&&$scope.currentLoc.indexOf("identify")==-1&&$scope.currentLoc.indexOf("logout")==-1&&$scope.currentLoc.indexOf("signup")==-1&&$scope.currentLoc.indexOf("Guest")==-1&&localStorageService.set("lastUrl",$scope.currentLoc),checkCookie()})}),angular.module("websiteApp").controller("splListTourCtrl",["$scope","$http","smoothScroll","$log","DataService","$window","$location",function(s,$http,smoothScroll,$log,d,wdw,$location){smoothScroll.scrollTo("start"),wdw.scrollTo(0,0),s.awesomeThings=[],s.selectedTour="",s.result=[],s.filterStart=!1,s.priceFilter={lower_price_bound:0,upper_price_bound:0,top:0,min:0};var month=new Array;month[1]="Jan",month[2]="Feb",month[3]="Mar",month[4]="Apr",month[5]="May",month[6]="Jun",month[7]="Jul",month[8]="Aug",month[9]="Sep",month[10]="Oct",month[11]="Nov",month[12]="Dec",s.tourType=!1,s.breadcrum=$location.path().split("/"),s.search=function(){s.filterStart=!0,s.selectedTour._id&&(s.result=[],s.selectedTour=s.selectedTour._id,s.splZone.forEach(function(zone){zone._id.indexOf(s.selectedTour)>-1&&s.result.push(zone)}))},d.getData("webHeaderMenu/getWebPackages/").then(function(specialityData){s.splZone=specialityData.SPECIALITY_PACKAGE,s.total=s.splZone.length,s.splZone.forEach(function(data){if(data._id.indexOf("-")===-1&&(data.pass=data.name.split(" ").join("-")),data.FirstDate){var start=data.FirstDate.split("-");start[1]<10&&(start[1]=10-start[1]),data.FirstDate=month[start[1]]+""+start[0]}if(data.LastDate){var end=data.LastDate.split("-");end[1]<10&&(end[1]=10-end[1]),data.LastDate=month[end[1]]+""+end[0]}0==s.priceFilter.lower_price_bound&&void 0!=data.COST_2DAY?s.priceFilter.lower_price_bound=parseInt(data.COST_2DAY):s.priceFilter.lower_price_bound>data.COST_2DAY&&data.COST_2DAY&&(s.priceFilter.lower_price_bound=parseInt(data.COST_2DAY)),0==s.priceFilter.upper_price_bound&&void 0!=data.COST_2DAY?s.priceFilter.upper_price_bound=data.COST_2DAY:s.priceFilter.upper_price_bound<data.COST_2DAY&&void 0!=data.COST_2DAY&&(s.priceFilter.upper_price_bound=parseInt(data.COST_2DAY))})}).finally(function(){s.priceFilter.min=s.priceFilter.lower_price_bound,s.priceFilter.top=s.priceFilter.upper_price_bound}),s.reset=function(){s.selectedTour="",s.total=s.splZone.length,s.result=[],s.filterStart=!1},s.onSliderChange=function(){""==s.selectedTour?(s.result=[],s.filterStart=!0,s.splZone.forEach(function(tour){tour.COST_2DAY&&void 0!=tour.COST_2DAY&&tour.COST_2DAY<=s.priceFilter.top&&tour.COST_2DAY>=s.priceFilter.min&&(s.result.push(tour),s.total=s.result.length)})):s.filterStart=!1},s.translate=function(value){return"â‚¹"+value.toLocaleString()},s.translateday=function(value){return value.toLocaleString()+"Days"},Array.prototype.sortOn=function(key){this.sort(function(a,b){return a[key]<b[key]?-1:a[key]>b[key]?1:0})}}]).controller("splTourCtrl",["$scope","DataService","$http","$location","$stateParams","$modal","smoothScroll","$log","$filter","$window",function(s,h,ht,$location,st,$modal,smoothScroll,$log,$filter,wdw){s.category="Speciality-Tours",s.awesomeThings=[],s.selection={zone:{}},smoothScroll.scrollTo("start"),wdw.scrollTo(0,0),s.loading=!0,s.show=!1,s.tour=st,s.filterStart=!1,s.count=0;var limit=0;s.TourZoneSeries=[],s.priceFilter={lower_price_bound:0,upper_price_bound:0,top:0,min:0,from:"",to:""},s.Duration={lower_day_bound:0,upper_day_bound:0,top:0,min:0,from:"",to:""},s.filterStart=!1,s.result=[],s.loadedTour=[],s.selectedZone=[],s.downloadDefault=!0,s.filterDataArray={type:"",priceRange:"",fromToPrice:"",dateOfTravel:"",travelMonth:"",dayRange:"",fromToDay:"",indian:"",world:"",departureType:""},s.regionListView=[],s.priceListView=[],s.fromTopriceView,s.priceList=[],s.totalPackage,s.daysFilterList=[],s.dayList=[],s.departureList=[],s.priceFilterList=[];var locUrl=$location.path();"/Speciality-Tours/-Tours"==locUrl&&$location.path("/Speciality-Tours"),"/Speciality-Tours/My-Fair-Lady+Kids-Tours"==locUrl&&$location.path("/Speciality-Tours/My-Fair-Lady-Tours"),"/Speciality-Tours/Economy-Tour-Tours"==locUrl&&$location.path("/Speciality-Tours/Low-Price-Tours"),s.tourType=!1,s.breadcrum=$location.path().split("/"),s.open3=function(data){s.show=!1;var modalInstance3=$modal.open({animation:s.animationsEnabled,templateUrl:"app/tour/jlPricing.html",controller:"jlPricingCtrl",size:"md",resolve:{items:function(){return{data:data}}}});modalInstance3.result.then(function(items){s.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},s.download=function(zones){var tourData1={tourID:"0",zone:"0",tourSeries:"brand:"+zones};ht.post("https://api.kesari.in/route/inventory/getTourPackageDataWeb",tourData1).then(function(awesomeThings,status){}).finally(function(){s.priceFilter.min=s.priceFilter.lower_price_bound,s.priceFilter.top=s.priceFilter.upper_price_bound,s.Duration.min=s.Duration.lower_day_bound,s.Duration.top=s.Duration.upper_day_bound})};var tourzoneSort=function(awesomeThings){awesomeThings.forEach(function(zone){zone.searchTerm=zone.TOURCODE+"-"+zone.TOURNAME,zone.TOUR_DAYS&&(zone.TOUR_DAYS=zone.TOUR_DAYS.match(numberPattern),zone.TOUR_NIGHTS=zone.TOUR_DAYS-1,zone.TOUR_DAYS=zone.TOUR_NIGHTS+1),zone.TOURMAS0&&(zone.TOUR_NIGHTS=zone.TOURMAS0[0].TM_DAYS-1,zone.TOUR_DAYS=zone.TOUR_NIGHTS+1)})};if(s.sort=function(awesomeThings){awesomeThings.forEach(function(zone){s.TourZoneSeries.indexOf(zone);zone.searchTerm=zone.TOURCODE+"-"+zone.TOURNAME,zone.TOUR_DAYS&&(zone.TOUR_DAYS=zone.TOUR_DAYS.match(numberPattern),zone.TOUR_NIGHTS=zone.TOUR_DAYS-1,zone.TOUR_DAYS=zone.TOUR_NIGHTS+1),zone.TOURMAS0&&(zone.TOUR_NIGHTS=zone.TOURMAS0[0].TM_DAYS-1,zone.TOUR_DAYS=zone.TOUR_NIGHTS+1),s.loading=!1,s.TourZoneSeries.push(zone),s.count++})},s.downloadDefault)if(""!=s.tour.tourName){var numberPattern=/\d+/g;s.tour.tourName=s.tour.tourName.split("-").join(" "),s.name=s.tour.tourName,"Low Price"==s.name&&(s.name="Economy"),"Low Price"==s.tour.tourName&&(s.tour.tourName="Economy Tour"),"Youth Special"==s.tour.tourName&&(s.tour.tourName="Student Special");var tourData2={tourID:"0",zone:"0",tourSeries:"brand:"+s.tour.tourName};$location.path().indexOf("query=")==-1&&ht.post("https://api.kesari.in/route/inventory/getTourPackageDataWeb",tourData2).then(function(awesomeThings,status){awesomeThings=awesomeThings.data,awesomeThings[0]&&awesomeThings[0].tourzonedescription&&(s.desc=awesomeThings[0].tourzonedescription),s.tourTitle=awesomeThings[0].F_BRAND,s.desc&&(s.limitVal=Math.floor(s.desc.length/2-100)),s.init=function(){s.limit=s.limitVal,s.newLimit=s.limitVal,s.moreShown=!1},s.limitValbottom=Math.floor(s.desc.length/2-100),s.initBottom=function(){s.limit=s.limitValbottom,s.newLimitBottom=s.limitValbottom,s.moreShown=!1},s.bottomDescription=awesomeThings[0].tourzoneBottomdesc,s.sort(awesomeThings)}).finally(function(){s.TourZoneSeries.forEach(function(zone){if(void 0==zone.searchTerm);}),s.total=s.TourZoneSeries.length,0==s.TourZoneSeries.length&&(s.message="No Tour Packages Available",s.loading=!1),s.priceFilter.min=s.priceFilter.lower_price_bound,s.priceFilter.top=s.priceFilter.upper_price_bound,s.Duration.min=s.Duration.lower_day_bound,s.Duration.top=s.Duration.upper_day_bound})}else $location.path("/");s.translateday=function(value){return value.toLocaleString()+"Days"},s.onSliderChange=function(){s.filterStart=!0,s.result=[],s.TourZoneSeries.forEach(function(tour){void 0!=tour.generated_NETCOST&&tour.generated_NETCOST<=s.priceFilter.top&&tour.generated_NETCOST>=s.priceFilter.min&&(s.result.push(tour),s.total=s.result.length,s.result.sortOn("generated_NETCOST"))})},s.onDurationSliderChange=function(){s.result=[],s.filterStart=!0,s.TourZoneSeries.forEach(function(tour){void 0!=tour.generated_NETCOST&&tour.TOUR_DAYS<=s.Duration.top&&tour.TOUR_DAYS>=s.Duration.min&&(s.result.push(tour),s.total=s.result.length,s.result.sortOn("TOUR_DAYS"))})},Array.prototype.sortOn=function(key){this.sort(function(a,b){return a[key]<b[key]?-1:a[key]>b[key]?1:0})},h.getData("webHeaderMenu/").then(function(awesomeThings){awesomeThings.GIT.forEach(function(tour){"D"==tour._id?s.dZone=tour.COUNTRY:s.iZone=tour.COUNTRY})}),h.getData("rsData/getTourZoneswithCategory/T").then(function(awesomeThings){s.splZone=awesomeThings,s.splZone.forEach(function(data){data._id.indexOf("-")===-1&&(data.pass=data._id.split(" ").join("-"))})}),s.open2=function(data){s.show=!1;var modalInstance2=$modal.open({animation:s.animationsEnabled,templateUrl:"app/touritinerary/ad-landing.html",controller:"gitInquiryCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start"),
s.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},s.rate=3,s.max=5,s.isReadonly=!1,s.hoveringOver=function(value){s.overStar=value,s.percent=100*(value/s.max)},s.ratingStates=[{stateOn:"glyphicon-ok-sign",stateOff:"glyphicon-ok-circle"},{stateOn:"glyphicon-star",stateOff:"glyphicon-star-empty"},{stateOn:"glyphicon-heart",stateOff:"glyphicon-ban-circle"},{stateOn:"glyphicon-heart"},{stateOff:"glyphicon-off"}],s.itinerary=function(data){s.show=!1;var modalInstance2=$modal.open({animation:s.animationsEnabled,templateUrl:"app/tour/itineraryPopUp.html",controller:"itineraryPopUpCtrl",size:"md",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){s.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},s.monthAndPricing=function(data){s.show=!1;var modalInstance2=$modal.open({animation:s.animationsEnabled,templateUrl:"app/tour/DatePricing.html",controller:"DatePricingCtrl",size:"md",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){s.show=items},function(){$log.info("Modal dismissed at: "+new Date)})};var pathArray=$location.path().split("/");if($location.path().indexOf("type=")>-1){s.downloadDefault=!1;var process="";process=$location.path().substring($location.path().indexOf("type=")+5,$location.path().indexOf("|priceRange=")),process.indexOf(",")>-1?(s.selection.zone=s.selection.zone||{},process.split(",").forEach(function(region){s.selection.zone[region]=!0})):(s.selection.zone=s.selection.zone||{},s.selection.zone[process]=!0)}if($location.path().indexOf("priceRange=")>-1){s.downloadDefault=!1;var process="";process=$location.path().substring($location.path().indexOf("priceRange=")+11,$location.path().indexOf("|fromToPrice="));var MinMaxPrice=process;s.priceListView2=MinMaxPrice.split(","),process.indexOf(",")>-1?(s.selection.range=s.selection.range||{},process.split(",").forEach(function(region){s.selection.range[region]=!0})):(s.selection.range=s.selection.range||{},s.selection.range[process]=!0)}if($location.path().indexOf("|fromToPrice=")>-1){var pathArray=$location.path(),priceFromTo=pathArray.split("|fromToPrice="),priceFromTo1=priceFromTo[1],actualPrice=priceFromTo1.split("|dateOfTravel="),totalPrice=actualPrice[0];s.TotalMainPrice=totalPrice.split(" to "),s.priceListView1=totalPrice,s.priceListView1=totalPrice,s.TotalMainPrice=totalPrice.split(" to "),s.priceFrom=s.priceFilter.from=s.TotalMainPrice[0],s.priceTo=s.priceFilter.to=s.TotalMainPrice[1],s.TotalMainPrice[0]&&s.TotalMainPrice[1]>0&&(s.priceFrom=s.priceFilter.from=s.TotalMainPrice[0],s.priceTo=s.priceFilter.to=s.TotalMainPrice[1])}if($location.path().indexOf("|dateOfTravel=")>-1&&(s.downloadDefault=!1,s.tofromDate=$location.path().substring($location.path().indexOf("dateOfTravel=")+13,$location.path().indexOf("|travelMonth=")),s.actualDate=s.tofromDate),$location.path().indexOf("|travelMonth=")>-1&&(s.downloadDefault=!1,s.actualMonth=$location.path().substring($location.path().indexOf("travelMonth=")+12,$location.path().indexOf("|dayRange="))),$location.path().indexOf("|dayRange=")>-1){s.downloadDefault=!1;var process="";process=$location.path().substring($location.path().indexOf("dayRange=")+9,$location.path().indexOf("|fromToDay=")),s.actualDays=process,s.TotalMainDays=s.actualDays.split(","),process.indexOf(",")>-1?(s.selection.duration=s.selection.duration||{},process.split(",").forEach(function(region){s.selection.duration[region]=!0})):(s.selection.duration=s.selection.duration||{},s.selection.duration[process]=!0)}if($location.path().indexOf("|fromToDay=")>-1&&(s.downloadDefault=!1,s.actualDay=$location.path().substring($location.path().indexOf("fromToDay=")+10,$location.path().indexOf("|world="))),$location.path().indexOf("|world=")>-1){s.downloadDefault=!1;var process="";process=$location.path().substring($location.path().indexOf("world=")+6,$location.path().indexOf("|indian="));var sector=process;s.worldSector=sector.split(","),process.indexOf(",")>-1?(s.selection.inter=s.selection.inter||{},process.split(",").forEach(function(region){s.selection.inter[region]=!0})):(s.selection.inter=s.selection.inter||{},s.selection.inter[process]=!0)}if($location.path().indexOf("|indian=")>-1){s.downloadDefault=!1;var process="";process=$location.path().substring($location.path().indexOf("indian=")+7,$location.path().indexOf("|departureType="));var brnd=process;s.mainBrand=brnd.split(","),process.indexOf(",")>-1?(s.selection.dom=s.selection.dom||{},process.split(",").forEach(function(region){s.selection.dom[region]=!0})):(s.selection.dom=s.selection.dom||{},s.selection.dom[process]=!0)}if($location.path().indexOf("|departureType=")>-1){var process="",pathArray=$location.path(),datedisplayed=pathArray.split("|departureType="),brnd=datedisplayed[1];process=datedisplayed[1],s.mainDeparture=brnd.split(","),process.indexOf(",")>-1?(s.selection.departure=s.selection.departure||{},process.split(",").forEach(function(region){s.selection.departure[region]=!0})):(s.selection.departure=s.selection.departure||{},s.selection.departure[process]=!0)}if(!$location.path().indexOf("Speciality-Tours=")>-1){var process=s.tour.tourName;s.selection.zone=s.selection.zone||{},s.regionList=s.regionList||[],s.TourZoneSeries=s.TourZoneSeries||[],$location.path().indexOf("/query=")==-1&&(s.selection.zone[process]=!0)}s.load=function(zones,status){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|")),url="",count=0;Object.keys(s.selection.zone).forEach(function(data){1==s.selection.zone[data]&&data&&""!=data&&(url+=0==count?data:","+data,count++)}),s.filterDataArray?(""!=s.filterDataArray.type?s.filterDataArray.type=url:s.filterDataArray.type=url,basePageUrl=basePageUrl?basePageUrl+"query=|type="+s.filterDataArray.type+"|priceRange=|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType:$location.path()+"/query=|type="+s.filterDataArray.type+"|priceRange=|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType,$location.path(basePageUrl)):$location.path()},s.chcekedPrice=function(range,status){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|")),url="",count=0;Object.keys(s.selection.range).forEach(function(data){1==s.selection.range[data]&&data&&""!=data&&(url+=0==count?data:","+data,count++)}),s.filterDataArray?(""!=s.filterDataArray.priceRange?s.filterDataArray.priceRange=url:s.filterDataArray.priceRange=url,basePageUrl=basePageUrl?basePageUrl+"query=|type="+s.filterDataArray.type+"|priceRange="+s.filterDataArray.priceRange+"|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType:$location.path()+"/query=|type="+s.filterDataArray.type+"|priceRange="+s.filterDataArray.priceRange+"|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType,$location.path(basePageUrl)):$location.path()},s.priceSearch=function(priceFrom,priceTo){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|"));s.priceFrom=priceFrom,s.priceTo=priceTo;var minMaxPrice=priceFrom+" to "+priceTo;s.filterDataArray.fromToPrice=minMaxPrice,s.filterDataArray?(basePageUrl=basePageUrl?basePageUrl+"query=|type="+s.filterDataArray.type+"|priceRange="+s.filterDataArray.priceRange+"|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType:$location.path()+"/query=|type="+s.filterDataArray.type+"|priceRange="+s.filterDataArray.priceRange+"|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType,$location.path(basePageUrl)):$location.path()},s.daySearch=function(dayFrom,dayTo){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|"));s.dayFrom=dayFrom,s.dayTo=dayTo;var minMaxDay=dayFrom+" to "+dayTo;s.filterDataArray.fromToDay=minMaxDay,s.filterDataArray?(basePageUrl=basePageUrl?basePageUrl+"query=|type="+s.filterDataArray.type+"|priceRange="+s.filterDataArray.priceRange+"|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType:$location.path()+"/query=|type="+s.filterDataArray.type+"|priceRange="+s.filterDataArray.priceRange+"|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType,$location.path(basePageUrl)):$location.path()},s.date1=function(){s.popup1.opened=!0},s.date2=function(){s.popup2.opened=!0},s.popup1={opened:!1},s.popup2={opened:!1},s.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},s.dateOptions={formatYear:"yy",startingDay:1},s.minDate=new Date,s.maxDate=new Date(2020,5,22),s.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd-MM-yyyy","shortDate","mm/yyyy"],s.format1=s.format=s.formats[2],s.example={value:new Date,anniversary:new Date},s.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},s.dateOptions={formatYear:"yy",startingDay:1},s.minDate=new Date,s.maxDate=new Date(2020,5,22),s.formats=["MMM-yyyy","yyyy/MMMM","MMMM-yyyy","shortDate"],s.formated=s.formats[0],s.example={value:new Date,anniversary:new Date},s.status={opened:!1},s.open=function(){s.status.opened=!0};var formDate;s.dateSearch=function(fromDate,toDate,dateOfMonth){if((fromDate&&toDate||dateOfMonth)&&(""!=formDate&&""!=toDate||""!=dateOfMonth)){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|"));void 0==fromDate&&(fromDate=""),void 0==toDate&&(toDate=""),void 0==dateOfMonth&&(dateOfMonth=""),formDate=$filter("date")(fromDate,"dd-MM-yyyy"),toDate=$filter("date")(toDate,"dd-MM-yyyy"),dateOfMonth=$filter("date")(dateOfMonth,"MM-yyyy"),s.formattedDate=formDate+" to "+toDate,s.filterDataArray.travelMonth=dateOfMonth,s.filterDataArray.dateOfTravel=s.formattedDate,s.filterDataArray?(basePageUrl=basePageUrl?basePageUrl+"query=|type="+s.filterDataArray.type+"|priceRange="+s.filterDataArray.priceRange+"|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType+"|departureType="+s.filterDataArray.departureType:$location.path()+"/query=|type="+s.filterDataArray.type+"|priceRange="+s.filterDataArray.priceRange+"|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType+"|departureType="+s.filterDataArray.departureType,$location.path(basePageUrl)):$location.path()}},s.dateSearchClosed=function(fromDate,toDate,dateOfMonth){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|"));void 0==fromDate&&(fromDate=""),void 0==toDate&&(toDate=""),void 0==dateOfMonth&&(dateOfMonth=""),formDate=$filter("date")(fromDate,"dd-MM-yyyy"),toDate=$filter("date")(toDate,"dd-MM-yyyy"),dateOfMonth=$filter("date")(dateOfMonth,"MM-yyyy"),s.formattedDate=formDate+" to "+toDate,s.filterDataArray.travelMonth=dateOfMonth,s.filterDataArray.dateOfTravel=s.formattedDate,s.filterDataArray?(basePageUrl=basePageUrl?basePageUrl+"query=|type="+s.filterDataArray.type+"|priceRange="+s.filterDataArray.priceRange+"|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType:$location.path()+"/query=|type="+s.filterDataArray.type+"|priceRange="+s.filterDataArray.priceRange+"|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType,$location.path(basePageUrl)):$location.path()},s.chcekedDuration=function(duration,status){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|")),url="",count=0;Object.keys(s.selection.duration).forEach(function(data){1==s.selection.duration[data]&&data&&""!=data&&(url+=0==count?data:","+data,count++)}),s.filterDataArray?(""!=s.filterDataArray.dayRange?s.filterDataArray.dayRange=url:s.filterDataArray.dayRange=url,basePageUrl=basePageUrl?basePageUrl+"query=|type="+s.filterDataArray.type+"|priceRange="+s.filterDataArray.priceRange+"|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType:$location.path()+"/query=|type="+s.filterDataArray.type+"|priceRange="+s.filterDataArray.priceRange+"|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType,$location.path(basePageUrl)):$location.path()},s.loadPackage=function(name,status){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|")),url="",count=0;Object.keys(s.selection.inter).forEach(function(data){1==s.selection.inter[data]&&data&&""!=data&&(url+=0==count?data:","+data,count++)}),s.filterDataArray?(""!=s.filterDataArray.world?s.filterDataArray.world=url:s.filterDataArray.world=url,basePageUrl=basePageUrl?basePageUrl+"query=|type="+s.filterDataArray.type+"|priceRange="+s.filterDataArray.priceRange+"|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType:$location.path()+"/query=|type="+s.filterDataArray.type+"|priceRange="+s.filterDataArray.priceRange+"|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType,$location.path(basePageUrl)):$location.path()},s.loaddom=function(name,status){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|")),url="",count=0;Object.keys(s.selection.dom).forEach(function(data){1==s.selection.dom[data]&&data&&""!=data&&(url+=0==count?data:","+data,count++)}),s.filterDataArray?(""!=s.filterDataArray.indian?s.filterDataArray.indian=url:s.filterDataArray.indian=url,basePageUrl=basePageUrl?basePageUrl+"query=|type="+s.filterDataArray.type+"|priceRange="+s.filterDataArray.priceRange+"|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType:$location.path()+"/query=|type="+s.filterDataArray.type+"|priceRange="+s.filterDataArray.priceRange+"|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType,$location.path(basePageUrl)):$location.path()},s.searchDeparture=function(Departure,status){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|")),url="",count=0;Object.keys(s.selection.departure).forEach(function(data){1==s.selection.departure[data]&&data&&""!=data&&(url+=0==count?data:","+data,count++)}),s.filterDataArray?(""!=s.filterDataArray.departureType?s.filterDataArray.departureType=url:s.filterDataArray.departureType=url,basePageUrl=basePageUrl?basePageUrl+"query=|type="+s.filterDataArray.type+"|priceRange="+s.filterDataArray.priceRange+"|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType+"|departureType="+s.filterDataArray.departureType:$location.path()+"/query=|type="+s.filterDataArray.type+"|priceRange="+s.filterDataArray.priceRange+"|fromToPrice="+s.filterDataArray.fromToPrice+"|dateOfTravel="+s.filterDataArray.dateOfTravel+"|travelMonth="+s.filterDataArray.travelMonth+"|dayRange="+s.filterDataArray.dayRange+"|fromToDay="+s.filterDataArray.fromToDay+"|world="+s.filterDataArray.world+"|indian="+s.filterDataArray.indian+"|departureType="+s.filterDataArray.departureType,$location.path(basePageUrl)):$location.path()};var getDate="",getMonth="",getDuration="",getdeparture="";if(st.query){var urlArray1=st.query.split("|"),mainquery="",mainPrice="",toPrice=0,fromPrice=0,fromToPrice=0,toDay="",fromDay="",fromToDay=0,mainSector="";urlArray1.forEach(function(getData){if(getData.indexOf("type=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],s.filterDataArray[stateParameter]=getData,""!=mainquery?(mainquery=mainquery+","+getData,s.modifiedMainquery=mainquery.replace(/,\s*$/,"")):(mainquery=getData,s.modifiedMainquery=mainquery.replace(/,\s*$/,""))}if(getData.indexOf("departureType=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],getdeparture=getData;var departureArray=getData.split(",");s.departureList.push(departureArray),s.filterDataArray[stateParameter]=getData}if(getData.indexOf("priceRange=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],mainPrice=getData,s.mainPrice=mainPrice;var priceListArray=getData.split(",");s.priceList.push(priceListArray),s.filterDataArray[stateParameter]=getData}if(getData.indexOf("fromToPrice=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],fromToPrice=getData;var priceListArray=getData.split("to");s.filterDataArray[stateParameter]=getData,priceListArray[0]&&(fromPrice=priceListArray[0]),priceListArray[1]&&(toPrice=priceListArray[1])}if(getData.indexOf("dateOfTravel=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],getDate=getData,s.filterDataArray[stateParameter]=getData}if(getData.indexOf("travelMonth=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],getMonth=getData,s.filterDataArray[stateParameter]=getData}if(getData.indexOf("dayRange=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],getDuration=getData;var dayListArray=getData.split(",");s.dayList.push(dayListArray),s.filterDataArray[stateParameter]=getData}if(getData.indexOf("fromToDay=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],fromToDay=getData;var dayListArray1=getData.split("to");s.filterDataArray[stateParameter]=getData,dayListArray1[0]&&(fromDay=dayListArray1[0]),dayListArray1[1]&&(toDay=dayListArray1[1])}if(getData.indexOf("world=")!=-1||getData.indexOf("indian=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],s.filterDataArray[stateParameter]=getData,""!=mainSector?(mainSector=mainSector+","+getData,s.modifiedmainSector=mainSector.replace(/,\s*$/,"")):(mainSector=getData,s.modifiedmainSector=mainSector.replace(/,\s*$/,""))}}),s.modifiedMainquery?ht.get("https://api.kesari.in/route/inventory/getAllFiltersWithSectorWeb/?query=speciality=["+s.modifiedMainquery+"]").success(function(awesomeThings){s.priceFilterList=awesomeThings[2].list[0].rangeUpto,s.daysFilterList=awesomeThings[3].list[0].range;var daysFilterList=awesomeThings[3].range,priceFilterList=awesomeThings[2].range;s.departureFilterList=awesomeThings[6].range,s.priceFilter.min=s.priceFilter.lower_price_bound=priceFilterList[0],s.priceFilter.top=s.priceFilter.upper_price_bound=priceFilterList[1],s.Duration.min=s.Duration.lower_day_bound=daysFilterList[0],s.Duration.top=s.Duration.upper_day_bound=daysFilterList[1]}):ht.get("https://api.kesari.in/route/inventory/getAllFiltersWithSectorWeb/?query=speciality=["+s.tour.tourName+"]").success(function(awesomeThings){s.priceFilterList=awesomeThings[2].list[0].rangeUpto,s.daysFilterList=awesomeThings[3].list[0].range;var daysFilterList=awesomeThings[3].range,priceFilterList=awesomeThings[2].range;s.departureFilterList=awesomeThings[6].range,s.priceFilter.min=s.priceFilter.lower_price_bound=priceFilterList[0],s.priceFilter.top=s.priceFilter.upper_price_bound=priceFilterList[1],s.Duration.min=s.Duration.lower_day_bound=daysFilterList[0],s.Duration.top=s.Duration.upper_day_bound=daysFilterList[1],mainquery=s.tour.tourName})}else s.tour.tourName&&ht.get("https://api.kesari.in/route/inventory/getAllFiltersWithSectorWeb/?query=speciality=["+s.tour.tourName+"]").success(function(awesomeThings){s.priceFilterList=awesomeThings[2].list[0].rangeUpto,s.daysFilterList=awesomeThings[3].list[0].range;var daysFilterList=awesomeThings[3].range,priceFilterList=awesomeThings[2].range;s.departureFilterList=awesomeThings[6].range,s.priceFilter.min=s.priceFilter.lower_price_bound=priceFilterList[0],s.priceFilter.top=s.priceFilter.upper_price_bound=priceFilterList[1],s.Duration.min=s.Duration.lower_day_bound=daysFilterList[0],s.Duration.top=s.Duration.upper_day_bound=daysFilterList[1],mainquery=s.tour.tourName});s.getButtonLabel=function(label){var priceFilterListData="";return s.priceFilterList.forEach(function(priceFilterList){priceFilterList.value==label&&(priceFilterListData=priceFilterList.list)}),!(!priceFilterListData||""==priceFilterListData)&&priceFilterListData};var limit=0;s.disableButton=!1,s.allPackages=[],mainPrice||(mainPrice=""),fromPrice||(fromPrice=""),toPrice||(toPrice="");var searchPageView=0;$location.path().indexOf("/query=")!=-1&&(searchPageView=1),1==searchPageView&&(s.modifiedMainquery?(s.downloadDefault=!1,s.modifiedMainquery.indexOf(",")!=-1?s.regionListView=s.modifiedMainquery.split(","):s.regionListView[0]=s.modifiedMainquery,mainPrice.indexOf(",")!=-1?(s.priceListView=mainPrice.split(","),s.priceListView=fromToPrice):s.priceListView[0]=mainPrice,s.priceListView1=fromToPrice,ht.get("https://api.kesari.in/route/filterData/getFilteredData/?brand=["+s.modifiedMainquery+"]&price=["+mainPrice+"]&fromPrice="+fromPrice+"&toPrice="+toPrice+"&skip="+limit+"&dateOfTravel="+getDate+"&travelMonth="+getMonth+"&days=["+getDuration+"]&fromDays="+fromDay+"&toDays="+toDay+"&sectors=["+s.modifiedmainSector+"]&exRegion=["+getdeparture+"]").success(function(filterData){tourzoneSort(filterData),0==filterData.length&&(s.message="Tour Packages are coming soon !!!"),s.TourZoneSeries=filterData,s.total=s.TourZoneSeries.length,s.loading=!1,limit+=30,s.TourZoneSeries.length>=30&&(s.loadMore=function(){ht.get("https://api.kesari.in/route/filterData/getFilteredData/?brand=["+s.modifiedMainquery+"]&price=["+mainPrice+"]&fromPrice="+fromPrice+"&toPrice="+toPrice+"&skip="+limit+"&dateOfTravel="+getDate+"&travelMonth="+getMonth+"&days=["+getDuration+"]&fromDays="+fromDay+"&toDays="+toDay+"&sectors=["+s.modifiedmainSector+"]&exRegion=["+getdeparture+"]").success(function(filterData){tourzoneSort(filterData),s.TourZoneSeries=s.TourZoneSeries.concat(filterData),s.total=s.TourZoneSeries.length,0==filterData&&(s.disableButton=!0),limit+=30})})})):s.downloadDefault||(s.downloadDefault=!1,mainPrice.indexOf(",")!=-1?s.priceListView=mainPrice.split(","):s.priceListView[0]=mainPrice,ht.get("https://api.kesari.in/route/filterData/getFilteredData/?brand=["+st.tourName+"]&price=["+mainPrice+"]&fromPrice="+fromPrice+"&toPrice="+toPrice+"&skip="+limit+"&dateOfTravel="+getDate+"&travelMonth="+getMonth+"&days=["+getDuration+"]&fromDays="+fromDay+"&toDays="+toDay+"&sectors=["+s.modifiedmainSector+"]&exRegion=["+getdeparture+"]").success(function(filterData){0==filterData.length&&(s.message="Tour Packages are coming soon !!!"),tourzoneSort(filterData),s.TourZoneSeries=filterData,s.total=s.TourZoneSeries.length,s.totalPackage=s.total,limit+=30,s.loading=!1,s.TourZoneSeries.length>=30&&(s.loadMore=function(){ht.get("https://api.kesari.in/route/filterData/getFilteredData/?brand=["+st.tourName+"]&price=["+mainPrice+"]&fromPrice="+fromPrice+"&toPrice="+toPrice+"&skip="+limit+"&dateOfTravel="+getDate+"&travelMonth="+getMonth+"&days=["+getDuration+"]&fromDays="+fromDay+"&toDays="+toDay+"&sectors=["+s.modifiedmainSector+"]&exRegion=["+getdeparture+"]").success(function(filterData){tourzoneSort(filterData),s.TourZoneSeries=s.TourZoneSeries.concat(filterData),s.total=s.TourZoneSeries.length,0==filterData&&(s.disableButton=!0),limit+=30})})}))),s.closed=function(priceListView1){s.TotalMainPrice=priceListView1.split(" to "),s.priceFilter.from="",s.priceFilter.to="",s.priceSearch(s.priceFilter.from,s.priceFilter.to),$(".popup-mytest").hide()},s.cancel=function(key,value){s.selection.zone[key]=!1,s.selection.range[key]=!1,s.selection.duration[key]=!1,s.selection.dom[key]=!1,s.selection.inter[key]=!1,s.selection.departure[key]=!1,s.loaddom(key,value),s.loadPackage(key,value),s.load(key,value),s.chcekedPrice(key,value),s.chcekedDuration(key,value),s.searchDeparture(key,value)},s.closedDate=function(date){var tofromDate=date.split(" to ");s.actualDate=tofromDate="";var fromDate,toDate,dateOfMonth;void 0==fromDate&&(fromDate=""),void 0==toDate&&(toDate=""),void 0==dateOfMonth&&(dateOfMonth=""),s.dateSearchClosed(fromDate,toDate,dateOfMonth),$(".popup-mytest1").hide()},s.closedMonth=function(actualMonth){dateOfMonth=actualMonth="";var fromDate,toDate,dateOfMonth;void 0==fromDate&&(fromDate=""),void 0==toDate&&(toDate=""),void 0==dateOfMonth&&(dateOfMonth=""),s.dateSearchClosed(fromDate,toDate,dateOfMonth),$(".popup-mytest2").hide()},s.closedday=function(actualDay){s.TotalMaindays=actualDay.split(" to "),s.Duration.from="",s.Duration.to="",s.daySearch(s.Duration.from,s.Duration.to),$(".popup-mytest3").hide()}}]),angular.module("websiteApp").controller("DatePricingCtrl",function($scope,$modal,items,$modalInstance){$scope.items=items.data,$scope.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("websiteApp").controller("itineraryPopUpCtrl",function($scope,$modal,items,$modalInstance,$location,$cookieStore,DataService){if($scope.tourCode=items.data.TOURCODE,$scope.tourName=items.data.TM_ZONE,$scope.seeAll=function(region){"I"==region?$location.path("/World-Tours/"+$scope.tour.split(" ").join("-")+"-Tours"):"D"==region?$location.path("/India-Tours/"+$scope.tour.split(" ").join("-")+"-Tours"):"spl"==region&&$location.path("/Speciality-Tours/"+$scope.tour.split(" ").join("-")+"-Tours")},items.data.TOURCODE&&items.data.TM_ZONE){$scope.url="";items.data.F_BRAND.indexOf("Speciality-Tours")>-1?($location.path().indexOf("tourIti2017")>-1?$scope.url="inventory/getTourPackageData17/0/Brand:"+$scope.tour.zone.split("-").join(" ")+"/"+$scope.tour.code.split("-").join(" "):$scope.url="inventory/getTourPackageData/0/Brand:"+$scope.tour.zone.split("-").join(" ")+"/"+$scope.tour.code.split("-").join(" "),$cookieStore.put("tour",{type:"Speciality-Tours",zone:items.data.TOURCODE,tourcode:$scope.tour.code.split("-").join(" "),path:$location.path()})):($location.path().indexOf("tourIti2017")>-1?$scope.url="inventory/getTourPackageData17/0/"+items.data.TM_ZONE.split("-").join(" ")+"/"+items.data.TOURCODE.split("-").join(" "):$scope.url="inventory/getTourPackageData/0/"+items.data.TM_ZONE.split("-").join(" ")+"/"+items.data.TOURCODE,$cookieStore.put("tour",{type:"Group-Tours",zone:items.data.TM_ZONE,tourcode:items.data.TOURCODE.split("-").join(" "),path:$location.path()})),DataService.getData($scope.url).then(function(awesomeThings){$scope.tourData=awesomeThings[0],$scope.tourData&&$scope.tourData.tour_usp&&($scope.tourData.usp=$scope.tourData.tour_usp),$scope.tourDate=[];$scope.tourData&&$scope.tourData.TOURMAS0&&$scope.tourData.TOURMAS0.forEach(function(date){if(null!=date){var tempDeparture=date.TM_SDESC?date.TM_SDESC.split("-"):"";date.departure=tempDeparture[0];var price=parseInt(date.COST_2DAY)-parseInt(date.DISC_2DAY),tempDate=new Date(date.TM_DT1.substring(0,date.TM_DT1.indexOf("T")));tempDate>new Date&&""===date.TM_FULL&&(void 0!=date.bonanza_cost&&null!=date.bonanza_cost&&" "!=date.bonanza_cost?$scope.tourDate.push({date:date.TM_DT1.substring(0,date.TM_DT1.indexOf("T")),COST_2DAY:date.COST_2DAY,DISC_2DAY:price,TM_TCD:date.TM_TCD,tm_days:date.TM_DAYS,value:new Date(date.TM_DT1).getMonth()+1,departure:date.departure,category:date.TM_FINCATG,bonanza_cost:date.bonanza_cost}):$scope.tourDate.push({date:date.TM_DT1.substring(0,date.TM_DT1.indexOf("T")),COST_2DAY:date.COST_2DAY,DISC_2DAY:price,TM_TCD:date.TM_TCD,tm_days:date.TM_DAYS,value:new Date(date.TM_DT1).getMonth()+1,departure:date.departure,category:date.TM_FINCATG}));new Date(date.TM_DT1).getMonth()}}),$scope.tourDate=$scope.tourDate.sort(function(a,b){var c=new Date(a.date),d=new Date(b.date);return c-d}),$scope.Iti=$scope.tourData.ITINERARY_NEW[0].itnr,$scope.itiLoaded=!0,$scope.dayIti=[],$scope.dayIti2=[],
$scope.dayIti3=[],$scope.tourData.ITINERARY_NEW[1]&&($scope.Iti2=$scope.tourData.ITINERARY_NEW[1].itnr),$scope.tourData.ITINERARY_NEW[2]&&($scope.Iti3=$scope.tourData.ITINERARY_NEW[2].itnr),$scope.days=$scope.Iti.TM_DAYS,$scope.nights=parseInt($scope.Iti.TM_DAYS)-1,$scope.stays=$scope.Iti.STAY1+$scope.Iti.STAY2+$scope.Iti.STAY3,$scope.Iti.STAY4+$scope.Iti.STAY5+$scope.Iti.STAY6,$scope.stays=String($scope.stays).replace(/<[^>]+>/gm,""),$scope.dayIti=$scope.tourData.ITINERARY_NEW[0].itnr.days,$scope.dayIti&&($scope.dayItiValidity={from:new Date($scope.tourData.ITINERARY_NEW[0].itnr.valid_from),to:new Date($scope.tourData.ITINERARY_NEW[0].itnr.valid_to)}),$scope.Iti2&&($scope.dayIti2=$scope.tourData.ITINERARY_NEW[1].itnr.days,$scope.dayIti2Validity={from:new Date($scope.tourData.ITINERARY_NEW[1].itnr.valid_from),to:new Date($scope.tourData.ITINERARY_NEW[1].itnr.valid_to)}),$scope.Iti3&&($scope.dayIti3=$scope.tourData.ITINERARY_NEW[2].itnr.days,$scope.dayIti3Validity={from:new Date($scope.tourData.ITINERARY_NEW[2].itnr.valid_from),to:new Date($scope.tourData.ITINERARY_NEW[2].itnr.valid_to)})})}$scope.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("websiteApp").controller("TailorMadeCtrl",function($scope,$http,DataService,smoothScroll){smoothScroll.scrollTo("start"),$scope.awesomeThings=[],$scope.list=[],$scope.selectedTour="",$scope.filterStart=!1,$scope.loading=!0,$scope.search=function(){$scope.startsWith=function(state,viewValue){return state.substr(0,viewValue.length).toLowerCase()==viewValue.toLowerCase()},$scope.filterStart=!0,$scope.selectedTour&&($scope.selectedTour=$scope.selectedTour)},DataService.getData("rsData/getFITzonesv2/").then(function(awesomeThings){$scope.fZone=awesomeThings,$scope.loading=!1,$scope.fZone.forEach(function(country){country.country.forEach(function(each){$scope.list.push(each.Country)})})}).finally(function(){$scope.total=$scope.list.length}),$scope.reset=function(){$scope.selectedTour="",$scope.filterStart=!1}}),angular.module("websiteApp").config(function($stateProvider){$stateProvider.state("login",{url:"/login",templateUrl:"app/account/login/login.html",controller:"LoginCtrl"}).state("signup",{url:"/signup",templateUrl:"app/account/signup/signup.html",controller:"SignupCtrl"}).state("forgotten",{url:"/identify",templateUrl:"app/account/settings/forgot.html",controller:"ForgotCtrl"}).state("resetpassword",{url:"/resetpassword/:id",templateUrl:"app/account/settings/reset.html",controller:"ResetCtrl",params:{id:null}})}),angular.module("websiteApp").controller("LoginCtrl",function($scope,Auth,$http,$location,$window,smoothScroll,User,localStorageService){smoothScroll.scrollTo("start"),$window.scrollTo(0,0),Auth.logout();var redirectUrl=localStorageService.get("lastUrl");$scope.user={},$scope.errors={},Auth.isLoggedIn()&&(console.log("user already LoggedIn"),$location.path("/")),$scope.login=function(form){form.$valid&&($scope.submitted=!0,Auth.login({email:$scope.user.email,password:$scope.user.password}).then(function(){console.log(redirectUrl),$location.path(redirectUrl)}).catch(function(err){$scope.errors.other=err.message}))},$scope.loginOauth=function(provider){$window.location.href="/auth/"+provider}}),angular.module("websiteApp").controller("SettingsCtrl",function($scope,User,Auth,$location){$scope.errors={},$scope.changePassword=function(form){$scope.submitted=!0,form.$valid&&Auth.changePassword($scope.user.oldPassword,$scope.user.newPassword).then(function(){$scope.message="Password successfully changed."}).catch(function(){form.password.$setValidity("mongoose",!1),$scope.errors.other="Incorrect password",$scope.message=""})}}).controller("ForgotCtrl",function($scope,Auth,$timeout,$location){$scope.disable=!1,$scope.submit=function(form){form.$valid&&($scope.submitted=!0,$scope.disable=!0,Auth.forgottenPassword($scope.user.email).then(function(){$scope.message="Please Check your Account for Reset password Link",$timeout(function(){$location.path("/")},3e3)}).catch(function(){$scope.message="Incorrect mail id",$timeout(function(){$scope.message=""},300),$scope.disable=!1,$scope.user.email=""}))}}).controller("ResetCtrl",function($scope,Auth,$stateParams,$location,$timeout){$scope.authorized=!1,$scope.done=!1,$scope.user={},Auth.verifyLink($stateParams.id).then(function(status){$scope.authorized=!0}).catch(function(){$scope.authorized=!1,$scope.message="Incorrect Link",$timeout(function(){$location.path("/")},3e3)}),$scope.resetPassword=function(form){$scope.submitted=!0,form.$valid&&($scope.user.newPassword!=$scope.user.newPassword1?Auth.resetPassword($stateParams.id,$scope.user.newPassword).then(function(){$scope.done=!0,$scope.message="Your Password Changed successfully.",$timeout(function(){$location.path("/login")},3e3)}).catch(function(){form.password.$setValidity("mongoose",!1),$scope.message=""}):($scope.message="Please Re-Enter Password",$scope.user.newPassword="",$scope.user.newPassword1=""))}}).controller("ResetPassword",function($scope,Auth,$stateParams){$scope.resetPassword=function(form){console.log("hereee"),$scope.submitted=!0,form.$valid&&Auth.resetPassword($scope.user.newPassword).then(function(){$scope.message="Your Password Changed successfully."}).catch(function(){form.password.$setValidity("mongoose",!1),$scope.message=""})}}),angular.module("websiteApp").controller("SignupCtrl",function($scope,Auth,$location,$window){$scope.user={},$scope.errors={},$scope.siteKey="6LffQxoTAAAAAKZXEO4EzXVbcf79RCPAHTKOR8p1",$scope.gender=[{name:"Male"},{name:"Female"}],$scope.register=function(form){$scope.submitted=!0,form.$valid&&Auth.createUser({name:$scope.user.name,lastname:$scope.user.lastname,email:$scope.user.email,password:$scope.user.password,mobile:$scope.user.mobile,gender:$scope.user.gender.name,dob:$scope.user.dob}).then(function(){$location.path("/")}).catch(function(err){err=err.data,$scope.errors={},angular.forEach(err.errors,function(error,field){form[field].$setValidity("mongoose",!1),$scope.errors[field]=error.message})})},$scope.loginOauth=function(provider){$window.location.href="/auth/"+provider}}).directive("validPasswordC",function(){return{require:"ngModel",scope:{reference:"=validPasswordC"},link:function(scope,elm,attrs,ctrl){ctrl.$parsers.unshift(function(viewValue,$scope){var noMatch=viewValue!=scope.reference;return ctrl.$setValidity("noMatch",!noMatch),noMatch?noMatch:!noMatch}),scope.$watch("reference",function(value){ctrl.$setValidity("noMatch",value===ctrl.$viewValue)})}}}),angular.module("websiteApp").config(function($stateProvider){$stateProvider.state("admin",{url:"/admin",templateUrl:"app/admin/admin.html",controller:"AdminCtrl"})}).controller("AdminCtrl",function($scope,$http,Auth,User){$scope.users=User.query(),$scope.delete=function(user){User.remove({id:user._id}),angular.forEach($scope.users,function(u,i){u===user&&$scope.users.splice(i,1)})}}),angular.module("websiteApp").controller("bookingCtrl",function($scope,$window,$http,$document,$stateParams,smoothScroll,DataService,$q,$modal,$log,$location,localStorageService,$timeout){$scope.rooms=$stateParams,$scope.items=$stateParams,$scope.totalBooked=0,$scope.disableAddRoom=!0,$scope.hide=!1,$scope.message,smoothScroll.scrollTo("start"),$scope.tourSlab=[],$scope.showDate="",$scope.date=$scope.items.date.split("-"),$scope.showDate=$scope.date[2]+""+$scope.date[1]+$scope.date[0].substring(2);var current=null,currentDiscount=null,totalPax=null;$scope.currentRate={},$scope.currentRate.singleAdult=0,$scope.currentRate.twoAdult=0,$scope.currentRate.threeAdult=0,$scope.currentRate.child=0,$scope.currentRate.infant=0,$scope.currentRate.childWB=0,$scope.converionRate=0,$scope.flag=!0,$scope.tempInr={},$scope.tempForeign={},$scope.curr=null,$scope.showTourCode=null,$scope.tempList=[],$scope.amount={value:0},$scope.flat={},$scope.showDiscountSlabData=!1,$scope.updatedData={};var today=new Date;$scope.limit=today.setDate(today.getDate()-1),$scope.limit=today.setFullYear(today.getFullYear()-18);var tempCurrentDiscount=0;$timeout(function(){$location.path("/")},6e5),$scope.open2=function(){console.log($scope.items.code);var modalInstance2=$modal.open({backdrop:"static",animation:$scope.animationsEnabled,templateUrl:"app/booking/termsandcondition.html",controller:"termsCtrl",size:"md",resolve:{items:function(){return{data:$scope.items.code}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start"),console.log(items),console.log("Disagree"==items),"Disagree"==items&&$location.path(localStorageService.get("lastUrl")),$scope.agree=items},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.policy=function(){console.log("hre");var modalInstance3=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/booking/policy.html",controller:"policyCtrl",size:"md",resolve:{items:function(){return 0}}});modalInstance3.result.then(function(items){smoothScroll.scrollTo("start"),$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})};var url="rsData/getTourMasZeroDataWithTCD/"+$scope.items.code;DataService.getData(url).then(function(data){$scope.show=data;var numberPattern=/\d+/g,tmp=$scope.show.TOURNAME[0].TOUR_DAYS,tmdata={};if(tmdata.TOUR_DAYS=tmp.match(numberPattern),$scope.TOUR_NIGHTS=tmdata.TOUR_DAYS-1,$scope.TOUR_DAYS=$scope.TOUR_NIGHTS+1,data.TOURSLAB.length>0)for(var index=null,prev=null,i=0;i<data.TOURSLAB.length;i++)"INR"!=data.TOURSLAB[i].TC_CURCODE&&($scope.tempForeign=data.TOURSLAB[i],index=i,0===index&&(prev=1),1===index&&(prev=0),$scope.tempInr=data.TOURSLAB[prev],$scope.converionRate=data.CURTABLE[0].CN_SELL,$scope.currentRate.singleAdult=data.TOURSLAB[index].TC_SING*$scope.converionRate+data.TOURSLAB[prev].TC_SING,$scope.currentRate.singleAdult=$scope.currentRate.singleAdult.toFixed(),$scope.currentRate.twoAdult=parseInt(data.TOURSLAB[index].TC_AD)*$scope.converionRate+parseInt(data.TOURSLAB[prev].TC_AD),$scope.currentRate.twoAdult=$scope.currentRate.twoAdult.toFixed(),$scope.currentRate.threeAdult=parseInt(data.TOURSLAB[index].TC_AD3)*$scope.converionRate+parseInt(data.TOURSLAB[prev].TC_AD3),$scope.currentRate.threeAdult=$scope.currentRate.threeAdult.toFixed(),$scope.currentRate.child=parseInt(data.TOURSLAB[index].TC_CH1)*$scope.converionRate+parseInt(data.TOURSLAB[prev].TC_CH1),$scope.currentRate.child=$scope.currentRate.child.toFixed(),$scope.currentRate.infant=parseInt(data.TOURSLAB[index].TC_CH2)*$scope.converionRate+parseInt(data.TOURSLAB[prev].TC_CH2),$scope.currentRate.infant=$scope.currentRate.infant.toFixed(),$scope.currentRate.childWB=parseInt(data.TOURSLAB[index].TC_CH1WB)*$scope.converionRate+parseInt(data.TOURSLAB[prev].TC_CH1WB),$scope.currentRate.childWB=$scope.currentRate.childWB.toFixed(),$scope.flag=!1,$scope.rooms=[{title:"Room 1"}],$scope.count=$scope.rooms.length,"Honeymoon"!=data.TOURMAS0[0].TM_FINCATG&&"A2AHoneymoon"!=data.TOURMAS0[0].TM_FINCATG?$scope.list=[{title:"1 Adult",value:1,price:$scope.currentRate.singleAdult,base:$scope.currentRate.singleAdult},{title:"2 Adults",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult},{title:"2 Adults + 1 Child",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult,child1:[{title:"Infant (0-2)",price:$scope.currentRate.infant},{title:"Child With bed",price:$scope.currentRate.childWB},{title:"Child Without Bed",price:$scope.currentRate.child}]},{title:"2 Adults + 2 Child",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult,child1:[{title:"Infant (0-2)",price:$scope.currentRate.infant},{title:"Child With bed",price:$scope.currentRate.childWB},{title:"Child Without Bed",price:$scope.currentRate.child}],child2:[{title:"Infant (0-2)",price:$scope.currentRate.infant},{title:"Child With bed",price:$scope.currentRate.childWB},{title:"Child Without Bed",price:$scope.currentRate.child}]},{title:"3 Adults",value:3,price:3*$scope.currentRate.threeAdult,base:$scope.currentRate.threeAdult}]:$scope.list=[{title:"2 AdultS",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult}]);else data.TOURSLBD.length>0&&($scope.tempInr.TC_SING=$scope.currentRate.singleAdult=data.TOURSLBD[0].RM_SING_1+data.TOURMAS0[0].ADDBIL_2DY,$scope.tempInr.TC_AD=$scope.currentRate.twoAdult=data.TOURSLBD[0].RM_AD_1+data.TOURMAS0[0].ADDBIL_2DY,$scope.tempInr.TC_AD3=$scope.currentRate.threeAdult=data.TOURSLBD[0].RM_AD3_1+data.TOURMAS0[0].ADDBIL_2DY,$scope.tempInr.TC_CH1WB=$scope.currentRate.childWB=data.TOURSLBD[0].RM_CH1_1+data.TOURMAS0[0].ADDBIL_2DY,$scope.tempInr.TC_CH1=$scope.currentRate.child=data.TOURSLBD[0].RM_CH2_1+data.TOURMAS0[0].ADDBIL_2DY,$scope.tempInr.TC_CH2=$scope.currentRate.infant=data.TOURSLBD[0].RM_CH3_1,$scope.flag=!1,$scope.rooms=[{title:"Room 1",disable:!1}],$scope.count=$scope.rooms.length,"Honeymoon"!=data.TOURMAS0[0].TM_FINCATG&&"A2AHoneymoon"!=data.TOURMAS0[0].TM_FINCATG?$scope.list=[{title:"1 Adult",value:1,price:$scope.currentRate.singleAdult,base:$scope.currentRate.singleAdult},{title:"2 Adults",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult},{title:"2 Adults + 1 Child",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult,child1:[{title:"Infant (0-2)",price:$scope.currentRate.infant},{title:"Child With bed",price:$scope.currentRate.childWB},{title:"Child Without Bed",price:$scope.currentRate.child}]},{title:"2 Adults + 2 Child",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult,child1:[{title:"Infant (0-2)",price:$scope.currentRate.infant},{title:"Child With bed",price:$scope.currentRate.childWB},{title:"Child Without Bed",price:$scope.currentRate.child}],child2:[{title:"Infant (0-2)",price:$scope.currentRate.infant},{title:"Child With bed",price:$scope.currentRate.childWB},{title:"Child Without Bed",price:$scope.currentRate.child}]},{title:"3 Adults",value:3,price:3*$scope.currentRate.threeAdult,base:$scope.currentRate.threeAdult}]:$scope.list=[{title:"2 Adults",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult}]);data.DM06_DTL.forEach(function(disData){current=parseInt(data.TOURMAS0[0].TM_PAX),$scope.referTM_PAX=current,currentDiscount=0==parseInt(data.TOURMAS0[0].LAST_TNO)?1:parseInt(data.TOURMAS0[0].LAST_TNO),$scope.referLAST_TNO=currentDiscount,$scope.showCurrentDiscount=data.TOURMAS0[0].DISC_2DAY,console.log("As per LAST_TNO "+current),$scope.totalBooked=current,0===current&&(current=1),totalPax=parseInt(data.TOURMAS0[0].TM_PAXMKT),console.log(totalPax),void 0==totalPax&&console.log("Something went Wrong !!!!");for(var i=1;i<=8;i++)$scope.tourSlab.push({start:disData["SEAT_"+i+"1"],ends:disData["SEAT_"+i+"2"],amt:disData["AMTDISC_"+i]})})}).finally(function(){if(console.log($scope.rooms),totalPax-current<=4){var allowedLimit=totalPax-current;$scope.rooms[0].list=[],$scope.list.forEach(function(room){console.log("allowed limit"+allowedLimit);var value=parseInt(room.value);room.child1&&(value+=1),room.child2&&(value+=1),console.log("current "+value),value<=allowedLimit&&$scope.rooms[0].list.push(room)}),console.log("need to perform operationdifference is "+(totalPax-current)),$scope.disableAddRoom=!1}else $scope.rooms[0].list=$scope.list}),$scope.ok=function(){$modalInstance.close($scope.selected.item)},$scope.price=parseInt($scope.items.COST_2DAY),$scope.indexPos={},$scope.update=function(index,item){$scope.showMsg="",$scope.current=current,item.value&&($scope.rooms[index].Adult=item.value),$scope.rooms[index].sharing=item.title,$scope.rooms[index].disc={},$scope.rooms[index].AdultPrice={};var data=$scope.tourSlab;console.log($scope.tourSlab),console.log("As Per TNO Discount starts from"+currentDiscount),tempCurrentDiscount=currentDiscount;for(var k=1;k<=item.value;k++)if(data.length>0)for(var i=0;i<data.length;i++){var start=parseInt(data[i].start),ends=parseInt(data[i].ends),temp=tempCurrentDiscount;console.log("this is current seat"+temp+" As per LAST_TNO"+currentDiscount),start<=temp&&ends>=temp&&(1===k&&(console.log("current seat is Adult1 "+temp+" current room is  "+index+"current Discount is "+data[i].amt),$scope.rooms[index].disc.Adult1=data[i].amt,$scope.rooms[index].AdultPrice.Adult1={netcost:item.base-data[i].amt,price:item.base,discount:data[i].amt?data[i].amt:0,ExGuest:"No",SrCitizen:"No"},$scope.current++,tempCurrentDiscount++),2===k&&(console.log("current seat is Adult2 "+temp+" current room is  "+index+"current Discount is "+data[i].amt),$scope.rooms[index].disc.Adult2=data[i].amt,$scope.rooms[index].AdultPrice.Adult2={netcost:item.base-data[i].amt,price:item.base,discount:data[i].amt?data[i].amt:0,ExGuest:"No",SrCitizen:"No"},$scope.current++,tempCurrentDiscount++),3===k&&(console.log("current seat is Adult3 "+temp+" current room is  "+index+"current Discount is "+data[i].amt),$scope.rooms[index].disc.Adult3=data[i].amt,$scope.rooms[index].AdultPrice.Adult3={netcost:item.base-data[i].amt,price:item.base,discount:data[i].amt?data[i].amt:0,ExGuest:"No",SrCitizen:"No"},$scope.current++,tempCurrentDiscount++))}else 1===k&&($scope.rooms[index].disc.Adult1=0,$scope.rooms[index].AdultPrice.Adult1={netcost:item.base-0,price:item.base,discount:0,ExGuest:"No",SrCitizen:"No"},$scope.current++,tempCurrentDiscount++),2===k&&($scope.rooms[index].disc.Adult2=0,$scope.rooms[index].AdultPrice.Adult2={netcost:item.base-0,price:item.base,discount:0,ExGuest:"No",SrCitizen:"No"},$scope.current++,tempCurrentDiscount++),3===k&&($scope.rooms[index].disc.Adult3=0,$scope.rooms[index].AdultPrice.Adult3={netcost:item.base-0,price:item.base,discount:0,ExGuest:"No",SrCitizen:"No"},$scope.current++,tempCurrentDiscount++)},$scope.child1=function(index,item){for(var data=$scope.tourSlab,i=0;i<data.length;i++){var start=parseInt(data[i].start),ends=parseInt(data[i].ends),temp=currentDiscount+1;start<=temp&&ends>=temp&&($scope.rooms[index].child1.title.indexOf("Infant")>=0?($scope.rooms[index].disc.child1=.5*data[i].amt,$scope.rooms[index].child1.total=$scope.rooms[index].child1.price-$scope.rooms[index].disc.child1,$scope.rooms[index].child1.netcost=$scope.rooms[index].child1.price-$scope.rooms[index].disc.child1,$scope.rooms[index].child1.price=$scope.rooms[index].child1.price,$scope.rooms[index].child1.discount=$scope.rooms[index].disc.child1):($scope.rooms[index].disc.child1=.75*data[i].amt,$scope.rooms[index].child1.total=$scope.rooms[index].child1.price-$scope.rooms[index].disc.child1,$scope.rooms[index].child1.netcost=$scope.rooms[index].child1.price-$scope.rooms[index].disc.child1,$scope.rooms[index].child1.price=$scope.rooms[index].child1.price,$scope.rooms[index].child1.discount=$scope.rooms[index].disc.child1),$scope.current++,tempCurrentDiscount++)}},$scope.child2=function(index,item){for(var data=$scope.tourSlab,i=0;i<data.length;i++){var start=parseInt(data[i].start),ends=parseInt(data[i].ends),temp=currentDiscount+1;start<=temp&&ends>=temp&&($scope.rooms[index].child2.title.indexOf("Infant")>=0?($scope.rooms[index].disc.child2=.5*data[i].amt,$scope.rooms[index].child2.total=$scope.rooms[index].child2.price-$scope.rooms[index].disc.child2,$scope.rooms[index].child2.netcost=$scope.rooms[index].child2.price-$scope.rooms[index].disc.child2,$scope.rooms[index].child2.price=$scope.rooms[index].child2.price,$scope.rooms[index].child2.discount=$scope.rooms[index].disc.child2):($scope.rooms[index].disc.child2=.75*data[i].amt,$scope.rooms[index].child2.total=$scope.rooms[index].child2.price-$scope.rooms[index].disc.child2,$scope.rooms[index].child2.netcost=$scope.rooms[index].child2.price-$scope.rooms[index].disc.child2,$scope.rooms[index].child2.price=$scope.rooms[index].child2.price,$scope.rooms[index].child2.discount=$scope.rooms[index].disc.child2),$scope.current++,tempCurrentDiscount++)}},$scope.AddRoomFn=function(index){var value=0;if($scope.rooms.push({title:"Room "+index,disable:!1,list:[]}),$scope.rooms[index-2].disable=!0,$scope.rooms[index-2].done=!0,current=$scope.current,$scope.rooms[$scope.rooms.length-1].Adult&&(value=$scope.rooms[$scope.rooms.length-1].Adult),$scope.rooms[$scope.rooms.length-1].child1&&value++,$scope.rooms[$scope.rooms.length-1].child2&&value++,console.log("Current "+$scope.current),currentDiscount+=value,$scope.current=$scope.current+value,current=$scope.current,console.log("Person in current Room are"+value),console.log(totalPax+"~~~~~~~~~~~"+$scope.current),totalPax-$scope.current<=4){$scope.tempList=[];var allowedLimit=totalPax-$scope.current;$scope.list.forEach(function(room){var value=parseInt(room.value);room.child1&&(value+=1),room.child2&&(value+=1),value<=allowedLimit&&$scope.rooms[index-1].list.push(room)}),$scope.disableAddRoom=!1}else $scope.rooms[index-1].list=$scope.list},$scope.add=function(){var index=$scope.rooms.length+1;index<3&&("1 Adult"==$scope.rooms[$scope.rooms.length-1].sharing?$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult1?$scope.AddRoomFn(index):$scope.showMsg="Please fill Room Details":"2 Adults"==$scope.rooms[$scope.rooms.length-1].sharing?$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult1&&$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult2?$scope.AddRoomFn(index):$scope.showMsg="Please fill Room Details":"3 Adults"==$scope.rooms[$scope.rooms.length-1].sharing?$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult1&&$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult2&&$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult3?$scope.AddRoomFn(index):$scope.showMsg="Please fill Room Details":"2 Adults + 1 Child"==$scope.rooms[$scope.rooms.length-1].sharing?$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult1&&$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult2&&$scope.rooms[$scope.rooms.length-1].child1?$scope.AddRoomFn(index):$scope.showMsg="Please fill Room Details":"2 Adults + 2 Child"==$scope.rooms[$scope.rooms.length-1].sharing?$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult1&&$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult2&&$scope.rooms[$scope.rooms.length-1].child1&&$scope.rooms[$scope.rooms.length-1].child2?$scope.AddRoomFn(index):$scope.showMsg="Please fill Room Details":($scope.current==totalPax&&($scope.disableAddRoom=!0),void 0==$scope.rooms[$scope.rooms.length-1].AdultPrice&&($scope.showMsg="Please fill Room Details")))},$scope.remove=function(){var index=$scope.rooms.length,value=null;index>1&&($scope.rooms[$scope.rooms.length-1].Adult&&(value=$scope.rooms[$scope.rooms.length-1].Adult),$scope.rooms[$scope.rooms.length-1].child1&&value++,$scope.rooms[$scope.rooms.length-1].child2&&value++,$scope.rooms.splice($scope.rooms.length-1,1),1==$scope.rooms[$scope.rooms.length-1].done?(currentDiscount-=value,current-=value,$scope.current=$scope.current-value):$scope.current=$scope.current-value,$scope.rooms[$scope.rooms.length-1].disable=!1,$scope.disableAddRoom=!0)},$scope.mytime=new Date,$scope.status={isFirstOpen:!0,isFirstDisabled:!1,isSecondOpen:!1,isSecondDisabled:!0,isThirdOpen:!1,isThirdDisabled:!0},$scope.calculate=function(){$scope.open2(),$scope.status.isSecondOpen=!0,$scope.status.isSecondDisabled=!1,$scope.grandTotal=0,$scope.price=0,$scope.discount=0,$scope.tax=0,$scope.rooms.forEach(function(per){per.persons=[],per.AdultPrice.Adult1&&(per.persons.push({title:"Adult1"}),$scope.grandTotal=parseInt($scope.grandTotal)+parseInt(per.AdultPrice.Adult1.netcost),$scope.price=parseInt($scope.price)+parseInt(per.AdultPrice.Adult1.price),$scope.discount=parseInt($scope.discount)+parseInt(per.AdultPrice.Adult1.discount)),per.AdultPrice.Adult2&&(per.persons.push({title:"Adult2"}),$scope.grandTotal=parseInt($scope.grandTotal)+parseInt(per.AdultPrice.Adult2.netcost),$scope.price=parseInt($scope.price)+parseInt(per.AdultPrice.Adult2.price),$scope.discount=parseInt($scope.discount)+parseInt(per.AdultPrice.Adult2.discount)),per.AdultPrice.Adult3&&(per.persons.push({title:"Adult3"}),$scope.grandTotal=parseInt($scope.grandTotal)+parseInt(per.AdultPrice.Adult3.netcost),$scope.price=parseInt($scope.price)+parseInt(per.AdultPrice.Adult3.price),$scope.discount=parseInt($scope.discount)+parseInt(per.AdultPrice.Adult3.discount)),per.child1&&($scope.grandTotal=parseInt($scope.grandTotal)+parseInt(per.child1.netcost),$scope.price=parseInt($scope.price)+parseInt(per.child1.price),$scope.discount=parseInt($scope.discount)+parseInt(per.child1.discount)),per.child2&&($scope.grandTotal=parseInt($scope.grandTotal)+parseInt(per.child2.netcost),$scope.price=parseInt($scope.price)+parseInt(per.child2.price),$scope.discount=parseInt($scope.discount)+parseInt(per.child2.discount))}),$scope.tax=(4.35*parseInt($scope.grandTotal)/100).toFixed(),$scope.grandTotal=parseInt($scope.grandTotal)+parseInt($scope.tax)},$scope.change=function(loc){1==loc&&("1 Adult"==$scope.rooms[$scope.rooms.length-1].sharing?$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult1?$scope.calculate():$scope.showMsg="Please fill Room Details":"2 Adults"==$scope.rooms[$scope.rooms.length-1].sharing?$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult1&&$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult2?$scope.calculate():$scope.showMsg="Please fill Room Details":"3 Adults"==$scope.rooms[$scope.rooms.length-1].sharing?$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult1&&$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult2&&$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult3?$scope.calculate():$scope.showMsg="Please fill Room Details":"2 Adults + 1 Child"==$scope.rooms[$scope.rooms.length-1].sharing?$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult1&&$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult2&&$scope.rooms[$scope.rooms.length-1].child1?$scope.calculate():$scope.showMsg="Please fill Room Details":"2 Adults + 2 Child"==$scope.rooms[$scope.rooms.length-1].sharing?$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult1&&$scope.rooms[$scope.rooms.length-1].AdultPrice.Adult2&&$scope.rooms[$scope.rooms.length-1].child1&&$scope.rooms[$scope.rooms.length-1].child2?$scope.calculate():$scope.showMsg="Please fill Room Details":void 0==$scope.rooms[$scope.rooms.length-1].AdultPrice&&($scope.showMsg="Please fill Room Details")),2==loc&&($scope.status.isThirdOpen=!0,$scope.status.isThirdDisabled=!1)},$scope.dateOptions={formatYear:"yyyy",startingDay:1,minMode:"year"},$scope.minDate=new Date,$scope.maxDate=new Date(2020,5,22),$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0],$scope.hstep=1,$scope.mstep=15,$scope.options={hstep:[1,2,3],mstep:[1,5,10,15,25,30]},$scope.ismeridian=!0,$scope.showAlert=!1,$scope.showButton=!1,$scope.showError=!1,$scope.url="",$scope.saved=!0,$scope.pg=function(){$scope.saved&&$scope.save(),""!=$scope.url&&($window.location.href=$scope.url)},$scope.paymentButton=function(form){console.log(form),$scope.$broadcast("$validate"),form.$valid?(alert("Discount Reduces as Seats get filled up. \n pay Now and get Maximum Discount"),$scope.showButton=!0):(console.log("This is else part"),console.log($scope.amount),$scope.amount.value=0,alert("Please Enter Primary Guest Details"))};var done=function(submitRooms,amt,totalPerson){$scope.hide=!0,$scope.message="Please Wait Checking for discount slab is Available or Not ";var postData={room:submitRooms,totalPax:totalPerson,grandTotal:$scope.grandTotal,pending_amount:$scope.grandTotal,tourcode:$scope.show.TOURMAS0[0].TM_TCD,departure:$scope.show.TOURMAS0[0].TM_DT1,arrival:$scope.show.TOURMAS0[0].TM_DT2,bookingDate:new Date,referLAST_TNO:$scope.referLAST_TNO,referTM_PAX:$scope.referTM_PAX,bookingID:(new Date).getTime()+""+Math.floor(1e5+9e5*Math.random()).toString().substring(0,4)};console.log($scope.amount);var paymentValue;1==parseInt($scope.amount.value)?paymentValue=5:2==parseInt($scope.amount.value)?paymentValue=10:3==parseInt($scope.amount.value)&&(paymentValue=15);var paymentObj=[{amount:paymentValue,merchant_id:(new Date).getTime()+""+Math.floor(1e5+9e5*Math.random()).toString().substring(0,4),status:"pending"}];$http.get("/api/users/me").then(function(result){console.log(result),$http.post("//login.kesari.in/route/websitebooking",{data:postData,payment:paymentObj,flatObj:$scope.flat,user:{name:result.data.name,email:result.data.email,mobile:result.data.mobile,registrationId:result.data.registrationId}}).then(function(res){$scope.url="//erp.kesari.in/icici_kesari2015/tp/?last_id="+res.data._id,$window.location.href=$scope.url})})};$scope.pg=function(amt){var deferred=$q.defer(),totalPerson=0;console.log("inside pg"+current),console.log(totalPax+"totalPax"+(current-totalPax));var submitRooms=$scope.rooms,cursor=0;return console.log(submitRooms),submitRooms.forEach(function(rooms){var index=cursor+1;rooms.AdultPrice.Adult1&&($scope.flat["RM_"+index+"PAXTYPE_1"]="Adult",$scope.flat["RM_"+index+"PAXBILL_1"]=rooms.AdultPrice.Adult1.price,$scope.flat["RM_"+index+"PAXDISC_1"]=rooms.AdultPrice.Adult1.discount),rooms.AdultPrice.Adult2&&($scope.flat["RM_"+index+"PAXTYPE_2"]="Adult",$scope.flat["RM_"+index+"PAXBILL_2"]=rooms.AdultPrice.Adult1.price,$scope.flat["RM_"+index+"PAXDISC_2"]=rooms.AdultPrice.Adult1.discount),rooms.AdultPrice.Adult3&&($scope.flat["RM_"+index+"PAXTYPE_3"]="Adult",$scope.flat["RM_"+index+"PAXBILL_3"]=rooms.AdultPrice.Adult1.price,$scope.flat["RM_"+index+"PAXDISC_3"]=rooms.AdultPrice.Adult1.discount),rooms.child1&&("Child With bed"==rooms.child1.title&&($scope.flat["RM_"+index+"PAXTYPE_3"]="CWB"),"Child Without Bed"==rooms.child1.title&&($scope.flat["RM_"+index+"PAXTYPE_3"]="CWOB"),$scope.flat["RM_"+index+"PAXBILL_3"]=rooms.child1.price,$scope.flat["RM_"+index+"PAXDISC_3"]=rooms.child1.discount),rooms.child2&&("Child With bed"==rooms.child2.title&&($scope.flat["RM_"+index+"PAXTYPE_4"]="CWB"),"Child Without Bed"==rooms.child2.title&&($scope.flat["RM_"+index+"PAXTYPE_4"]="CWOB"),$scope.flat["RM_"+index+"PAXBILL_4"]=rooms.child2.price,$scope.flat["RM_"+index+"PAXDISC_4"]=rooms.child2.discount),rooms.list&&delete rooms.list,rooms.Adult&&(totalPerson+=parseInt(rooms.Adult)),rooms.child1&&(totalPerson+=1),rooms.child2&&(totalPerson+=1),cursor++,console.log(submitRooms.length),cursor==submitRooms.length&&done(submitRooms,amt,totalPerson)}),deferred.promise}}).controller("thankyouCtrl",function($scope,$http,$stateParams,Auth){var bookingID=$stateParams.id,merchantID=$stateParams.merchantID;$scope.paymentStatus,$scope.valid=!1,$scope.trans_code,$http.get("//login.kesari.in/route/websitebooking/"+bookingID).success(function(bookedData){$scope.bookedData=bookedData;for(var payment=bookedData.payment,i=0;i<payment.length;i++)payment[i].merchant_id==merchantID?($scope.valid=!0,$scope.paymentStatus=payment[i].tran_status,$scope.trans_code=payment[i].tran_code):i==payment.length-1&&(Auth.logout(),location.go("/"))})}).controller("paymentCtrl",function($scope,$window,$sce,$http,$location,$stateParams){$window.scrollTo(0,0),$http({method:"POST",url:"//sigma.kesari.in/icici_kesari2015/TestSsl.php",data:"last_id=11&amt=1520",headers:{"Content-Type":"application/x-www-form-urlencoded"}})}).controller("termsCtrl",function($state,$scope,$http,$modalInstance,items){$scope.tourCode=items.data,$scope.sendMail=!1,$scope.showLoader=!1,$scope.sent=!1,$scope.save=function(){$modalInstance.close($scope.agreeToTerms)},$scope.update=function(email){$scope.email=email},$scope.send=function(form){1==$scope.sendMail&&form.$valid?(console.log($scope.email),$scope.showLoader=!0,$scope.message="sending mail.....",$http.get("//login.kesari.in/route/rsData/sendTcPdfViaMail/"+$scope.email).success(function(data){console.log("mail sent"),$scope.sent=!0,$scope.message="Mail Sent"}).error(function(status){$scope.message=status,$scope.sent=!0})):(console.log("hre"),$scope.sendMail=!0)}}).controller("policyCtrl",function($scope,$modalInstance){$scope.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("websiteApp").controller("corporateEnquiryCtrl",function($scope){}),angular.module("websiteApp").controller("ModalInstanceCtrl",function($state,$scope,$http,$modalInstance,items,DataService){$scope.tourSlab=[],$scope.showDate="",$scope.items=items,$scope.date=$scope.items.date.split("-"),$scope.showDate=$scope.date[2]+""+$scope.date[1]+$scope.date[0].substring(2);
$scope.currentRate={},$scope.currentRate.singleAdult=0,$scope.currentRate.twoAdult=0,$scope.currentRate.threeAdult=0,$scope.currentRate.child=0,$scope.currentRate.infant=0,$scope.currentRate.childWB=0,$scope.converionRate=0,$scope.flag=!0,$scope.tempInr={},$scope.tempForeign={},$scope.curr=null,$scope.showTourCode=null;var url="rsData/getTourMasZeroDataWithTCD/"+$scope.items.code+$scope.showDate;DataService.getData(url).then(function(data){if($scope.show=data,data.TOURSLAB.length>0)for(var index=null,prev=null,i=0;i<data.TOURSLAB.length;i++)"INR"!=data.TOURSLAB[i].TC_CURCODE&&($scope.tempForeign=data.TOURSLAB[i],index=i,0===index&&(prev=1),1===index&&(prev=0),$scope.tempInr=data.TOURSLAB[prev],$scope.converionRate=data.CURTABLE[0].CN_SELL,$scope.currentRate.singleAdult=data.TOURSLAB[index].TC_SING*$scope.converionRate+data.TOURSLAB[prev].TC_SING,$scope.currentRate.twoAdult=parseInt(data.TOURSLAB[index].TC_AD)*$scope.converionRate+parseInt(data.TOURSLAB[prev].TC_AD),$scope.currentRate.threeAdult=parseInt(data.TOURSLAB[index].TC_AD3)*$scope.converionRate+parseInt(data.TOURSLAB[prev].TC_AD3),$scope.currentRate.child=parseInt(data.TOURSLAB[index].TC_CH1)*$scope.converionRate+parseInt(data.TOURSLAB[prev].TC_CH1),$scope.currentRate.infant=parseInt(data.TOURSLAB[index].TC_CH2)*$scope.converionRate+parseInt(data.TOURSLAB[prev].TC_CH2),$scope.currentRate.childWB=parseInt(data.TOURSLAB[index].TC_CH1WB)*$scope.converionRate+parseInt(data.TOURSLAB[prev].TC_CH1WB),$scope.flag=!1,$scope.rooms=[{title:"Room 1"}],$scope.count=$scope.rooms.length,"Honeymoon"!=data.TOURMAS0[0].TM_FINCATG&&"A2AHoneymoon"!=data.TOURMAS0[0].TM_FINCATG?$scope.list=[{title:"1 Adult",value:1,price:$scope.currentRate.singleAdult,base:$scope.currentRate.singleAdult},{title:"2 AdultS",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult},{title:"2 Adults + 1 Child",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult,child1:[{title:"Infant (0-2)",price:$scope.currentRate.infant},{title:"Child With bed",price:$scope.currentRate.childWB},{title:"Child Without Bed",price:$scope.currentRate.child}]},{title:"2 Adults + 2 Child",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult,child1:[{title:"Infant (0-2)",price:$scope.currentRate.infant},{title:"Child With bed",price:$scope.currentRate.childWB},{title:"Child Without Bed",price:$scope.currentRate.child}],child2:[{title:"Infant (0-2)",price:$scope.currentRate.infant},{title:"Child With bed",price:$scope.currentRate.childWB},{title:"Child Without Bed",price:$scope.currentRate.child}]},{title:"3 Adults",value:3,price:3*$scope.currentRate.threeAdult,base:$scope.currentRate.threeAdult}]:$scope.list=[{title:"2 AdultS",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult}]);else data.TOURSLBD&&($scope.tempInr.TC_SING=$scope.currentRate.singleAdult=data.TOURSLBD[0].RM_SING_1,$scope.tempInr.TC_AD=$scope.currentRate.twoAdult=data.TOURSLBD[0].RM_AD_1,$scope.tempInr.TC_AD3=$scope.currentRate.threeAdult=data.TOURSLBD[0].RM_AD3_1,$scope.tempInr.TC_CH1WB=$scope.currentRate.childWB=data.TOURSLBD[0].RM_CH1_1,$scope.tempInr.TC_CH1=$scope.currentRate.child=data.TOURSLBD[0].RM_CH2_1,$scope.tempInr.TC_CH2=$scope.currentRate.infant=data.TOURSLBD[0].RM_CH3_1,$scope.flag=!1,$scope.rooms=[{title:"Room 1",disable:!1}],$scope.count=$scope.rooms.length,"Honeymoon"!=data.TOURMAS0[0].TM_FINCATG&&"A2AHoneymoon"!=data.TOURMAS0[0].TM_FINCATG?$scope.list=[{title:"1 Adult",value:1,price:$scope.currentRate.singleAdult,base:$scope.currentRate.singleAdult},{title:"2 AdultS",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult},{title:"2 Adults + 1 Child",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult,child1:[{title:"Infant (0-2)",price:$scope.currentRate.infant},{title:"Child With bed",price:$scope.currentRate.childWB},{title:"Child Without Bed",price:$scope.currentRate.child}]},{title:"2 Adults + 2 Child",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult,child1:[{title:"Infant (0-2)",price:$scope.currentRate.infant},{title:"Child With bed",price:$scope.currentRate.childWB},{title:"Child Without Bed",price:$scope.currentRate.child}],child2:[{title:"Infant (0-2)",price:$scope.currentRate.infant},{title:"Child With bed",price:$scope.currentRate.childWB},{title:"Child Without Bed",price:$scope.currentRate.child}]},{title:"3 Adults",value:3,price:3*$scope.currentRate.threeAdult,base:$scope.currentRate.threeAdult}]:$scope.list=[{title:"2 Adults",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult}]);data.DM06_DTL.forEach(function(disData){for(var i=1;i<=8;i++)$scope.tourSlab.push({start:disData["SEAT_"+i+"1"],ends:disData["SEAT_"+i+"2"],amt:disData["AMTDISC_"+i]})})}),$scope.ok=function(){$modalInstance.close($scope.selected.item)},$scope.price=parseInt($scope.items.COST_2DAY),$scope.indexPos={},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}).controller("fitCntCtrl",function($scope,$state,$window,$location,DataService,$stateParams,$modal,$http,smoothScroll){$window.scrollTo(0,0),$scope.loading=!0,$scope.awesomeThings=[],$scope.conti=$stateParams.continents,$scope.contin=$scope.conti.toUpperCase(),$scope.tourCntry,$scope.filterStart=!1,$scope.selectedTour="",$scope.result=[];var numberPattern=/\d+/g;$scope.priceFilter={lower_price_bound:0,upper_price_bound:0,top:0,min:0},$scope.Duration={lower_day_bound:0,upper_day_bound:0,top:0,min:0},DataService.getData("rsData/getFITPackagev2/"+$scope.contin+"/0").then(function(awesomeThings){$scope.loading=!1,$scope.tourCntry=awesomeThings,$scope.total=awesomeThings.length,$scope.tourCntry.forEach(function(fzone){fzone.pass=fzone.package_name,fzone.tempPrice=fzone.pkg_cost.match(numberPattern),0==$scope.Duration.lower_day_bound?$scope.Duration.lower_day_bound=parseInt(fzone.days):fzone.days<$scope.Duration.lower_day_bound&&($scope.Duration.lower_day_bound=parseInt(fzone.days)),0==$scope.Duration.upper_day_bound?$scope.Duration.upper_day_bound=parseInt(fzone.days):fzone.days>$scope.Duration.upper_day_bound&&($scope.Duration.upper_day_bound=parseInt(fzone.days)),0==$scope.priceFilter.lower_price_bound?$scope.priceFilter.min=$scope.priceFilter.lower_price_bound=parseInt(fzone.tempPrice):$scope.priceFilter.lower_price_bound>fzone.tempPrice&&($scope.priceFilter.min=$scope.priceFilter.lower_price_bound=parseInt(fzone.tempPrice)),0==$scope.priceFilter.upper_price_bound?$scope.priceFilter.top=$scope.priceFilter.upper_price_bound=parseInt(fzone.tempPrice):$scope.priceFilter.upper_price_bound<fzone.tempPrice&&($scope.priceFilter.top=$scope.priceFilter.upper_price_bound=parseInt(fzone.tempPrice))})}).finally(function(){$scope.total=$scope.tourCntry.length,$scope.priceFilter.min=$scope.priceFilter.lower_price_bound,$scope.priceFilter.top=$scope.priceFilter.upper_price_bound,$scope.Duration.min=$scope.Duration.lower_day_bound,$scope.Duration.top=$scope.Duration.upper_day_bound}),$scope.reset=function(){$scope.filterStart=!1,$scope.result=[],$scope.selectedTour="",$scope.priceFilter.min=$scope.priceFilter.lower_price_bound,$scope.priceFilter.top=$scope.priceFilter.upper_price_bound,$scope.Duration.min=$scope.Duration.lower_day_bound,$scope.Duration.top=$scope.Duration.upper_day_bound},$scope.onSliderChange=function(){""==$scope.selectedTour?($scope.result=[],$scope.filterStart=!0,$scope.tourCntry.forEach(function(tour){void 0!=tour.tempPrice&&tour.tempPrice<=$scope.priceFilter.top&&tour.tempPrice>=$scope.priceFilter.min&&($scope.result.push(tour),$scope.total=$scope.result.length,$scope.result.sortOn("tempPrice"))})):$scope.filterStart=!1},$scope.translate=function(value){return value.toLocaleString()},$scope.translateday=function(value){return value.toLocaleString()+"days"},Array.prototype.sortOn=function(key){this.sort(function(a,b){return a[key]<b[key]?-1:a[key]>b[key]?1:0})},$scope.onDurationSliderChange=function(){$scope.result=[],$scope.filterStart=!0,$scope.tourCntry.forEach(function(tour){void 0!=tour.tempPrice&&tour.days<=$scope.Duration.top&&tour.days>=$scope.Duration.min&&($scope.result.push(tour),$scope.total=$scope.result.length,$scope.result.sortOn("days"))})},$scope.open3=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/fit/fitInquiry.html",controller:"fitInquiryCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start")},function(){})}}).controller("fitCtrl",function($scope,$http,$state,$window,DataService,$stateParams,$modal,smoothScroll,$location){$window.scrollTo(0,0),$scope.loading=!0,$scope.awesomeThings=[],$scope.tour=$stateParams,$scope.filterStart=!1,$scope.selectedTour="",$scope.result=[],$scope.fitData=[],$scope.fitZone=[],$scope.selection={fitCntry:{}},$scope.show=!1;var numberPattern=/\d+/g;$scope.priceFilter={lower_price_bound:0,upper_price_bound:0,top:0,min:0},$scope.Duration={lower_day_bound:0,upper_day_bound:0,top:0,min:0},$scope.startsWith=function(state,viewValue){return state.substr(0,viewValue.length).toLowerCase()==viewValue.toLowerCase()},$scope.search=function(){$scope.filterStart=!0,$scope.selectedTour.package_name?($scope.selectedTour=$scope.selectedTour.package_name,$scope.tZone.forEach(function(zone){zone.package_name.indexOf($scope.selectedTour)>-1&&$scope.result.push(zone)})):""==$scope.selectedTour&&($scope.filterStart=!1)},DataService.getData("rsData/getFITzonesv2/").then(function(awesomeThings){$scope.fitZone=awesomeThings}),$scope.loadPackage=function(){},$scope.tour.continents&&DataService.getData("rsData/getFITPackagev2/"+$scope.tour.continents.split("-").join(" ")+"/"+$scope.tour.country.split("-").join(" ")).then(function(awesomeThings){0==awesomeThings.length?("/Tailor-Made/ASIA/ANDAMAN"==$location.url()&&$state.go("fit",{continents:"INDIA",country:$scope.tour.country.split(" ").join("-")}),"/Tailor-Made/AUSTRALIA"==$location.url()&&$state.go("fit",{continents:"PACIFIC",country:"AUSTRALIA"}),"/Tailor-Made/AUSTRALIA/AUSTRALIA"==$location.url()&&$state.go("fit",{continents:"PACIFIC",country:$scope.tour.country.split(" ").join("-")}),"/Tailor-Made/SOUTH-AMERICA/SOUTH-AMERICA"==$location.url()&&$state.go("fit",{continents:"AMERICAS",country:$scope.tour.country.split(" ").join("-")}),"/Tailor-Made/NORTH-AMERICA/CANADA"==$location.url()&&$state.go("fit",{continents:"AMERICAS",country:$scope.tour.country.split(" ").join("-")}),"/Tailor-Made/SOUTH-AMERICA/SOUTH-AMERICA"==$location.url()&&$state.go("fit",{continents:"AMERICAS",country:$scope.tour.country.split(" ").join("-")}),"/Tailor-Made/AUSTRALIA/NEW-ZEALAND"==$location.url()&&$state.go("fit",{continents:"PACIFIC",country:$scope.tour.country.split(" ").join("-")}),"/Tailor-Made/ASIA/SOUTH%20KOREA"==$location.url()&&$state.go("fit",{continents:"ASIA",country:"KOREA"}),"/Tailor-Made/NORTH-AMERICA/NORTH-AMERICA"==$location.url()&&$state.go("fit",{continents:"AMERICAS",country:$scope.tour.country.split(" ").join("-")}),"/Tailor-Made/ASIA/UNITED%20ARAB%20EMIRATES"==$location.url()&&$state.go("fit",{continents:"MIDDLE-EAST",country:"UAE"}),"/Tailor-Made/SOUTH%20AMERICA/SOUTH%20AMERICA"==$location.url()&&$state.go("fit",{continents:"AMERICAS",country:$scope.tour.country.split(" ").join("-")}),"/Tailor-Made/ASIA/UNITED-ARAB-EMIRATES"==$location.url()&&$state.go("fit",{continents:"MIDDLE-EAST",country:"UAE"}),"/Tailor-Made/ASIA/HONGKONG"==$location.url()&&$state.go("fit",{continents:"ASIA",country:"HONG-KONG"}),"/Tailor-Made/INDIA/INDIA"==$location.url()&&$state.go("fit-country",{continents:"INDIA"}),"/Tailor-Made/ASIA/INDIA"==$location.url()&&$state.go("fit-country",{continents:"INDIA"}),"/Tailor-Made/EUROPE/SWITZERLAND-+-FRANCE"==$location.url()&&$state.go("fit-country",{continents:"EUROPE"}),"/Tailor-Made/EUROPE/SWITZERLAND-&-FRANCE"==$location.url()&&$state.go("fit-country",{continents:"EUROPE"}),"/Tailor-Made/EUROPE/SWISS-+-AUSTRIA-+-ITALY"==$location.url()&&$state.go("fit-country",{continents:"EUROPE"}),"/Tailor-Made/EUROPE/EUROPE"==$location.url()&&$state.go("fit-country",{continents:"EUROPE"}),"/Tailor-Made/EUROPE/SCOTLAND-&-ENGLAND"==$location.url()&&$state.go("fit-country",{continents:"EUROPE"}),"/Tailor-Made/EUROPE/SCOTLAND-+-ENGLAND"==$location.url()&&$state.go("fit-country",{continents:"EUROPE"}),"/Tailor-Made/EUROPE/SPAIN-&-FRANCE"==$location.url()&&$state.go("fit-country",{continents:"EUROPE"}),"/Tailor-Made/INDIA/KARNATAKA"==$location.url()&&$state.go("fit-country",{continents:"INDIA"}),"/Tailor-Made/AFRICA/KENYA-&-TANZANIA"==$location.url()&&$state.go("fit-country",{continents:"AFRICA"}),"/Tailor-Made/EUROPE/SWITZERLAND-+-AUSTRIA-+-ITALY"==$location.url()&&$state.go("fit-country",{continents:"EUROPE"}),"/Tailor-Made/INDIA/JHARKHAND"==$location.url()&&$state.go("fit-country",{continents:"INDIA"})):0==awesomeThings.length&&($scope.message="Tour Packages are coming soon !!!"),$scope.loading=!1,$scope.searched=awesomeThings.length,awesomeThings=JSON.stringify(awesomeThings),awesomeThings=JSON.parse(awesomeThings),$scope.tZone=awesomeThings,$scope.FITcounted=$scope.tZone.length,$scope.tZone.forEach(function(zone){zone.pass=zone.package_name,zone.tempPrice=zone.pkg_cost.match(numberPattern),0==$scope.Duration.lower_day_bound?$scope.Duration.lower_day_bound=parseInt(zone.days):zone.days<$scope.Duration.lower_day_bound&&($scope.Duration.lower_day_bound=parseInt(zone.days)),0==$scope.Duration.upper_day_bound?$scope.Duration.upper_day_bound=parseInt(zone.days):zone.days>$scope.Duration.upper_day_bound&&($scope.Duration.upper_day_bound=parseInt(zone.days)),0==$scope.priceFilter.lower_price_bound?$scope.priceFilter.lower_price_bound=parseInt(zone.tempPrice):$scope.priceFilter.lower_price_bound>zone.tempPrice&&($scope.priceFilter.lower_price_bound=parseInt(zone.tempPrice)),0==$scope.priceFilter.upper_price_bound?$scope.priceFilter.upper_price_bound=parseInt(zone.tempPrice):$scope.priceFilter.upper_price_bound<zone.tempPrice&&($scope.priceFilter.upper_price_bound=parseInt(zone.tempPrice))})}).finally(function(){$scope.total=$scope.tZone.length,0==$scope.total&&($scope.message="Tour Packages are coming soon !!!"),$scope.priceFilter.min=$scope.priceFilter.lower_price_bound,$scope.priceFilter.top=$scope.priceFilter.upper_price_bound,$scope.Duration.min=$scope.Duration.lower_day_bound,$scope.Duration.top=$scope.Duration.upper_day_bound}),$scope.reset=function(){$scope.filterStart=!1,$scope.result=[],$scope.selectedTour="",$scope.priceFilter.min=$scope.priceFilter.lower_price_bound,$scope.priceFilter.top=$scope.priceFilter.upper_price_bound,$scope.Duration.min=$scope.Duration.lower_day_bound,$scope.Duration.top=$scope.Duration.upper_day_bound},$scope.onSliderChange=function(){""==$scope.selectedTour?($scope.result=[],$scope.filterStart=!0,$scope.tZone.forEach(function(tour){void 0!=tour.tempPrice&&tour.tempPrice<=$scope.priceFilter.top&&tour.tempPrice>=$scope.priceFilter.min&&($scope.result.push(tour),$scope.total=$scope.result.length,$scope.result.sortOn("tempPrice"))})):$scope.filterStart=!1},$scope.translate=function(value){return value.toLocaleString()},$scope.translateday=function(value){return value.toLocaleString()+"days"},Array.prototype.sortOn=function(key){this.sort(function(a,b){return a[key]<b[key]?-1:a[key]>b[key]?1:0})},$scope.onDurationSliderChange=function(){$scope.result=[],$scope.filterStart=!0,$scope.tZone.forEach(function(tour){void 0!=tour.tempPrice&&tour.days<=$scope.Duration.top&&tour.days>=$scope.Duration.min&&($scope.result.push(tour),$scope.total=$scope.result.length,$scope.result.sortOn("days"))})},$scope.open2=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/fit/fitInquiry.html",controller:"fitInquiryCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){$scope.show=items,smoothScroll.scrollTo("start")},function(){})}}).controller("fitInquiryCtrl",function($scope,$http,$location,$stateParams,$q,$modal,items,$state,$modalInstance,$uibModalInstance,smoothScroll){smoothScroll.scrollTo("start"),$scope.errors={};var source=$location.search();source.url=$location.path(),$scope.items=items,$scope.disableButton=!1,$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.minDate=new Date,$scope.maxDate=new Date(2020,5,22),$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0],$scope.example={value:new Date,anniversary:new Date},$scope.open=function(){$scope.opened=!0},$scope.cancel=function(){$uibModalInstance.dismiss("cancel")},$scope.save=function(form){$scope.items.flag=!0,form.$valid&&($scope.disableButton=!0,$scope.Inquiry.basedUpon||($scope.Inquiry.basedUpon=$scope.items.data),$scope.Inquiry.url="https://www.kesari.in"+source.url,$scope.Inquiry.utmsearch=source,$http.post("https://login.kesari.in/route/fitenquiry/",$scope.Inquiry).success(function(data,status){data&&$uibModalInstance.close(!0),$modalInstance.close($scope.items.flag),$location.path().indexOf("BHUTAN")>-1||$location.path().indexOf("FIJI")>-1||$location.path().indexOf("USA")>-1||$location.path().indexOf("EUROPE")>-1||$location.path().indexOf("NORTH EAST")>-1?source.utm_source&&$http.post("https://api.kesari.in/route/utmdashboard/",source).success(function(data1,status){data1&&$location.path("thankyouFIT/"+data.message)}):$location.path("thankyouFIT/"+data.message)}).error(function(data,status){$http.post("https://api.kesari.in/route/fitenquiry/",$scope.Inquiry).success(function(data,status){data&&$uibModalInstance.close(!0),$location.path("thankyouFIT/"+data.message)})}))}}).controller("fitThankYouCtrl",function($scope,$http,$location,$stateParams,$timeout){$scope.user,$scope.valid=!1,$http.get("https://login.kesari.in/route/fitenquiry/"+$stateParams.id).success(function(data,status){200==status?($scope.valid=!0,$scope.user=data.Name,$timeout(function(){$location.path("/")},3e5)):$location.path("/"),setTimeout(function(){$(".alert").alert("close"),window.history.go(-1)},5e3)}).error(function(data){$http.get("https://api.kesari.in/route/fitenquiry/"+$stateParams.id).success(function(data,status){200==status?($scope.valid=!0,$scope.user=data.Name,$timeout(function(){$location.path("/")},3e5)):$location.path("/")})})}),angular.module("websiteApp").controller("fitbookingCtrl",function($scope,$window,$http,$location,$stateParams,$q,$modal,$log,smoothScroll,DataService){$scope.items=$scope.stateParams;var url=$location.$$path;url=url.split("/"),$scope.status={isFirstOpen:!0,isFirstDisabled:!1,isSecondOpen:!1,isSecondDisabled:!0,isThirdOpen:!1,isThirdDisabled:!0},$scope.packNM=url[3],url.length>0&&DataService.getData("rsData/getFITPackageWithName/"+url[2]+"/"+url[3]).then(function(awesomeThings){awesomeThings.forEach(function(data){data.COSTING.forEach(function(room){if(room.CATEGORY==url[4]){console.log(room);var temp=room.HTL_NM1.split("+");$scope.htl=[],temp.forEach(function(htl){var tmp=htl.split(":");$scope.htl.push({city:tmp[0],htlName:tmp[1]})}),$scope.rooms=[{title:"Room 1",disable:!1}],$scope.curr=room.HT_SINGLE.indexOf(" ")!=-1?room.HT_SINGLE.substr(0,room.HT_SINGLE.indexOf(" ")):0,$scope.single=room.HT_SINGLE.indexOf(" ")!=-1?room.HT_SINGLE.substr(room.HT_SINGLE.indexOf(" ")):0,$scope.triple=room.HT_TRIPLE.indexOf(" ")!=-1?room.HT_TRIPLE.substr(room.HT_TRIPLE.indexOf(" ")):0,$scope.twin=room.HT_TWIN.indexOf(" ")!=-1?room.HT_TWIN.substr(room.HT_TWIN.indexOf(" ")):0,$scope.child=room.CH_WO_BED.indexOf(" ")!=-1?room.CH_WO_BED.substr(room.CH_WO_BED.indexOf(" ")):0,$scope.childWB=room.CH_W_BED.indexOf(" ")!=-1?room.CH_W_BED.substr(room.CH_W_BED.indexOf(" ")):0,"INR"!=$scope.curr?DataService.getData("rsData/getConversionRate/"+$scope.curr).then(function(awesomeThings){$scope.rate=awesomeThings[0].CN_SELL,console.log($scope.rate),$scope.showRate=$scope.rate.toFixed(),console.log($scope.showRate),$scope.list=[],$scope.single>0&&$scope.list.push({title:"1 Adult",value:1,price:($scope.single*$scope.rate).toFixed()}),$scope.twin>0&&$scope.list.push({title:"2 AdultS",value:2,price:($scope.twin*$scope.rate*2).toFixed()}),$scope.twin>0&&($scope.childWB>0&&$scope.child>0?$scope.list.push({title:"2 Adults + 1 Child",value:2,price:($scope.twin*$scope.rate*2).toFixed(),child1:[{title:"Child With bed",price:($scope.childWB*$scope.rate).toFixed()},{title:"Child Without Bed",price:($scope.child*$scope.rate).toFixed()}]}):$scope.child>0?$scope.list.push({title:"2 Adults + 1 Child",value:2,price:($scope.twin*$scope.rate*2).toFixed(),child1:[{title:"Child Without Bed",price:($scope.child*$scope.rate).toFixed()}]}):$scope.list.push({title:"2 Adults + 1 Child",value:2,price:($scope.twin*$scope.rate*2).toFixed(),child1:[{title:"Child With bed",price:($scope.childWB*$scope.rate).toFixed()}]})),$scope.twin>0&&($scope.childWB>0&&$scope.child>0?$scope.list.push({title:"2 Adults + 2 Child",value:2,price:($scope.twin*$scope.rate*2).toFixed(),child1:[{title:"Child With bed",price:($scope.childWB*$scope.rate).toFixed()},{title:"Child Without Bed",price:($scope.child*$scope.rate).toFixed()}],child2:[{title:"Child With bed",price:($scope.childWB*$scope.rate).toFixed()},{title:"Child Without Bed",price:($scope.child*$scope.rate).toFixed()}]}):$scope.child>0?$scope.list.push({title:"2 Adults + 2 Child",value:2,price:($scope.twin*$scope.rate*2).toFixed(),child1:[{title:"Child Without Bed",price:($scope.child*$scope.rate).toFixed()}],child2:[{title:"Child Without Bed",price:($scope.child*$scope.rate).toFixed()}]}):$scope.list.push({title:"2 Adults + 2 Child",value:2,price:($scope.twin*$scope.rate*2).toFixed(),child1:[{title:"Child With bed",price:($scope.childWB*$scope.rate).toFixed()}],child2:[{title:"Child With bed",price:($scope.childWB*$scope.rate).toFixed()}]})),$scope.triple>0&&$scope.list.push({title:"3 Adults",value:3,price:($scope.triple*$scope.rate*3).toFixed()})}):($scope.list=[],$scope.single>0&&$scope.list.push({title:"1 Adult",value:1,price:$scope.single}),$scope.twin>0&&$scope.list.push({title:"2 AdultS",value:2,price:2*$scope.twin}),$scope.twin>0&&($scope.childWB>0&&$scope.child>0?$scope.list.push({title:"2 Adults + 1 Child",value:2,price:2*$scope.twin,child1:[{title:"Child With bed",price:$scope.childWB},{title:"Child Without Bed",price:$scope.child}]}):$scope.child>0?$scope.list.push({title:"2 Adults + 1 Child",value:2,price:2*$scope.twin,child1:[{title:"Child Without Bed",price:$scope.child}]}):$scope.list.push({title:"2 Adults + 1 Child",value:2,price:2*$scope.twin,child1:[{title:"Child With bed",price:$scope.childWB}]})),$scope.twin>0&&($scope.childWB>0&&$scope.child>0?$scope.list.push({title:"2 Adults + 2 Child",value:2,price:2*$scope.twin,child1:[{title:"Child With bed",price:$scope.childWB},{title:"Child Without Bed",price:$scope.child}],child2:[{title:"Child With bed",price:$scope.childWB},{title:"Child Without Bed",price:$scope.child}]}):$scope.child>0?$scope.list.push({title:"2 Adults + 2 Child",value:2,price:2*$scope.twin,child1:[{title:"Child Without Bed",price:$scope.child}],child2:[{title:"Child Without Bed",price:$scope.child}]}):$scope.list.push({title:"2 Adults + 2 Child",value:2,price:2*$scope.twin,child1:[{title:"Child With bed",price:$scope.childWB}],child2:[{title:"Child With bed",price:$scope.childWB}]})),$scope.triple>0&&$scope.list.push({title:"3 Adults",value:3,price:(3*$scope.triple).toFixed()}))}})})}),$scope.update=function(index,item){$scope.showMsg="",$scope.rooms[index].child1&&delete $scope.rooms[index].child1,$scope.rooms[index].child2&&delete $scope.rooms[index].child2,$scope.rooms[index].Adult=item.value,$scope.rooms[index].AdultPrice={},$scope.temp=0,1==item.value&&($scope.rooms[index].AdultPrice.Adult1={price:item.price},$scope.temp+=item.price),2==item.value&&($scope.rooms[index].AdultPrice.Adult1={price:item.price},$scope.rooms[index].AdultPrice.Adult2={price:item.price},$scope.temp+=2*item.price),3==item.value&&($scope.rooms[index].AdultPrice.Adult1={price:item.price},$scope.rooms[index].AdultPrice.Adult2={price:item.price},$scope.rooms[index].AdultPrice.Adult3={price:item.price},$scope.temp+=3*item.price)},$scope.add=function(){var index=$scope.rooms.length+1;console.log($scope.rooms.length),console.log($scope.rooms[$scope.rooms.length-1]),index<=6&&$scope.rooms[$scope.rooms.length-1].AdultPrice?($scope.showMsg="",$scope.rooms.push({title:"Room "+index,disable:!1}),$scope.rooms[index-2].disable=!0,$scope.grandTotal=$scope.temp):void 0==$scope.rooms[$scope.rooms.length-1].AdultPrice&&($scope.showMsg="Please select Room Adults")},$scope.remove=function(){var index=$scope.rooms.length,value=null;index>1&&($scope.rooms[index-1].Adult&&(value=$scope.rooms[index-1].Adult),$scope.rooms[index-1].child1&&value++,$scope.rooms[index-1].child2&&value++,$scope.rooms.splice(index-1,1),$scope.grandTotal-=$scope.temp,$scope.rooms[$scope.rooms.length-1].disable=!1)},$scope.change=function(loc){1==loc&&($scope.status.isSecondOpen=!0,$scope.status.isSecondDisabled=!1,$scope.grandTotal=0,$scope.price=0,$scope.discount=0,$scope.tax=0,$scope.rooms.forEach(function(per){per.persons=[],per.AdultPrice.Adult1&&(per.persons.push({title:"Adult1"}),$scope.grandTotal+=parseInt(per.AdultPrice.Adult1.price),$scope.price+=parseInt(per.AdultPrice.Adult1.price)),per.AdultPrice.Adult2&&(per.persons.push({title:"Adult2"}),$scope.grandTotal+=parseInt(per.AdultPrice.Adult2.price),$scope.price+=parseInt(per.AdultPrice.Adult2.price)),per.AdultPrice.Adult3&&(per.persons.push({title:"Adult3"}),$scope.grandTotal+=parseInt(per.AdultPrice.Adult3.price),$scope.price+=parseInt(per.AdultPrice.Adult3.price)),per.child1&&($scope.grandTotal+=parseInt(per.child1.price),$scope.price+=parseInt(per.child1.price)),per.child2&&($scope.grandTotal+=parseInt(per.child2.price),$scope.price+=parseInt(per.child2.price))}),$scope.tax=parseInt(3.5*$scope.grandTotal/100),$scope.grandTotal+=parseInt($scope.tax)),2==loc&&($scope.status.isThirdOpen=!0,$scope.status.isThirdDisabled=!1)},$scope.paymentButton=function(){$scope.showButton=!0},$scope.pg=function(amt){var postData={room:$scope.rooms.room,grandTotal:$scope.grandTotal};$http.post("//login.kesari.in/route/websitebooking",{data:postData}).then(function(res){$scope.url="//erp.kesari.in/icici_kesari2015/TestSsl.php?last_id="+res.data._id+"&amt="+amt,$window.location.href=$scope.url})},$scope.save=function(){var postData={room:$scope.rooms.room,grandTotal:$scope.grandTotal};postData&&(0==$scope.payment||void 0==$scope.payment?$scope.showAlert=!0:($scope.showAlert=!0)&&($scope.showAlert=!1,$http.post("//login.kesari.in/route/websitebooking",{data:postData}).then(function(res){$scope.url="//erp.kesari.in/icici_kesari2015/TestSsl.php?last_id="+res.data._id+"&amt="+$scope.payment,$scope.saved=!1,$scope.pg()})))}}),angular.module("websiteApp").controller("fitModalInstanceCtrl",function($scope,$http,$location,$stateParams,$q,$modal,items,$state,$modalInstance){$scope.items=items;var temp=$scope.items.roomData.HTL_NM1.split("+");$scope.htl=[],temp.forEach(function(htl){var tmp=htl.split(":");$scope.htl.push({city:tmp[0],htlName:tmp[1]})}),$scope.grandTotal=0,$scope.rooms=[{title:"Room 1",disable:!1}],$scope.curr=$scope.items.roomData.HT_SINGLE.indexOf(" ")!=-1?$scope.items.roomData.HT_SINGLE.substr(0,$scope.items.roomData.HT_SINGLE.indexOf(" ")):0,$scope.single=$scope.items.roomData.HT_SINGLE.indexOf(" ")!=-1?$scope.items.roomData.HT_SINGLE.substr($scope.items.roomData.HT_SINGLE.indexOf(" ")):0,$scope.triple=$scope.items.roomData.HT_TRIPLE.indexOf(" ")!=-1?$scope.items.roomData.HT_TRIPLE.substr($scope.items.roomData.HT_TRIPLE.indexOf(" ")):0,$scope.twin=$scope.items.roomData.HT_TWIN.indexOf(" ")!=-1?$scope.items.roomData.HT_TWIN.substr($scope.items.roomData.HT_TWIN.indexOf(" ")):0,$scope.child=$scope.items.roomData.CH_WO_BED.indexOf(" ")!=-1?$scope.items.roomData.CH_WO_BED.substr($scope.items.roomData.CH_WO_BED.indexOf(" ")):0,$scope.childWB=$scope.items.roomData.CH_W_BED.indexOf(" ")!=-1?$scope.items.roomData.CH_W_BED.substr($scope.items.roomData.CH_W_BED.indexOf(" ")):0,"INR"!=$scope.curr?$http.get("https://api.kesari.in/route/rsData/getConversionRate/"+$scope.curr).success(function(awesomeThings){$scope.rate=awesomeThings[0].CN_SELL,$scope.showRate=$scope.rate.toFixed(),$scope.list=[],$scope.single>0&&$scope.list.push({title:"1 Adult",value:1,price:($scope.single*$scope.rate).toFixed()}),$scope.twin>0&&$scope.list.push({title:"2 AdultS",value:2,price:($scope.twin*$scope.rate*2).toFixed()}),$scope.twin>0&&($scope.childWB>0&&$scope.child>0?$scope.list.push({title:"2 Adults + 1 Child",value:2,price:($scope.twin*$scope.rate*2).toFixed(),child1:[{title:"Child With bed",price:($scope.childWB*$scope.rate).toFixed()},{title:"Child Without Bed",price:($scope.child*$scope.rate).toFixed()}]}):$scope.child>0?$scope.list.push({title:"2 Adults + 1 Child",value:2,price:($scope.twin*$scope.rate*2).toFixed(),child1:[{title:"Child Without Bed",price:($scope.child*$scope.rate).toFixed()}]}):$scope.list.push({title:"2 Adults + 1 Child",value:2,price:($scope.twin*$scope.rate*2).toFixed(),child1:[{title:"Child With bed",price:($scope.childWB*$scope.rate).toFixed()}]})),$scope.twin>0&&($scope.childWB>0&&$scope.child>0?$scope.list.push({title:"2 Adults + 2 Child",value:2,price:($scope.twin*$scope.rate*2).toFixed(),child1:[{title:"Child With bed",price:($scope.childWB*$scope.rate).toFixed()},{title:"Child Without Bed",price:($scope.child*$scope.rate).toFixed()}],child2:[{title:"Child With bed",price:($scope.childWB*$scope.rate).toFixed()},{title:"Child Without Bed",price:($scope.child*$scope.rate).toFixed()}]}):$scope.child>0?$scope.list.push({title:"2 Adults + 2 Child",value:2,price:($scope.twin*$scope.rate*2).toFixed(),child1:[{title:"Child Without Bed",price:($scope.child*$scope.rate).toFixed()}],child2:[{title:"Child Without Bed",price:($scope.child*$scope.rate).toFixed()}]}):$scope.list.push({title:"2 Adults + 2 Child",value:2,price:($scope.twin*$scope.rate*2).toFixed(),child1:[{title:"Child With bed",price:($scope.childWB*$scope.rate).toFixed()}],child2:[{title:"Child With bed",price:($scope.childWB*$scope.rate).toFixed()}]})),$scope.triple>0&&$scope.list.push({title:"3 Adults",value:3,price:($scope.triple*$scope.rate*3).toFixed()})}):($scope.list=[],$scope.single>0&&$scope.list.push({title:"1 Adult",value:1,price:$scope.single}),$scope.twin>0&&$scope.list.push({title:"2 AdultS",value:2,price:2*$scope.twin}),$scope.twin>0&&($scope.childWB>0&&$scope.child>0?$scope.list.push({title:"2 Adults + 1 Child",value:2,price:2*$scope.twin,child1:[{title:"Child With bed",price:$scope.childWB},{title:"Child Without Bed",price:$scope.child}]}):$scope.child>0?$scope.list.push({title:"2 Adults + 1 Child",value:2,price:2*$scope.twin,child1:[{title:"Child Without Bed",price:$scope.child}]}):$scope.list.push({title:"2 Adults + 1 Child",value:2,price:2*$scope.twin,child1:[{title:"Child With bed",price:$scope.childWB}]})),$scope.twin>0&&($scope.childWB>0&&$scope.child>0?$scope.list.push({title:"2 Adults + 2 Child",value:2,price:2*$scope.twin,child1:[{title:"Child With bed",price:$scope.childWB},{title:"Child Without Bed",price:$scope.child}],child2:[{title:"Child With bed",price:$scope.childWB},{title:"Child Without Bed",price:$scope.child}]}):$scope.child>0?$scope.list.push({title:"2 Adults + 2 Child",value:2,price:2*$scope.twin,child1:[{title:"Child Without Bed",price:$scope.child}],child2:[{title:"Child Without Bed",price:$scope.child}]}):$scope.list.push({title:"2 Adults + 2 Child",value:2,price:2*$scope.twin,child1:[{title:"Child With bed",price:$scope.childWB}],child2:[{title:"Child With bed",price:$scope.childWB}]})),$scope.triple>0&&$scope.list.push({title:"3 Adults",value:3,price:(3*$scope.triple).toFixed()})),$scope.mytime=new Date,$scope.status={isFirstOpen:!0,isFirstDisabled:!1,isSecondOpen:!1,isSecondDisabled:!0,isThirdOpen:!1,isThirdDisabled:!0
},$scope.change=function(loc){1==loc&&($scope.status.isSecondOpen=!0,$scope.status.isSecondDisabled=!1),2==loc&&($scope.status.isThirdOpen=!0,$scope.status.isThirdDisabled=!1)},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.minDate=new Date,$scope.maxDate=new Date(2020,5,22),$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0],$scope.hstep=1,$scope.mstep=15,$scope.options={hstep:[1,2,3],mstep:[1,5,10,15,25,30]},$scope.ismeridian=!0,$scope.update=function(index,item){$scope.rooms[index].child1&&delete $scope.rooms[index].child1,$scope.rooms[index].child2&&delete $scope.rooms[index].child2,$scope.rooms[index].Adult=item.value,$scope.rooms[index].AdultPrice={},$scope.temp=0,1==item.value&&($scope.rooms[index].AdultPrice.Adult1={price:item.price},$scope.temp+=item.price),2==item.value&&($scope.rooms[index].AdultPrice.Adult1={price:item.price},$scope.rooms[index].AdultPrice.Adult2={price:item.price},$scope.temp+=2*item.price),3==item.value&&($scope.rooms[index].AdultPrice.Adult1={price:item.price},$scope.rooms[index].AdultPrice.Adult2={price:item.price},$scope.rooms[index].AdultPrice.Adult3={price:item.price},$scope.temp+=3*item.price)},$scope.child1=function(index,item){},$scope.child2=function(index,item){},$scope.save=function(){var data=$scope.rooms;$modalInstance.dismiss("cancel"),$state.go("booking",{room:data,tourData:{date:"temp",code:"temp"}})},$scope.add=function(){var index=$scope.rooms.length+1;index<=6&&($scope.rooms.push({title:"Room "+index,disable:!1}),$scope.rooms[index-2].disable=!0,$scope.grandTotal=$scope.temp)},$scope.remove=function(){var index=$scope.rooms.length,value=null;index>1&&($scope.rooms[index-1].Adult&&(value=$scope.rooms[index-1].Adult),$scope.rooms[index-1].child1&&value++,$scope.rooms[index-1].child2&&value++,$scope.rooms.splice(index-1,1),$scope.grandTotal-=$scope.temp,$scope.rooms[$scope.rooms.length-1].disable=!1)}}),angular.module("websiteApp").controller("fitItiCtrl",function($scope,$http,$location,$stateParams,$q,$modal,$log,smoothScroll,$state,Lightbox,DataService,$window){smoothScroll.scrollTo("start"),$scope.show=!1,$scope.Inclusion=[],$scope.awesomeThings=[],$scope.days=[],$scope.simillarFIT=[],$scope.showAlert=!1,$scope.selectedRoom={data:null},$scope.fit=$stateParams,$scope.fit.continents.split("-").join(" ")&&($scope.fit.PKG_NM=$scope.fit.PKG_NM.split("-").join(" "),DataService.getData("rsData/getFITPackageWithNamev2/"+$scope.fit.continents.split("-").join(" ")+"/"+$scope.fit.PKG_NM).then(function(awesomeThings){$scope.data=awesomeThings,$scope.Itin=$scope.data.Itinerary;var today=new Date;$scope.available=0,$scope.data.costing.forEach(function(price){""==price.VALID_TO&&"Y"!=price.CANCEL&&(price.show=!0,$scope.available++),""!=price.VALID_TO&&today<new Date(price.VALID_TO)&&"Y"!=price.CANCEL&&(price.show=!0,$scope.available++)}),$scope.images=[],$scope.images=$scope.data.fitimages,$scope.package_name=$scope.data.package_name.replace(/<[^>]+>/gm,"-"),DataService.getData("rsData/getFITPackagev2/"+$scope.fit.continents.split("-").join(" ")+"/"+$scope.fit.country.split("-").join(" ")).then(function(awesomeThings){$scope.simillarFIT=awesomeThings})}),$scope.set=function(index){$scope.roomData=$scope.data.COSTING[index]},$scope.open2=function(){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/fititinerary/customfititinerary.model.html",controller:"customfitModalInstanceCtrl",size:"lg",resolve:{items:function(){return{data:$scope.selectedRoom.data,country:$scope.data.COUNTRIES,package:$scope.fit.PKG_NM,flag:!1}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start"),$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.open=function(){null!=$scope.selectedRoom.data?$state.go("bookFit",{continents:$scope.fit.continents,PKG_NM:$scope.fit.PKG_NM,CATEGORY:$scope.roomData.CATEGORY}):$scope.showAlert=!0}),$scope.openLightboxModal=function(images,Striker){Lightbox.openModal(images,Striker)},$scope.open3=function(data){var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/fit/fitInquiry.html",controller:"fitInquiryCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start")},function(){})},$scope.print=function(){var printWindow=$window.open("","","height=400,width=800,scrollbars=1");printWindow.document.write("<html><head><title>my print</title>"),printWindow.document.write('<style type="text/css" media="print,screen">body{font-size:11px;}body h4{line-height:1px;}body h4 p{margin-top:-2px;}</style>'),printWindow.document.write("</head><body>"),printWindow.document.write(angular.element("#printIti").html()),printWindow.document.write("</body></html>"),printWindow.print()},$scope.sendmail=function(){var pass;pass=angular.element("#printIti").html();var modalInstance3=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/touritinerary/mail.html",controller:"mailCtrl",size:"sm",resolve:{items:function(){return{data:pass}}}});modalInstance3.result.then(function(items){smoothScroll.scrollTo("start"),$scope.showMail=items},function(){$log.info("Modal dismissed at: "+new Date)})}}).controller("customfitModalInstanceCtrl",function($scope,$http,$location,$stateParams,$q,$modal,items,$state,$modalInstance){$scope.errors={},$scope.items=items;var source=$location.search();source.url=$location.path(),$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.minDate=new Date,$scope.maxDate=new Date(2020,5,22),$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0],$scope.example={value:new Date,anniversary:new Date},$scope.open=function(){$scope.opened=!0},$scope.save=function(form){$scope.Inquiry.url="https://www.kesari.in"+source.url,$scope.Inquiry.utmsearch=source,$scope.items.flag=!0,form.$valid&&($scope.Inquiry.basedUpon=$scope.items.package,$http.post("//login.kesari.in/route/fitenquiry/",$scope.Inquiry).success(function(data,status){data&&$modalInstance.close($scope.items.flag)}))}}),angular.module("websiteApp").factory("DataService",["$window","$http","$q",function(win,$http,$q){var get=function(path){var deferred=$q.defer();return $http.get("https://api.kesari.in/route/"+path).success(function(awesomeThings){deferred.resolve(awesomeThings)}),deferred.promise};return{getData:get}}]).service("smoothScroll",function(){this.scrollTo=function(eID){function currentYPosition(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}function elmYPosition(eID){for(var elm=document.getElementById(eID),y=elm.offsetTop,node=elm;node.offsetParent&&node.offsetParent!=document.body;)node=node.offsetParent,y+=node.offsetTop;return y}var startY=currentYPosition(),stopY=elmYPosition(eID),distance=stopY>startY?stopY-startY:startY-stopY;if(distance<100)return void scrollTo(0,stopY);var speed=Math.round(distance/100);speed>=20&&(speed=20);var step=Math.round(distance/25),leapY=stopY>startY?startY+step:startY-step,timer=0;if(stopY>startY)for(var i=startY;i<stopY;i+=step)setTimeout("window.scrollTo(0, "+leapY+")",timer*speed),leapY+=step,leapY>stopY&&(leapY=stopY),timer++;else for(var i=startY;i>stopY;i-=step)setTimeout("window.scrollTo(0, "+leapY+")",timer*speed),leapY-=step,leapY<stopY&&(leapY=stopY),timer++}}).directive("owlCarousel",function($location){return{restrict:"E",transclude:!1,link:function(scope){scope.initCarousel=function(element){var defaultOptions={},customOptions=scope.$eval($(element).attr("data-options")),url=$location.path();url.indexOf("/cruises/")>-1&&scope.width>1200&&(customOptions.items=7);for(var key in customOptions)defaultOptions[key]=customOptions[key];$(element).owlCarousel(defaultOptions)}}}}).directive("owlCarouselItem",[function(){return{restrict:"A",transclude:!1,link:function(scope,element){scope.$last&&scope.initCarousel(element.parent())}}}]).controller("ataGlanceCtrl",function($scope,$http,DataService,$window,smoothScroll){smoothScroll.scrollTo("start"),$scope.width,$scope.izone=[],$scope.dataLoaded={},$scope.dataloadedJoining={},$scope.loaded=!1,$scope.loadedJoining=!1,DataService.getData("webHeaderMenu/getWebPackages/").then(function(awesomeThings){$scope.dZone=awesomeThings.DOMESTIC_PACKAGE,$scope.iZone=awesomeThings.INTERNATION_PACKAGE}),$scope.dynamicPopover={templateUrl:"app/main/glancePopover.html"},$scope.loadData=function(name){void 0==$scope.dataLoaded[name]&&($scope.loaded=!0,DataService.getData("elastic/getToursAtGlanceMob/"+name).then(function(tour){$scope.loaded=!1,$scope.width=$window.outerWidth,$scope.dataLoaded[name]={status:"loaded",data:tour}}))},$scope.loadJoining=function(name){$scope.loaded=!1,void 0==$scope.dataloadedJoining[name]&&($scope.loaded=!0,DataService.getData("inventory/getTourPackageData/JL/"+name+"/0").then(function(tour){$scope.loaded=!1,$scope.width=$window.outerWidth,$scope.dataloadedJoining[name]={status:"loaded",data:tour}}))}}).directive("onCarouselChange",function($parse){return{require:"carousel",link:function(scope,element,attrs,carouselCtrl){var fn=$parse(attrs.onCarouselChange),origSelect=carouselCtrl.select;carouselCtrl.select=function(nextSlide,direction){return nextSlide!==this.currentSlide&&fn(scope,{nextSlide:nextSlide,direction:direction}),origSelect.apply(this,arguments)}}}}),angular.module("websiteApp").controller("MainCtrl",["$scope","smoothScroll","$state","DataService","$http","$window","$cookieStore","$location","$modal","$log",function(s,smoothScroll,$state,DataService,$http,$window,$cookieStore,$location,$modal,$log){function pushDataCookieWithId(id){if(void 0===id)var formData={host:window.location.host,createdOn:new Date};else var formData={id:id,tour:getCookie("tour"),href:getCookie("href"),lastUrl:getCookie("lastUrl"),ga:getCookie("_ga"),createdOn:new Date};$.getJSON("https://api.ipify.org/?format=json",function(ip){formData.locationInfo=ip,$.ajax({url:"https://api.kesari.in/route/cookieData/",type:"POST",data:JSON.stringify(formData),contentType:"application/json;charset=utf-8",dataType:"json",success:function(result){result&&(void 0===id?setCookie("track_web",result.tracking_hash,3650):console.log("updated"))},error:function(jqXHR,textStatus,errorThrown){console.log("Error in adding new cookie")}})})}function setCookie(cname,cvalue,exdays){var d=new Date;d.setTime(d.getTime()+24*exdays*60*60*1e3);var expires="expires="+d.toGMTString();document.cookie=cname+"="+cvalue+";"+expires+";path=/"}function getCookie(cname){for(var name=cname+"=",decodedCookie=decodeURIComponent(document.cookie),ca=decodedCookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""}function getCookieProducts(){var formData={id:getCookie("track_web")};$http.post("https://api.kesari.in/route/cookieData/getCookieProducts",formData).success(function(data,status){s.cookiesData=data}).error(function(data,status){})}var path=$cookieStore.get("lastUrl");path.path;s.adsBanner=[],$window.scrollTo(0,0),s.searchGroupTour={COST_2DAY:0},s.scrollUp=function(){smoothScroll.scrollTo("start")},s.days=[{val:4},{val:5},{val:6},{val:7},{val:8},{val:9},{val:10},{val:11},{val:12},{val:13},{val:14},{val:15},{val:16},{val:17},{val:18},{val:19},{val:20},{val:21},{val:22},{val:23}],s.gitInternationalLoaded=!1,s.gitDomesticLoaded=!1,s.fitLoaded=!1,s.specialityLoaded=!1,s.corporateLoaded=!1,s.bestDealLoaded=!1;var month=new Array;month[1]="Jan",month[2]="Feb",month[3]="Mar",month[4]="Apr",month[5]="May",month[6]="Jun",month[7]="Jul",month[8]="Aug",month[9]="Sep",month[10]="Oct",month[11]="Nov",month[12]="Dec",s.showScroll=!1,s.awesomeThings=[],s.tZone=[],s.showI=!1,s.showD=!1,s.toggle=function(zone){s.searchGroupTour={},s.searchGroupTour.zone=zone,"I"==zone&&(s.showI=!0,s.showD=!1),"D"==zone&&(s.showI=!1,s.showD=!0)},s.getLocation=function(val){return $http.get("https://kesari.in/route/rsData/getWebSearch/"+val).then(function(response){return response.data.filter(function(item){if(item.searchValue=item.TOURNAME+"("+item.TOURCODE+") "+item.F_VISIT,""!=item.TM_ZONE&&""!=item.TOURCODE&&""!=item.TOURNAME)return item})})},s.GoTOUR=function(){var path="/tourIti/Group-Tours/"+s.selectedSearch.TM_ZONE.split(" ").join("")+"/"+s.selectedSearch.TOURCODE+"/"+s.selectedSearch.TOURNAME.split(" ").join("");$location.path(path)},s.branchOpen=function(data){s.show=!1;var modalInstance2=$modal.open({animation:s.animationsEnabled,templateUrl:"app/main/main-page-modal/branch.html",controller:"branchesCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start"),s.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},s.maindeals=function(data){s.show=!1;var modalInstance2=$modal.open({animation:s.animationsEnabled,templateUrl:"app/main/maindealsDep.html",controller:"maindealsDepCtrl",size:"md",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){s.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},s.departmentOpen=function(data){s.show=!1;var modalInstance2=$modal.open({animation:s.animationsEnabled,templateUrl:"app/main/main-page-modal/departments.html",controller:"departmentCtrl",size:"md",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start"),s.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},s.salesInchargeOpen=function(data){s.show=!1;var modalInstance2=$modal.open({animation:s.animationsEnabled,templateUrl:"app/main/main-page-modal/sales-incharge.html",controller:"salesInchargeCtrl",size:"sm",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start"),s.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},s.offerOpen=function(data){},DataService.getData("webHeaderMenu/getWebPackages/").then(function(webPackagesData){s.dZone=webPackagesData.DOMESTIC_PACKAGE,s.gitDomesticLoaded=!0,s.dZone.forEach(function(zone){if(zone.FirstDate){var start=zone.FirstDate.split("-");start[1]<10&&(start[1]=10-start[1]);var currmonth=new Date(zone.FirstDate).getMonth();zone.FirstDate=month[currmonth+1]+""+start[0]}if(zone.LastDate){var end=zone.LastDate.split("-"),currmonth=new Date(zone.LastDate).getMonth();end[1]<10&&(end[1]=10-end[1]),zone.LastDate=month[currmonth+1]+""+end[0]}}),s.iZone=webPackagesData.INTERNATION_PACKAGE,s.gitInternationalLoaded=!0,s.iZone.forEach(function(zone){if(zone.FirstDate){var start=zone.FirstDate.split("-"),currmonth=new Date(zone.FirstDate).getMonth();start[1]<10&&(start[1]=10-start[1]),zone.FirstDate=month[currmonth+1]+""+start[0]}if(zone.LastDate){var end=zone.LastDate.split("-"),currmonth=new Date(zone.LastDate).getMonth();end[1]<10&&(end[1]=10-end[1]),zone.LastDate=month[currmonth+1]+""+end[0]}}),s.splZone=webPackagesData.SPECIALITY_PACKAGE,s.specialityLoaded=!0,s.splZone.forEach(function(zone){if(zone.name.indexOf("-")===-1&&(zone.pass=zone.name.split(" ").join("-")),zone.FirstDate){var start=zone.FirstDate.split("-"),currmonth=new Date(zone.FirstDate).getMonth();start[1]<10&&(start[1]-=10),zone.FirstDate=month[currmonth+1]+""+start[0]}if(zone.LastDate){var end=zone.LastDate.split("-");end[1]<10&&(end[1]=10-end[1]);var currmonth=new Date(zone.LastDate).getMonth();zone.LastDate=month[currmonth+1]+""+end[0]}}),s.bestDealLoaded=!0,s.BestDeal=webPackagesData.BESTDEAL_PACKAGE,s.BestDeal.forEach(function(deal){deal.TOUR_NIGHTS=deal.TM_DAYS-1,deal.TOUR_DAYS=deal.TOUR_NIGHTS+1})}),DataService.getData("rsData/getFITzonesv2/").then(function(FITZoneData){s.fitLoaded=!0,s.fitZone=FITZoneData,s.fitZone.forEach(function(zone){zone.departure=0,zone.seriesOption=0,zone.country.forEach(function(country){zone.departure+=country.count,zone.seriesOption+=country.seriesOption})})}),s.myInterval=5e3,s.noWrapSlides=!1,s.slides=[],DataService.getData("web_banner/scheduler").then(function(webBannerData){webBannerData.forEach(function(data){s.slides.push({image:data.backgroundImage,image1:data.overlayimage,link:data.hyperlink,titles:data.title})})}),DataService.getData("corporate_countries/").then(function(corporateCountry){s.corZone=corporateCountry,s.corporateLoaded=!0}),DataService.getData("testimonial/").then(function(testimonialData){s.testimonial=testimonialData}),s.category="Speciality-Tours",s.tourType="Group-Tours",s.cookiesData=[];var user=getCookie("track_web");""!=user?getCookieProducts():pushDataCookieWithId()}]).controller("departmentCtrl",function($scope,$uibModalInstance){$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}}).controller("salesInchargeCtrl",function($scope,$uibModalInstance){$scope.cancel=function(){$uibModalInstance.dismiss("cancel")}}).controller("maindealsDepCtrl",function($scope,$modal,items,$modalInstance){$scope.items=items.data,$scope.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("websiteApp").config(function($stateProvider){$stateProvider.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"}).state("group",{url:"/Group-Tours",templateUrl:"app/groupTour/grouptour.html",controller:"groupTourCtrl"}).state("dubaiweblink",{url:"/dubaiweblink",templateUrl:"app/dubaiweblink/dubaiweblink.html",controller:"dubaiWeblinkCtrl"}).state("forexweblink",{url:"/benefits-of-forex-card",templateUrl:"app/forexweblink/forexweblink.html",controller:"forexWeblinkCtrl"}).state("tourAtAGlance",{url:"/tours",templateUrl:"app/main/ataglance.html",controller:"ataGlanceCtrl"}).state("onewayairfarefree",{url:"/onewayairfarefree",templateUrl:"app/airtoair/air.html"}).state("thankyouEnquiry",{url:"/thankyou/:id",templateUrl:"app/tour/thankyou.html",controller:"TourThankyouCtrl"}).state("thankyouCruisesEnquiry",{url:"/thankyouCruises/:id",templateUrl:"app/cruises/thankYou_Cruises.html",controller:"cruiseThankyouCtrl"}).state("userAccount",{url:"/Guest/:name",templateUrl:"app/user/main.html",controller:"userCtrl",params:{name:null}}).state("verification",{url:"/verify/:verificationId",templateUrl:"app/user/verification.html",controller:"verifyMail",params:{verificationId:null}}).state("MgrTrain",{url:"/doitnow",templateUrl:"app/Do-it-Now/Dit.html",controller:"DitCtrl"}).state("tour-India",{url:"/India-Tours/:tourName-Tours",templateUrl:"app/tour/tour.html",controller:"tourCtrl",params:{tour:null,tourName:null}}).state("tour-search",{url:"/India-Tours/:tourName-Tours/:query",templateUrl:"app/tour/tour.html",controller:"tourCtrl",params:{tour:null,tourName:null,query:null}}).state("tour-search-international",{url:"/World-Tours/:tourName-Tours/:query",templateUrl:"app/tour/tour.html",controller:"tourCtrl",params:{tour:null,tourName:null,query:null}}).state("group-search",{url:"/search-GroupTour/:tour/:tourName/:days/:budget",templateUrl:"app/tour/tourSearch.html",controller:"tourSearchCtrl",params:{tour:null,tourName:null,days:null,budget:null}}).state("tour-World",{url:"/World-Tours/:tourName-Tours",templateUrl:"app/tour/tour.html",controller:"tourCtrl",params:{tour:null,tourName:null}}).state("spl-tour",{url:"/Speciality-Tours/:tourName-Tours",templateUrl:"app/SpecialityTours/spl-tour.html",controller:"splTourCtrl",params:{tourName:null}}).state("spl-tour-filter",{url:"/Speciality-Tours/:tourName-Tours/:query",templateUrl:"app/SpecialityTours/spl-tour.html",controller:"splTourCtrl",params:{tourName:null,query:null}}).state("splList-tour",{url:"/Speciality-Tours",templateUrl:"app/SpecialityTours/spl-list.html",controller:"splListTourCtrl"}).state("blog",{url:"/blog",templateUrl:"app/blog/blog.html",controller:"blogCtrl"}).state("dubai-vat",{url:"/increased-dubai-vat",templateUrl:"app/tour/increased-dubai-vat.html",controller:"dubaiVatCtrl"}).state("TailorMade",{url:"/Tailor-Made",templateUrl:"app/TailorMade/Tailor-Made.html",controller:"TailorMadeCtrl"}).state("tourStatus",{url:"/tourstatus",templateUrl:"app/tourstatus/tourstatus.html",controller:"summaryCtrl"}).state("BestDeal",{url:"/Best-Deal",templateUrl:"app/Best-Deal/Best-Deal.html",controller:"BestDealCtrl"}).state("history",{url:"/history",templateUrl:"app/Best-Deal/history.html",controller:"historyCtrl"}).state("fit-country",{url:"/Tailor-Made/:continents",templateUrl:"app/fit/fit-country.html",controller:"fitCntCtrl",params:{continents:null,country:null}}).state("fit",{url:"/Tailor-Made/:continents/:country",templateUrl:"app/fit/fit.html",controller:"fitCtrl",params:{continents:null,country:null}}).state("fit-filter",{url:"/Tailor-Made/:continents/:country/:query",templateUrl:"app/fit/fit.html",controller:"fitCtrl",params:{continents:null,country:null,query:null}}).state("thankyouFITEnquiry",{url:"/thankyouFIT/:id",templateUrl:"app/fit/thankyou.html",controller:"fitThankYouCtrl"}).state("tourIti",{url:"/tourIti/:type/:zone/:code/:name",templateUrl:"app/touritinerary/touritinerary.html",controller:"tourItiCtrl",params:{code:null,zone:null,name:null,type:null}}).state("guestLink",{url:"/guestLink/:type/:id",templateUrl:"app/touritinerary/guestLink.html",controller:"guestLinkCtrl",params:{code:null,zone:null,name:null,type:null,id:1}}).state("webLink",{url:"/webLink/:type/:id",templateUrl:"app/webLink/webLink.html",controller:"webLinkCtrl",params:{code:null,zone:null,name:null,type:null,id:1}}).state("tourIti2017",{url:"/tourIti2017/:type/:zone/:code/:name",templateUrl:"app/touritinerary/touritinerary.html",controller:"tourItiCtrl",params:{code:null,zone:null,name:null,type:null}}).state("booking",{url:"/booking/:zone/:date/:code",templateUrl:"app/booking/booking.html",controller:"bookingCtrl",authenticate:!0,params:{date:null,code:null,zone:null}}).state("thankyou",{url:"/summary/:id/:merchantID",templateUrl:"app/booking/thankyou.html",controller:"thankyouCtrl",authenticate:!0,params:{id:null,merchantID:null}}).state("fitIti",{url:"/Tailor-Made/:continents/:country/:PKG_NM/:pkg_id",templateUrl:"app/fititinerary/fititinerary.html",controller:"fitItiCtrl",params:{country:null,continents:null,pkg_id:null,pkg_nm:null}}).state("bookFit",{url:"/fitbooking/:continents/:PKG_NM/:CATEGORY",templateUrl:"app/fitbooking/fitbooking.html",controller:"fitbookingCtrl"}).state("aboutUsMain",{url:"/About-Us",templateUrl:"app/AboutUs/aboutus.html",controller:"aboutUsCtrl"}).state("aboutUs",{url:"/About-Us/:location",templateUrl:"app/AboutUs/aboutus.html",controller:"aboutUsCtrl",params:{location:null}}).state("faq",{url:"/FAQs",templateUrl:"app/FAQs/faq.html",controller:"faqCtrl"}).state("how-to-book",{url:"/How-to-Book",templateUrl:"app/How-to-Book/How-to-Book.html",controller:"HtBookCtrl"}).state("Gift-Voucher",{url:"/Gift-Voucher",templateUrl:"app/GIFT-HOLIDAYS/GIFT-HOLIDAYS.html",controller:"giftVoucherCtrl"}).state("career",{url:"/career",templateUrl:"app/career/career.html",controller:"careerCtrl"}).state("joinus",{url:"/joinus",templateUrl:"app/career/joinus.html",controller:"joinusCtrl"}).state("growmore",{url:"/growmore",templateUrl:"app/career/career.html",controller:"careerCtrl"}).state("privacypolicy",{url:"/Privacy-Policy",templateUrl:"app/privacypolicy/Privacy-Policy.html",controller:"privacyPolicyCtrl"}).state("termsconditions",{url:"/terms-conditions",templateUrl:"app/termsconditions/termsconditions.html",controller:"termsConditions"}).state("contesttermsconditions",{url:"/contest-terms-conditions",templateUrl:"app/termsconditions/contest-termsconditions.html",controller:"contesttermsConditions"}).state("PSA",{url:"/PSA",templateUrl:"app/PSAs/PSAs.html",controller:"preferSalesAgentCtrl"}).state("PSA-Reg",{url:"/PSA-Registration/:id",templateUrl:"app/PSAs/psa-reg.html",controller:"preferSalesAgentRegCtrl",params:{id:null}}).state("PSA-Appt",{url:"/PSA-Appointment/:id",templateUrl:"app/PSAs/psa-appt.html",controller:"preferSalesAgentApptCtrl",params:{id:null}}).state("thankyouPSA",{url:"/thankyouPSA",templateUrl:"app/PSAs/thankyouPSA.html",controller:"PSAThankyouCtrl"}).state("thankYouForRegistration",{url:"/thankYouForRegistration",templateUrl:"app/PSAs/thankYouRegistration.html",controller:"PSAThankyouRegistrationCtrl"}).state("GSA",{url:"/GSA",templateUrl:"app/GSA/GSAs.html",controller:"generalSalesAgentCtrl"}).state("GSA-Reg",{url:"/GSA-Registration/:id",templateUrl:"app/GSA/gsa-reg.html",controller:"generalSalesAgentRegCtrl",params:{id:null}}).state("thankyouGSA",{url:"/thankyouGSA",templateUrl:"app/GSA/thankyouGSA.html",controller:"GSAThankyouCtrl"}).state("thankYouForGSARegistration",{url:"/thankYouForGSARegistration",templateUrl:"app/GSA/thankYouRegistration.html",controller:"GSAThankyouRegistrationCtrl"}).state("thankyouCareer",{url:"/thankyouCareer",templateUrl:"app/career/thankyou.html",controller:"thankyouCareerCtrl"}).state("thankyouTourleader",{url:"/thankyou-tourleader",templateUrl:"app/career/thankyou-tourleader.html",controller:"thankyouTourleaderCtrl"}).state("thankyouFeedback",{url:"/thankyouFeedback",templateUrl:"app/guest-feedback/thankyouFeedback.html",controller:"thankyouFeedbackCtrl"}).state("contact",{url:"/contact",templateUrl:"app/contact/contact.html",controller:"contactCtrl"}).state("franchisee",{url:"/franchisee",templateUrl:"app/franchisee/franchisee.html",controller:"franchiseeCtrl"}).state("forex",{url:"/forex",templateUrl:"app/forex/forex.html",controller:"forexCtrl"}).state("kesariForex",{url:"/kesari-forex",templateUrl:"app/forex/kesari-forex.html",controller:"forexCtrl"}).state("thankyouForex",{url:"/thankyouForex",templateUrl:"app/forex/thankyouForex.html",controller:"ForexThankyouCtrl"}).state("forexSummary",{url:"/forexSummary",templateUrl:"app/forex/forexsummary.html",controller:"forexSummaryCtrl",params:{currencyRate:null,INRAmount:null,forexAmountSell:null,INRAmountSell:null,forexAmountBuy:null,INRAmountBuy:null,totalGST:null,totalTaxAmount:null,totalTax:null,totalAmount:null,currencyName:null,orderType:null,productName:null,currencyCode:null}}).state("forexvoucher",{url:"/forexvoucher",templateUrl:"app/forex/forexvoucher.html",controller:"forexVoucherCtrl",params:{totalData:null}}).state("unsubscribe",{url:"/unsubscribe/?userID={id}&emailerId={emailID}",templateUrl:"app/unsubscribe/unsubscribe.html",controller:"unsubscribeCtrl"}).state("summary",{url:"/summary",templateUrl:"app/summary/summary.html",controller:"summaryCtrl"}).state("testimonial",{url:"/testimonial",templateUrl:"app/testimonial/testimonial.html",controller:"testimonialCtrl"}).state("guesthelpline",{url:"/Guest-Helpline",templateUrl:"app/Guest-Helpline/Guest-Helpline.html",controller:"guesthelplineCtrl"}).state("press",{url:"/press",templateUrl:"app/press/press.html",controller:"pressCtrl"}).state("passportLoss",{url:"/14",templateUrl:"app/14/index.html",controller:"pptLossCtrl"}).state("accidentHosp",{url:"/15",templateUrl:"app/15/index.html",controller:"accidentHospCtrl"}).state("deathOnTour",{url:"/16",templateUrl:"app/16/index.html",controller:"deathTourCtrl"}).state("naturalCalamity",{url:"/17",templateUrl:"app/17/index.html",controller:"naturalCalamityCtrl"}).state("postbookinginfo",{url:"/post-booking-info",templateUrl:"app/post-booking-info/Post-Booking-Information.html",controller:"postBookingInfoCtrl"}).state("academy",{url:"/academy",templateUrl:"app/academy/academy.html",controller:"academyCtrl"}).state("logo",{url:"/logo",templateUrl:"app/logo/logo.html",controller:"logoCtrl"}).state("404",{url:"/404",templateUrl:"app/AboutUs/404.html",controller:"404ErrorCtrl"}).state("cruisesNew",{url:"/cruises",templateUrl:"app/cruises/cruises-liner.html",controller:"CruiseCtrl"}).state("cruisesNewIdx",{url:"/cruises/:cruiseLiner",templateUrl:"app/cruises/cruises-index.html",controller:"CruiseListCtrl",params:{cruiseLiner:null}}).state("cruise-details",{url:"/cruise_details/:cruise/:vessel/:packageName",templateUrl:"app/cruises/cruise-detail.html",controller:"CruiseMainDetailsCtrl",params:{cruise:null,packageName:null,vessel:null}}).state("Europeseminar",{url:"/seminar",templateUrl:"app/Seminar/europe.html",controller:"europeSeminarCtrl"}).state("carnival",{url:"/carnival",templateUrl:"app/Seminar/carnival.html",controller:"carnivalCtrl"}).state("departure",{url:"/exclusivedepartures",templateUrl:"app/departure/exclusivedepartures.html",controller:"departureCtrl"}).state("shotready",{url:"/shotreadyhai",templateUrl:"app/Seminar/shotready.html",controller:"shotreadyCtrl"}).state("Marketing",{url:"/marketing",templateUrl:"app/AboutUs/marketing.html",controller:"MarketingCtrl"}).state("Sales",{url:"/sales",templateUrl:"app/AboutUs/sales.html",controller:"SalesCtrl"}).state("Operation",{url:"/operation",templateUrl:"app/AboutUs/operation.html",controller:"OpeCtrl"}).state("CandC",{url:"/candc",templateUrl:"app/AboutUs/candc.html",controller:"CandCCtrl"}).state("LFPage",{url:"/lakshya-foundation",templateUrl:"app/Seminar/lakshya-foundation.html",controller:"LFCtrl"}).state("elastic-search",{url:"/search/:query",templateUrl:"app/tour/tourElasticSearch.html",controller:"tourElasticSearchCtrl",params:{query:null}}).state("mDubai",{url:"/Dubai-Marathi",templateUrl:"app/tour/mlanding.html",controller:"landingPageCtrl"}).state("karnival",{url:"/:tourName",templateUrl:"app/tour/landing.html",controller:"landingPageCtrl",params:{tour:null,tourName:null}}).state("europe18",{url:"/:tourName",templateUrl:"app/tour/landingEurope.html",controller:"landingPageCtrl",params:{tour:null,tourName:null}}).state("redirect",{url:"/:id",templateUrl:"app/redirect/redirect.html",controller:"redirectCtrl",params:{id:null}}).state("landingpagePage-sales",{url:"/landingpage/:tourName",templateUrl:"app/tour/landing.html",controller:"landingPageCtrl",params:{tour:null,tourName:null}})}),angular.module("websiteApp").controller("miceTourCtrl",function($scope,$http,$window,$stateParams,$modal,$state,Lightbox,smoothScroll,$location,DataService){smoothScroll.scrollTo("start"),$scope.loading=!0,$scope.country=$stateParams.country.split("-").join(" "),$scope.corCntry=[],$scope.result=[],$scope.filterStart=!1,$scope.corZone=[],$scope.selection={corporate:{}},$scope.Duration={lower_day_bound:0,upper_day_bound:0,top:0,min:0},$scope.show=!1,$scope.loadDefault=!0,$scope.countryList=[];var loadCountry=function(country){DataService.getData("corporate_itineraries/country/"+country).then(function(awesomeThings){$scope.corZone.push.apply($scope.corZone,awesomeThings),$scope.corZone.forEach(function(zone){0==$scope.Duration.lower_day_bound?$scope.Duration.lower_day_bound=parseInt(zone.day):zone.day<$scope.Duration.lower_day_bound&&($scope.Duration.lower_day_bound=parseInt(zone.day)),0==$scope.Duration.upper_day_bound?$scope.Duration.upper_day_bound=parseInt(zone.day):zone.day>$scope.Duration.upper_day_bound&&($scope.Duration.upper_day_bound=parseInt(zone.day))}),$scope.total=$scope.corZone.length,$scope.loading=!1}).finally(function(){$scope.Duration.min=$scope.Duration.lower_day_bound,$scope.Duration.top=$scope.Duration.upper_day_bound})};if($location.path().indexOf("country=")>-1){$scope.loadDefault=!1,console.log($location.path());var list=$location.path();list=list.substring(list.indexOf("=")+1),list.indexOf(",")>-1?list.split(",").forEach(function(country){country=country.split("-").join(" "),$scope.selection.corporate[country]=!0,$scope.countryList.push(country),loadCountry(country)}):(list=list.split("-").join(" "),$scope.selection.corporate[list]=!0,$scope.countryList.push(list),loadCountry(list))}$scope.loadPackage=function(){var temp="";Object.keys($scope.selection.corporate).forEach(function(data){1==$scope.selection.corporate[data]&&(temp+=""==temp?data.split(" ").join("-"):","+data.split(" ").join("-"))}),""==temp?$location.path("/mice/"+$scope.country):$location.path("/mice/"+$scope.country+"/country="+temp)},$scope.onDurationSliderChange=function(){
$scope.result=[],$scope.selectedTour="",$scope.filterStart=!0,$scope.corZone.forEach(function(tour){tour.day<=$scope.Duration.top&&tour.day>=$scope.Duration.min&&($scope.result.push(tour),$scope.total=$scope.result.length,$scope.result.sortOn("day"))})},Array.prototype.sortOn=function(key){this.sort(function(a,b){return a[key]<b[key]?-1:a[key]>b[key]?1:0})},$scope.loadDefault&&($scope.country?DataService.getData("corporate_itineraries/country/"+$scope.country).then(function(awesomeThings){$scope.corZone=awesomeThings,$scope.corZone.forEach(function(zone){0==$scope.Duration.lower_day_bound?$scope.Duration.lower_day_bound=parseInt(zone.day):zone.day<$scope.Duration.lower_day_bound&&($scope.Duration.lower_day_bound=parseInt(zone.day)),0==$scope.Duration.upper_day_bound?$scope.Duration.upper_day_bound=parseInt(zone.day):zone.day>$scope.Duration.upper_day_bound&&($scope.Duration.upper_day_bound=parseInt(zone.day))}),$scope.total=$scope.corZone.length,$scope.loading=!1}).finally(function(){$scope.Duration.min=$scope.Duration.lower_day_bound,$scope.Duration.top=$scope.Duration.upper_day_bound}):$state.go("mice",{})),DataService.getData("corporate_countries/").then(function(awesomeThings){$scope.corCntry=awesomeThings}),$scope.open2=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/mice/miceInquiry.html",controller:"miceInquiryCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){$scope.show=items,smoothScroll.scrollTo("start")},function(){})}}).controller("miceItiCtrl",function($scope,$state,$http,$window,$stateParams,Lightbox,$modal,smoothScroll,DataService){smoothScroll.scrollTo("start"),$scope.loading=!0,$scope.tour=$stateParams,DataService.getData("corporate_itineraries/tourname/"+$scope.tour.tourname.split("-").join(" ")).then(function(awesomeThings){awesomeThings[0]?($scope.corZone=awesomeThings[0],$scope.total=$scope.corZone.length):$state.go("mice",{}),$scope.loading=!1}),DataService.getData("corporate_itineraries/country/"+$scope.tour.country.split("-").join(" ")).then(function(awesomeThings){$scope.simZone=awesomeThings,$scope.loading=!1}),$scope.openLightboxModal=function(images,Striker){var counter=images.length,index=0,dummy=[];images.forEach(function(img){index++,img=img,dummy.push(img),setTimeout(function(){counter-=1,0===counter&&Lightbox.openModal(dummy,Striker)},1)})},$scope.open2=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/mice/miceInquiry.html",controller:"miceInquiryCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){$scope.show=items,smoothScroll.scrollTo("start")},function(){})},$scope.print=function(){var printWindow=$window.open("","","height=400,width=800");printWindow.document.write("<html><head><title></title>"),printWindow.document.write('<style type="text/css" media="print,screen">body{font-size:11px;}body h4{line-height:1px;}body h4 p{margin-top:-2px;}</style>'),printWindow.document.write("</head><body>"),printWindow.document.write(angular.element("#printIti").html()),printWindow.document.write("</body></html>"),printWindow.print()},$scope.sendmail=function(){var pass;pass=angular.element("#printIti").html();var modalInstance3=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/touritinerary/mail.html",controller:"mailCtrl",size:"sm",resolve:{items:function(){return{data:pass}}}});modalInstance3.result.then(function(items){smoothScroll.scrollTo("start"),$scope.showMail=items},function(){$log.info("Modal dismissed at: "+new Date)})}}).controller("miceInquiryCtrl",function($scope,$http,$location,$stateParams,$q,$modal,items,$state,$modalInstance,$uibModalInstance,smoothScroll){smoothScroll.scrollTo("start"),$scope.errors={},$scope.items=items,$scope.disableButton=!1,$scope.list=[{title:"Meetings"},{title:"Incentive Tours"},{title:"Conference"},{title:"Exhibition"},{title:"Educational Tours"}],$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.minDate=new Date,$scope.maxDate=new Date(2020,5,22),$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0],$scope.example={value:new Date,anniversary:new Date},$scope.open=function(){$scope.opened=!0},$scope.cancel=function(){$uibModalInstance.dismiss("cancel")},$scope.save=function(form){$scope.items.flag=!0,form.$valid&&($scope.disableButton=!0,$scope.Inquiry.basedUpon||($scope.Inquiry.basedUpon=$scope.items.data),console.log($scope.items.data),console.log($scope.Inquiry.basedUpon))}}).controller("miceCtrl",function($scope,$http,$window,$stateParams,smoothScroll,DataService,$modal){smoothScroll.scrollTo("start"),$scope.filterStart=!1,$scope.Duration={lower_day_bound:0,upper_day_bound:0,top:0,min:0},$scope.open3=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/mice/miceInquiry-AllDestination.html",controller:"miceInquiryCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){$scope.show=items,smoothScroll.scrollTo("start")},function(){})},$scope.startsWith=function(state,viewValue){return state.substr(0,viewValue.length).toLowerCase()==viewValue.toLowerCase()},$scope.search=function(){$scope.result=[],$scope.filterStart=!0,$scope.selectedTour._id?($scope.selectedTour=$scope.selectedTour.country,$scope.corZone.forEach(function(tour){tour.country.indexOf($scope.selectedTour)>-1&&$scope.result.push(tour)})):""==$scope.selectedTour&&($scope.filterStart=!1,$scope.result=[]),$scope.total=$scope.result.length},$scope.onDurationSliderChange=function(){$scope.result=[],$scope.selectedTour="",$scope.filterStart=!0,$scope.corZone.forEach(function(tour){tour.day<=$scope.Duration.top&&tour.day>=$scope.Duration.min&&($scope.result.push(tour),$scope.total=$scope.result.length,$scope.result.sortOn("day"))})},Array.prototype.sortOn=function(key){this.sort(function(a,b){return a[key]<b[key]?-1:a[key]>b[key]?1:0})},$scope.reset=function(){$scope.result=[],$scope.selectedTour="",$scope.filterStart=!1,$scope.total=$scope.corZone.length},DataService.getData("corporate_countries/").then(function(awesomeThings){$scope.corZone=awesomeThings,$scope.total=$scope.corZone.length}).finally(function(){})}),angular.module("websiteApp").controller("redirectCtrl",function($stateParams,$location,$window,$http,$scope,DataService,$state){var flag=!1,match=function(string1,string2){return string1.toLowerCase()===string2.toLowerCase()},urlcount=$stateParams.id.length;match($stateParams.id,"fb")&&(flag=!0,$window.location.href="//www.facebook.com/KesariTours"),(urlcount=2)&&$http.get("https://api.kesari.in/route/rsData/getTourNameWithZone/"+$stateParams.id).then(function(awesomeThings){$scope.trcodeUrl=awesomeThings,awesomeThings.data&&(flag=!0,$window.location.href="/tourIti/Group-Tours/"+awesomeThings.data.TM_ZONE.split(" ").join("-")+"/"+awesomeThings.data.TOURCODE+"/"+awesomeThings.data.TOURNAME.split(" ").join("-"))}),"/mice/India"==$location.path&&(flag=!0,$location.path("//www.kesarimice.in")),match($stateParams.id,"ebrochure")&&(flag=!0,$window.location.href="https://erp.kesari.in/ebrochure/"),match($stateParams.id,"destinationweddings")&&(flag=!0,$window.location.href="//destinationweddings.kesari.in"),match($stateParams.id,"mice")&&(flag=!0,$window.location.href="//www.kesarimice.in"),match($stateParams.id,"1")&&(flag=!0,$window.location.href="//erp.kesari.in/tp/"),match($stateParams.id,"dubai-marathi")&&(flag=!0,$window.location.href="Dubai-Marathi"),"seminar"!=$stateParams.id&&"Seminar"!=$stateParams.id&&"SEMINAR"!=$stateParams.id||(flag=!0,$location.path("seminar")),"academy"!=$stateParams.id&&"Academy"!=$stateParams.id&&"ACADEMY"!=$stateParams.id||(flag=!0,$location.path("academy")),"South-East-Asia"!=$stateParams.id&&"sea"!=$stateParams.id&&"SEA"!=$stateParams.id||(flag=!0,$location.path("World-Tours/South-East-Asia-Tours")),"World-Tours"==$stateParams.id&&"Sri-Lanka-Tours"==$stateParams.tour&&(flag=!0,$location.path("World-Tours/Sri-Lanka-Tours")),"psa"==$stateParams.id&&(flag=!0,$location.path("PSA")),"America"!=$stateParams.id&&"america"!=$stateParams.id&&"AMERICA"!=$stateParams.id||(flag=!0,$location.path("landingpage/america")),"Alaska"!=$stateParams.id&&"alaska"!=$stateParams.id&&"ALASKA"!=$stateParams.id||(flag=!0,$location.path("landingpage/america2018")),"Australia-NewZealand"!=$stateParams.id&&"australia-newzealand"!=$stateParams.id&&"AUSTRALIA-NEWZEALAND"!=$stateParams.id&&"australia"!=$stateParams.id||(flag=!0,$location.path("World-Tours/Australia-NewZealand-Tours")),"Australia"!=$stateParams.id&&"australia"!=$stateParams.id&&"AUSTRALIA"!=$stateParams.id||(flag=!0,$location.path("World-Tours/Australia-NewZealand-Tours")),"SCANDINAVIA"!=$stateParams.id&&"Scandinavia"!=$stateParams.id&&"scandinavia"!=$stateParams.id||(flag=!0,$location.path("tourIti/Group-Tours/Europe/EY/SCANDINAVIA-WITH-MIDNIGHT-SUN")),"Europe"!=$stateParams.id&&"europe"!=$stateParams.id&&"EUROPE"!=$stateParams.id||(flag=!0,$location.path("World-Tours/Europe-Tours")),"Japan-China"!=$stateParams.id&&"japan-china"!=$stateParams.id&&"JAPAN-CHINA"!=$stateParams.id&&"japan"!=$stateParams.id||(flag=!0,$location.path("World-Tours/Japan-China-Tours")),"Japan"!=$stateParams.id&&"japan"!=$stateParams.id&&"JAPAN"!=$stateParams.id||(flag=!0,$location.path("World-Tours/Japan-China-Tours")),"China"!=$stateParams.id&&"china"!=$stateParams.id&&"CHINA"!=$stateParams.id||(flag=!0,$location.path("World-Tours/Japan-China-Tours")),"Mauritius"!=$stateParams.id&&"mauritius"!=$stateParams.id&&"MAURITIUS"!=$stateParams.id||(flag=!0,$location.path("World-Tours/Mauritius-Tours")),"South-Africa-Kenya"!=$stateParams.id&&"south-africa-kenya"!=$stateParams.id&&"SOUTH-AFRICA-KENYA"!=$stateParams.id&&"africa"!=$stateParams.id||(flag=!0,$location.path("World-Tours/South-Africa-Kenya-Tours")),"Africa"!=$stateParams.id&&"africa"!=$stateParams.id&&"AFRICA"!=$stateParams.id||(flag=!0,$location.path("World-Tours/South-Africa-Kenya-Tours")),"Sri-Lanka"!=$stateParams.id&&"sri-lanka"!=$stateParams.id&&"SRI-LANKA"!=$stateParams.id&&"srilanka"!=$stateParams.id&&"SRILANKA"!=$stateParams.id||(flag=!0,$location.path("World-Tours/SriLanka-Maldives-Tours")),"Maldives"!=$stateParams.id&&"maldives"!=$stateParams.id&&"MALDIVES"!=$stateParams.id||(flag=!0,$location.path("World-Tours/SriLanka-Maldives-Tours")),"Seychelles"!=$stateParams.id&&"seychelles"!=$stateParams.id&&"SEYCHELLES"!=$stateParams.id||(flag=!0,$location.path("World-Tours/Seychelles-Tours")),"Andaman"!=$stateParams.id&&"andaman"!=$stateParams.id&&"ANDAMAN"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Andaman-Tours")),"Bhutan"!=$stateParams.id&&"bhutan"!=$stateParams.id&&"BHUTAN"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Bhutan-Tours")),"Goa"!=$stateParams.id&&"goa"!=$stateParams.id&&"GOA"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Goa-Tours")),"Himachal"!=$stateParams.id&&"himachal"!=$stateParams.id&&"HIMACHAL"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Himachal-Tours")),"Kashmir"!=$stateParams.id&&"kashmir"!=$stateParams.id&&"KASHMIR"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Kashmir-Tours")),"Leh-Ladakh"!=$stateParams.id&&"leh-ladakh"!=$stateParams.id&&"LEH-LADAKH"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Leh-Ladakh-Tours")),"Maharashtra"!=$stateParams.id&&"maharashtra"!=$stateParams.id&&"MAHARASHTRA"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Maharashtra-Tours")),"Nepal"!=$stateParams.id&&"nepal"!=$stateParams.id&&"NEPAL"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Nepal-Tours")),"Rajasthan"!=$stateParams.id&&"rajasthan"!=$stateParams.id&&"RAJASTHAN"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Rajasthan-Tours")),"Tamil-Nadu"!=$stateParams.id&&"tamil-nadu"!=$stateParams.id&&"TAMIL-NADU"!=$stateParams.id&&"TAMILNADU"!=$stateParams.id&&"tamilnadu"!=$stateParams.id&&"Tamilnadu"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Tamil-Nadu-Tours")),"West-Bengal"!=$stateParams.id&&"west-bengal"!=$stateParams.id&&"WEST-BENGAL"!=$stateParams.id||(flag=!0,$location.path("India-Tours/West-Bengal-Tours")),"Andhra-Pradesh"!=$stateParams.id&&"andhra-pradesh"!=$stateParams.id&&"ANDHRA-PRADESH"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Andhra-Pradesh-Tours")),"Chattisgarh"!=$stateParams.id&&"chattisgarh"!=$stateParams.id&&"CHATTISGARH"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Chattisgarh-Tours")),"Gujarat"!=$stateParams.id&&"gujarat"!=$stateParams.id&&"GUJARAT"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Gujarat-Tours")),"Karnataka"!=$stateParams.id&&"karnataka"!=$stateParams.id&&"KARNATAKA"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Karnataka-Tours")),"Kerala"!=$stateParams.id&&"kerala"!=$stateParams.id&&"KERALA"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Kerala-Tours")),"Madhya-Pradesh"!=$stateParams.id&&"madhya-pradesh"!=$stateParams.id&&"MADHYA-PRADESH"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Madhya-Pradesh-Tours")),"Nainital"!=$stateParams.id&&"nainital"!=$stateParams.id&&"NAINITAL"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Nainital-Tours")),"North-East"!=$stateParams.id&&"north-east"!=$stateParams.id&&"NORTH-EAST"!=$stateParams.id||(flag=!0,$location.path("India-Tours/North-East-Tours")),"Sikkim-Darjeeling"!=$stateParams.id&&"sikkim-darjeeling"!=$stateParams.id&&"SIKKIM-DARJEELING"!=$stateParams.id&&"sikkim"!=$stateParams.id&&"SIKKIM"!=$stateParams.id&&"Sikkim"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Sikkim-Darjeeling-Tours")),"Uttar-Pradesh"!=$stateParams.id&&"uttar-pradesh"!=$stateParams.id&&"UTTAR-PRADESH"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Uttar-Pradesh-Tours")),"Orissa"!=$stateParams.id&&"orissa"!=$stateParams.id&&"ORISSA"!=$stateParams.id||(flag=!0,$location.path("India-Tours/Orissa-Tours")),"Chota-Break"!=$stateParams.id&&"chota-break"!=$stateParams.id&&"CHOTA-BREAK"!=$stateParams.id||(flag=!0,$location.path("Speciality-Tours/Chota-Break-Tours")),"Honeymoon-Special"!=$stateParams.id&&"honeymoon-special"!=$stateParams.id&&"HONEYMOON-SPECIAL"!=$stateParams.id&&"Honeymoon"!=$stateParams.id&&"honeymoon"!=$stateParams.id&&"HONEYMOON"!=$stateParams.id||(flag=!0,$location.path("Speciality-Tours/Honeymoon-Special-Tours")),"Second-Innings"!=$stateParams.id&&"second-innings"!=$stateParams.id&&"SECOND-INNGINGS"!=$stateParams.id||(flag=!0,$location.path("Speciality-Tours/Second-Innings-Tours")),"Student-Special"!=$stateParams.id&&"student-special"!=$stateParams.id&&"STUDENT-SPECIAL"!=$stateParams.id||(flag=!0,$location.path("Speciality-Tours/Student-Special-Tours")),"Youth-Special-Tours"!=$stateParams.id&&"youth-special-tours"!=$stateParams.id&&"YOUTH-SPECIAL-TOURS"!=$stateParams.id||(flag=!0,$location.path("Speciality-Tours/Student-Special-Tours")),"Youth-Special"!=$stateParams.id&&"youth-special"!=$stateParams.id&&"YOUTH-SPECIAL"!=$stateParams.id||(flag=!0,$location.path("Speciality-Tours/Student-Special-Tours")),"Economy-Tours"!=$stateParams.id&&"economy-tours"!=$stateParams.id&&"ECONOMY-TOURS"!=$stateParams.id&&"Low-Price-Tours"!=$stateParams.id&&"low-price-tours"!=$stateParams.id&&"LOW-PRICE-TOURS"!=$stateParams.id||(flag=!0,$location.path("Speciality-Tours/Low-Price-Tours")),"My-Fair-Lady"!=$stateParams.id&&"My Fair Lady"!=$stateParams.id&&"my fair lady"!=$stateParams.id&&"myfairlady"!=$stateParams.id&&"myfairlady"!=$stateParams.id||(flag=!0,$location.path("Speciality-Tours/My-Fair-Lady-Tours")),"asia"==$stateParams.id&&(flag=!0,window.location=" //kesariasia.com"),"asia"==$stateParams.id&&"Maps.php"==$stateParams.tour&&(flag=!0,window.location=" //kesariasia.com/Maps.php"),"asia"==$stateParams.id&&"gallery.php"==$stateParams.tour&&(flag=!0,window.location=" //kesariasia.com/gallery.php"),"asia"==$stateParams.id&&"Aboutus.php"==$stateParams.tour&&(flag=!0,window.location=" //kesariasia.com/Aboutus.php"),"asia"==$stateParams.id&&"ContactUs.php"==$stateParams.tour&&(flag=!0,window.location=" //kesariasia.com/ContactUs.php"),"asia"==$stateParams.id&&"query_form.php"==$stateParams.tour&&(flag=!0,window.location=" //kesariasia.com/query_form.php"),"asia"==$stateParams.id&&"offer.php"==$stateParams.tour&&(flag=!0,window.location=" //kesariasia.com/offer.php"),"asia"==$stateParams.id&&"Karnataka-Tour"==$stateParams.tour&&(flag=!0,window.location=" //kesariasia.com/Rajasthan-Tours"),"asia"==$stateParams.id&&"Karnataka-Tour"==$stateParams.tour&&(flag=!0,window.location=" //kesariasia.com/Rajasthan-Tours"),"asia"==$stateParams.id&&"Journey-Through-Bhutan"==$stateParams.tour&&(flag=!0,window.location=" //kesariasia.com/Journey-Through-Bhutan"),0==flag&&$location.path("/")}),angular.module("websiteApp").controller("testimonialCtrl",function($scope,$http,$state,$stateParams,smoothScroll,$modal,Lightbox,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0),$scope.guest=$stateParams.guest,$scope.result={},$http.get("https://api.kesari.in/route/testimonial/").success(function(awesomeThings){$scope.testimonial=awesomeThings}),$scope.trustSrc=function(src){return $sce.trustAsResourceUrl(src)},$scope.set=function(index){$scope.guest=$scope.testimonial[index].guestName,$state.go("testimonial",{guest:$scope.testimonial[index].guestName})}}).controller("termsConditions",function(smoothScroll){smoothScroll.scrollTo("start")}).controller("contesttermsConditions",function(smoothScroll){smoothScroll.scrollTo("start")}).controller("postBookingInfoCtrl",function($scope,$http,smoothScroll){$scope.errors={},$scope.disableButton=!1,$scope.save=function(form){form.$valid&&$http.post("https://psaonline.kesari.in/billing/validate-mobile.asp",$scope.PostBook).success(function(data,status){})}}).controller("privacyPolicyCtrl",function(smoothScroll){smoothScroll.scrollTo("start")}).controller("feedbackModalInstanceCtrl",function($scope,$http,$modalInstance,$timeout,DataService,$state){$scope.disableButton=!1,$scope.hide=!1,$scope.feedback={},DataService.getData("dynamic/popUp/website_feedback").then(function(data){$scope.options=data.option[0].values}),$scope.save=function(form){form.$valid&&($scope.msg="Submitting Your Response",$scope.disableButton=!0,$http.post("https://login.kesari.in/route/webfeedback/",$scope.feedback).success(function(data,status){data&&($state.go("thankyouFeedback"),$scope.hide=!0,$timeout(function(){$modalInstance.close(!0)},3e3))}))},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}).controller("summaryCtrl",function($scope,$http){$scope.awesomeThings=[],$scope.interTourStatus=[],$scope.indiaTourStatus=[],$http.get("https://api.kesari.in/route/rsData/getOnGoingTour/I").success(function(awesomeThings){$scope.interTourStatus=awesomeThings}),$http.get("https://api.kesari.in/route/rsData/getOnGoingTour/D").success(function(awesomeThings){$scope.indiaTourStatus=awesomeThings})}),angular.module("websiteApp").controller("tourCtrl",function($rootScope,$scope,$window,$http,$location,$stateParams,$modal,Lightbox,smoothScroll,$log,DataService,$cookieStore,$state,$filter,$sce){smoothScroll.scrollTo("start"),$window.scrollTo(0,0),$scope.selection={},$scope.show=!1,$scope.awesomeThings=[],$scope.tour=$stateParams,$scope.count=0;var limit=0;$scope.filterStart=!1,$scope.price=[],$scope.showAlert=!1,$scope.loading=!1,$scope.selectedTour="",$scope.top=0,$scope.priceSlider={min:35e4,max:4e5,ceil:406646,floor:0},$scope.priceFilter={lower_price_bound:0,upper_price_bound:0,top:0,min:0,from:"",to:""},$scope.Duration={lower_day_bound:0,upper_day_bound:0,top:0,min:0,from:"",to:""},$scope.lower_price_bound=0,$scope.upper_price_bound=0,$scope.result=[],$scope.originUrl="",$scope.hasparameter=!0,$scope.regionList=[],$scope.userLocation={},$scope.geoLocation={},$scope.TourZoneSeries=[],$scope.priceFilterList=[],$scope.daysFilterList=[],$scope.allSector="",$scope.priceList=[],$scope.brandList=[],$scope.dayList=[],$scope.departureList=[],$scope.subCategoryList=[],$scope.filterDataArray={indian:"",world:"",priceRange:"",fromToPrice:"",dateOfTravel:"",travelMonth:"",dayRange:"",fromToDay:"",brandType:"",departureType:"",category:""},$scope.regionListView=[],$scope.priceListView=[],$scope.fromTopriceView,$scope.totalPackage;var locUrl=$location.path();"/World-Tours/Dubai-Tours"==locUrl&&$location.path("/World-Tours/Dubai-and-MiddleEast-Tours"),"/World-Tours/South-Africa-Kenya-Tours"!=locUrl&&"/India-Tours/South-Africa-Kenya-Tours"!=locUrl||$location.path("/World-Tours/Africa-Tours"),"/World-Tours/Maldives-Tours"==locUrl&&$location.path("/World-Tours/SriLanka-Maldives-Tours"),"/World-Tours/Middle-East-Tours"==locUrl&&$location.path("/World-Tours/Dubai-and-MiddleEast-Tours"),"/World-Tours/Maharashtra-Tours"==locUrl&&$location.path("/India-Tours/Maharashtra-Tours"),"/India-Tours/Dubai-Tours"==locUrl&&$location.path("/World-Tours/Dubai-and-MiddleEast-Tours"),"/India-Tours/America-Tours"==locUrl&&$location.path("/World-Tours/USA-Tours"),"/India-Tours/Mauritius-Tours"==locUrl&&$location.path("/World-Tours/Mauritius-Tours"),"/India-Tours/Mauritius-Tours"==locUrl&&$location.path("/World-Tours/Mauritius-Tours"),$scope.tourType=!1,$scope.breadcrum=$location.path().split("/"),$scope.closed=function(priceListView1){$scope.TotalMainPrice=priceListView1.split(" to "),$scope.priceFilter.from="",$scope.priceFilter.to="",$scope.priceSearch($scope.priceFilter.from,$scope.priceFilter.to),$(".popup-mytest").hide()},$scope.closedday=function(actualDay){$scope.TotalMaindays=actualDay.split(" to "),$scope.Duration.from="",$scope.Duration.to="",$scope.daySearch($scope.Duration.from,$scope.Duration.to),$(".popup-mytest3").hide()},$scope.closeCategory=function(name,status){$scope.selection.subcategories="",$scope.categoryFilter($scope.selection.subcategories,1),$(".popup-mytest4").hide()},$scope.closedDate=function(date){var tofromDate=date.split(" to ");$scope.actualDate=tofromDate="";var fromDate,toDate,dateOfMonth;void 0==fromDate&&(fromDate=""),void 0==toDate&&(toDate=""),void 0==dateOfMonth&&(dateOfMonth=""),$scope.dateSearchClosed(fromDate,toDate,dateOfMonth),$(".popup-mytest1").hide()},$scope.closedMonth=function(actualMonth){dateOfMonth=actualMonth="";var fromDate,toDate,dateOfMonth;void 0==fromDate&&(fromDate=""),void 0==toDate&&(toDate=""),void 0==dateOfMonth&&(dateOfMonth=""),$scope.dateSearchClosed(fromDate,toDate,dateOfMonth),$(".popup-mytest2").hide()},$scope.cancel=function(key,value){$scope.selection.dom[key]=!1,$scope.selection.inter[key]=!1,$scope.selection.range[key]=!1,$scope.selection.duration[key]=!1,$scope.selection.brand[key]=!1,$scope.selection.departure[key]=!1,$scope.loaddom(key,value),$scope.loadPackage(key,value),$scope.chcekedPrice(key,value),$scope.chcekedDuration(key,value),$scope.searchBrand(key,value),$scope.searchDeparture(key,value)};var tourzoneSort=function(){$scope.TourZoneSeries.forEach(function(zone){zone.STAY&&(zone.STAY=zone.STAY.replace(/<[^>]+>/gm,"")),""!=zone.TOURMAS0?(zone.TOUR_NIGHTS=zone.TOURMAS0[0].TM_DAYS-1,zone.TOUR_DAYS=zone.TOUR_NIGHTS+1):(zone.TOUR_NIGHTS=0,zone.TOUR_DAYS=0)})},pathArray=$location.path().split("/");if($location.path().indexOf("priceRange=")>-1){var priceRangeValue=$location.path().split("|priceRange="),priceRangeValue1=priceRangeValue[1].split("|fromToPrice=");$scope.priceListView2=priceRangeValue1[0].split(",");var process="";process=$location.path().substring($location.path().indexOf("priceRange=")+11,$location.path().indexOf("|fromToPrice=")),process.indexOf(",")>-1?($scope.selection.range=$scope.selection.range||{},process.split(",").forEach(function(region){$scope.selection.range[region]=!0})):($scope.selection.range=$scope.selection.range||{},$scope.selection.range[process]=!0)}if($location.path().indexOf("|fromToPrice=")>-1){var pathArray=$location.path(),priceFromTo=pathArray.split("|fromToPrice="),priceFromTo1=priceFromTo[1],actualPrice=priceFromTo1.split("|dateOfTravel="),totalPrice=actualPrice[0];$scope.TotalMainPrice=totalPrice.split(" to "),$scope.priceListView1=totalPrice,$scope.priceFrom=$scope.priceFilter.from=$scope.TotalMainPrice[0],$scope.priceTo=$scope.priceFilter.to=$scope.TotalMainPrice[1],$scope.TotalMainPrice[0]&&$scope.TotalMainPrice[1]>0&&($scope.priceFrom=$scope.priceFilter.from=$scope.TotalMainPrice[0],$scope.priceTo=$scope.priceFilter.to=$scope.TotalMainPrice[1])}if($location.path().indexOf("|dateOfTravel=")>-1&&($scope.hasparameter=!1,$scope.tofromDate=$location.path().substring($location.path().indexOf("dateOfTravel=")+13,$location.path().indexOf("|travelMonth=")),$scope.actualDate=$scope.tofromDate),$location.path().indexOf("|travelMonth=")>-1&&($scope.hasparameter=!1,$scope.actualMonth=$location.path().substring($location.path().indexOf("travelMonth=")+12,$location.path().indexOf("|dayRange="))),$location.path().indexOf("|dayRange=")>-1){$scope.hasparameter=!1;var process="";process=$location.path().substring($location.path().indexOf("dayRange=")+9,$location.path().indexOf("|fromToDay=")),$scope.actualDays=process,$scope.TotalMainDays=$scope.actualDays.split(","),process.indexOf(",")>-1?($scope.selection.duration=$scope.selection.duration||{},process.split(",").forEach(function(region){$scope.selection.duration[region]=!0})):($scope.selection.duration=$scope.selection.duration||{},$scope.selection.duration[process]=!0)}if($location.path().indexOf("|fromToDay=")>-1&&($scope.hasparameter=!1,$scope.actualDay=$location.path().substring($location.path().indexOf("fromToDay=")+10,$location.path().indexOf("|brandType="))),$location.path().indexOf("|brandType=")>-1){$scope.hasparameter=!1;var process="";process=$location.path().substring($location.path().indexOf("brandType=")+10,$location.path().indexOf("|departureType=")),$scope.actualBrand=process,$scope.mainBrand=$scope.actualBrand.split(","),process.indexOf(",")>-1?($scope.selection.brand=$scope.selection.brand||{},process.split(",").forEach(function(region){$scope.selection.brand[region]=!0})):($scope.selection.brand=$scope.selection.brand||{},$scope.selection.brand[process]=!0)}if($location.path().indexOf("|departureType=")>-1){$scope.hasparameter=!1;var process="";process=$location.path().substring($location.path().indexOf("departureType=")+14,$location.path().indexOf("|category=")),$scope.actualBrand=process,$scope.mainDeparture=$scope.actualBrand.split(","),process.indexOf(",")>-1?($scope.selection.departure=$scope.selection.departure||{},process.split(",").forEach(function(region){$scope.selection.departure[region]=!0})):($scope.selection.departure=$scope.selection.departure||{},$scope.selection.departure[process]=!0)}if($location.path().indexOf("|category=")>-1){var process="",pathArray=$location.path(),categorydisplayed=pathArray.split("|category="),category=categorydisplayed[1];process=categorydisplayed[1],$scope.subcategory=category.split(","),process.indexOf(",")>-1?($scope.selection.subcategories=$scope.selection.subcategories||{},process.split(",").forEach(function(region){$scope.selection.subcategories[region]=!0})):($scope.selection.subcategories=$scope.selection.subcategories||{},$scope.selection.subcategories[process]=!0)}if($location.path().indexOf("world=")>-1){$scope.hasparameter=!1;var process="";if($location.path().indexOf("indian=")>$location.path().indexOf("world=")?process=$location.path().substring($location.path().indexOf("world=")+6,$location.path().indexOf("|indian")):$location.path().indexOf("indian=")<$location.path().indexOf("world=")&&(process=$location.path().substring($location.path().indexOf("world=")+6)),process.indexOf(",")>-1)$scope.selection.inter=$scope.selection.inter||{},$scope.selection.range=$scope.selection.range||{},process.split(",").forEach(function(region){if($scope.selection.inter[region]=!0,$scope.TourZoneSeries=$scope.TourZoneSeries||[],$scope.regionList=$scope.regionList||[],""!=region);else{({tourID:"0",zone:$scope.tour.tourName,tourSeries:"0"})}});else{if($scope.selection.inter=$scope.selection.inter||{},$scope.regionList=$scope.regionList||[],$scope.TourZoneSeries=$scope.TourZoneSeries||[],""!=process);else{({tourID:"0",zone:$scope.tour.tourName,tourSeries:"0"})}$scope.regionList.push(process),$scope.selection.inter[process]=!0}}if($location.path().indexOf("indian")>-1){$scope.hasparameter=!1;var process="";if($location.path().indexOf("priceRange=")>$location.path().indexOf("indian=")?process=$location.path().substring($location.path().indexOf("indian=")+7,$location.path().indexOf("|priceRange=")):$location.path().indexOf("priceRange=")<$location.path().indexOf("indian=")&&(process=$location.path().substring($location.path().indexOf("indian=")+7)),process.indexOf(",")>-1)$scope.selection.dom=$scope.selection.dom||{},process.split(",").forEach(function(region){if($scope.selection.dom[region]=!0,$scope.TourZoneSeries=$scope.TourZoneSeries||[],$scope.regionList=$scope.regionList||[],""!=region);else{({tourID:"0",zone:$scope.tour.tourName,tourSeries:"0"})}});else{if($scope.selection.dom=$scope.selection.dom||{},$scope.regionList=$scope.regionList||[],$scope.TourZoneSeries=$scope.TourZoneSeries||[],""!=process);else{({tourID:"0",zone:$scope.tour.tourName,tourSeries:"0"})}$scope.regionList.push(process),$scope.selection.dom[process]=!0}}$scope.priceSearch=function(priceFrom,priceTo){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|"));$scope.priceFrom=priceFrom,$scope.priceTo=priceTo;var minMaxPrice=priceFrom+" to "+priceTo;$scope.filterDataArray.fromToPrice=minMaxPrice,$scope.filterDataArray?(basePageUrl=basePageUrl?basePageUrl+"query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange="+$scope.filterDataArray.priceRange+"|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType="+$scope.filterDataArray.departureType+"|category="+$scope.filterDataArray.category:$location.path()+"/query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange="+$scope.filterDataArray.priceRange+"|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType="+$scope.filterDataArray.departureType+"|category="+$scope.filterDataArray.category,$location.path(basePageUrl)):$location.path()},$scope.daySearch=function(dayFrom,dayTo){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|"));$scope.dayFrom=dayFrom,$scope.dayTo=dayTo;var minMaxDay=dayFrom+" to "+dayTo;$scope.filterDataArray.fromToDay=minMaxDay,$scope.filterDataArray?(basePageUrl=basePageUrl?basePageUrl+"query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange="+$scope.filterDataArray.priceRange+"|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType="+$scope.filterDataArray.departureType+"|category="+$scope.filterDataArray.category:$location.path()+"/query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange="+$scope.filterDataArray.priceRange+"|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType="+$scope.filterDataArray.departureType+"|category="+$scope.filterDataArray.category,
$location.path(basePageUrl)):$location.path()},$scope.date1=function(){$scope.popup1.opened=!0},$scope.date2=function(){$scope.popup2.opened=!0},$scope.popup1={opened:!1},$scope.popup2={opened:!1},$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.minDate=new Date,$scope.maxDate=new Date(2020,5,22),$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd-MM-yyyy","shortDate","mm/yyyy"],$scope.format1=$scope.format=$scope.formats[2],$scope.example={value:new Date,anniversary:new Date},$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.minDate=new Date,$scope.maxDate=new Date(2020,5,22),$scope.formats=["MMM-yyyy","yyyy/MMMM","MMMM-yyyy","shortDate"],$scope.formated=$scope.formats[0],$scope.example={value:new Date,anniversary:new Date},$scope.status={opened:!1},$scope.open=function(){$scope.status.opened=!0};var formDate;if($scope.dateSearch=function(fromDate,toDate,dateOfMonth){if((fromDate&&toDate||dateOfMonth)&&(""!=formDate&&""!=toDate||""!=dateOfMonth)){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|"));void 0==fromDate&&(fromDate=""),void 0==toDate&&(toDate=""),void 0==dateOfMonth&&(dateOfMonth=""),formDate=$filter("date")(fromDate,"dd-MM-yyyy"),toDate=$filter("date")(toDate,"dd-MM-yyyy"),dateOfMonth=$filter("date")(dateOfMonth,"MM-yyyy"),$scope.formattedDate=formDate+" to "+toDate,$scope.filterDataArray.travelMonth=dateOfMonth,$scope.filterDataArray.dateOfTravel=$scope.formattedDate,$scope.filterDataArray?(basePageUrl=basePageUrl?basePageUrl+"query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange="+$scope.filterDataArray.priceRange+"|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType="+$scope.filterDataArray.departureType+"|category="+$scope.filterDataArray.category:$location.path()+"/query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange="+$scope.filterDataArray.priceRange+"|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType="+$scope.filterDataArray.departureType+"|category="+$scope.filterDataArray.category,$location.path(basePageUrl)):$location.path()}},$scope.dateSearchClosed=function(fromDate,toDate,dateOfMonth){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|"));void 0==fromDate&&(fromDate=""),void 0==toDate&&(toDate=""),void 0==dateOfMonth&&(dateOfMonth=""),formDate=$filter("date")(fromDate,"dd-MM-yyyy"),toDate=$filter("date")(toDate,"dd-MM-yyyy"),dateOfMonth=$filter("date")(dateOfMonth,"MM-yyyy"),$scope.formattedDate=formDate+" to "+toDate,$scope.filterDataArray.travelMonth=dateOfMonth,$scope.filterDataArray.dateOfTravel=$scope.formattedDate,$scope.filterDataArray?(basePageUrl=basePageUrl?basePageUrl+"query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange="+$scope.filterDataArray.priceRange+"|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType="+$scope.filterDataArray.departureType+"|category="+$scope.filterDataArray.category:$location.path()+"/query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange="+$scope.filterDataArray.priceRange+"|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType="+$scope.filterDataArray.departureType+"|category="+$scope.filterDataArray.category,$location.path(basePageUrl)):$location.path()},$scope.search=function(){$scope.startsWith=function(state,viewValue){return state.substr(0,viewValue.length).toLowerCase()==viewValue.toLowerCase()},$scope.result=[],$scope.filterStart=!0,$scope.selectedTour&&$scope.selectedTour._id?($scope.selectedTour=$scope.selectedTour.searchTerm,$scope.TourZoneSeries.forEach(function(tour){tour.searchTerm.indexOf($scope.selectedTour)>-1&&$scope.result.push(tour)})):""==$scope.selectedTour&&($scope.filterStart=!1)},null!=$scope.tour.tourName){$scope.tour.tourName=$scope.tour.tourName.split("-").join(" "),$scope.tour.tourName.indexOf("USA")>-1&&($scope.tour.tourName=$scope.tour.tourName.replace("USA","America"));"inventory/getTourPackageDataWeb/0/"+$scope.tour.tourName+"/0";$scope.loading=!0,$scope.tourType=[];var tourData={tourID:"0",zone:$scope.tour.tourName,tourSeries:"0"};$scope.hasparameter&&$http.post("https://api.kesari.in/route/inventory/getTourPackageDataWeb",tourData).then(function(awesomeThings,status){awesomeThings=awesomeThings.data,0==awesomeThings.length&&($scope.loading=!1,$scope.message="Tour Packages are coming soon !!!"),awesomeThings[0]&&awesomeThings[0].tourzonedescription&&($scope.desc=awesomeThings[0].tourzonedescription),$scope.desc&&($scope.desc=$scope.desc),$scope.limitVal=Math.floor($scope.desc.length/2-100),$scope.init=function(){$scope.limit=$scope.limitVal,$scope.newLimit=$scope.limitVal,$scope.moreShown=!1},$scope.limitValbottom=Math.floor($scope.desc.length/2-100),$scope.initBottom=function(){$scope.limit=$scope.limitValbottom,$scope.newLimitBottom=$scope.limitValbottom,$scope.moreShown=!1},$scope.bottomDescription=awesomeThings[0].tourzoneBottomdesc,limit=awesomeThings.length,$scope.total=awesomeThings.length,$scope.subtitle=awesomeThings[0].tourzone_subtitle,$scope.tourTitle=awesomeThings[0].TM_ZONE,awesomeThings.forEach(function(data){data.STAY&&(data.STAY=data.STAY.replace(/<[^>]+>/gm,"")),data.TOURMAS0?(data.TOUR_NIGHTS=data.TOURMAS0[0].TM_DAYS-1,data.TOUR_DAYS=data.TOUR_NIGHTS+1):(data.TOUR_NIGHTS=0,data.TOUR_DAYS=0),data.generated_NETCOST||$scope.count++}),$scope.TourZoneSeries=[],awesomeThings.forEach(function(zone){void 0!=zone.TOURNAME&&(zone.searchTerm=zone.TOURCODE+"-"+zone.TOURNAME,$scope.TourZoneSeries.push(zone),0==$scope.Duration.lower_day_bound?$scope.Duration.lower_day_bound=parseInt(zone.TOUR_DAYS):zone.TOUR_DAYS<$scope.Duration.lower_day_bound&&($scope.Duration.lower_day_bound=parseInt(zone.TOUR_DAYS)),0==$scope.Duration.upper_day_bound?$scope.Duration.upper_day_bound=parseInt(zone.TOUR_DAYS):zone.TOUR_DAYS>$scope.Duration.upper_day_bound&&($scope.Duration.upper_day_bound=parseInt(zone.TOUR_DAYS)),$scope.count++)}),$scope.hasparameter=!0,$scope.loading=!1}).finally(function(){$scope.priceFilter.min=$scope.priceFilter.lower_price_bound,$scope.priceFilter.top=$scope.priceFilter.upper_price_bound,$scope.Duration.min=$scope.Duration.lower_day_bound,$scope.Duration.top=$scope.Duration.upper_day_bound}),DataService.getData("webHeaderMenu/").then(function(awesomeThings){awesomeThings.GIT.forEach(function(tour){"D"==tour._id?$scope.dZone=tour.COUNTRY:$scope.iZone=tour.COUNTRY})})}else $location.path("/");$scope.go=function(TOURCODE,TM_ZONE,TOURNAME){$state.go("tourIti",{code:TOURCODE,type:"Group-Tours",zone:TM_ZONE.split(" ").join("-"),name:TOURNAME.split(" - ").join("-").trim().split(" ").join("-")})},$scope.onSliderChange=function(){""==$scope.selectedTour?($scope.result=[],$scope.filterStart=!0,$scope.TourZoneSeries.forEach(function(tour){tour.generated_NETCOST<=$scope.priceFilter.top&&tour.generated_NETCOST>=$scope.priceFilter.min&&($scope.result.push(tour),$scope.total=$scope.result.length,$scope.result.sortOn("generated_NETCOST"))})):$scope.filterStart=!1},$scope.translate=function(value){return"â‚¹"+value.toLocaleString()},$scope.translateday=function(value){return value.toLocaleString()+"Days"},Array.prototype.sortOn=function(key){this.sort(function(a,b){return a[key]<b[key]?-1:a[key]>b[key]?1:0})},$scope.open2=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/touritinerary/ad-landing.html",controller:"gitInquiryCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start"),$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.open3=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/tour/jlPricing.html",controller:"jlPricingCtrl",size:"md",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.whyBook=function(){var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/touritinerary/whyBook.html",controller:"whyBookCtrl",windowClass:"custom-modal",size:"lg",resolve:{items:function(){return 0}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start"),$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.itinerary=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/tour/itineraryPopUp.html",controller:"itineraryPopUpCtrl",size:"md",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.monthAndPricing=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/tour/DatePricing.html",controller:"DatePricingCtrl",size:"md",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.onDurationSliderChange=function(){$scope.result=[],$scope.filterStart=!0,$scope.TourZoneSeries.forEach(function(tour){void 0!=tour.generated_NETCOST&&tour.TOUR_DAYS<=$scope.Duration.top&&tour.TOUR_DAYS>=$scope.Duration.min&&($scope.result.push(tour),$scope.total=$scope.result.length,$scope.result.sortOn("TOUR_DAYS"))})},$scope.reset=function(){$scope.result=[],$scope.selectedTour="",$scope.filterStart=!1,$scope.total=$scope.TourZoneSeries.length,$scope.priceFilter.min=$scope.priceFilter.lower_price_bound,$scope.priceFilter.top=$scope.priceFilter.upper_price_bound,$scope.Duration.min=$scope.Duration.lower_day_bound,$scope.Duration.top=$scope.Duration.upper_day_bound},DataService.getData("webHeaderMenu/getWebPackages/").then(function(getSector){$scope.domastic=getSector.DOMESTIC_PACKAGE,$scope.international=getSector.INTERNATION_PACKAGE,$scope.mainInterDom=$scope.international.concat($scope.domastic)}),$scope.sectorsClick=function(tourName,region){"I"==region?$location.path("/World-Tours/"+tourName.split(" ").join("-")+"-Tours"):"D"==region&&$location.path("/India-Tours/"+tourName.split(" ").join("-")+"-Tours")},$scope.loadPackage=function(name,status){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|")),url="",count=0;Object.keys($scope.selection.inter).forEach(function(data){1==$scope.selection.inter[data]&&data&&""!=data&&(url+=0==count?data:","+data,count++)}),$scope.filterDataArray?(""!=$scope.filterDataArray.world?$scope.filterDataArray.world=url:$scope.filterDataArray.world=url,basePageUrl=basePageUrl?basePageUrl+"query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange=|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType=|category=":$location.path()+"/query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange=|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType=|category=",$location.path(basePageUrl)):$location.path()};var getDate="",getMonth="",getDuration="",getBrand="",getdeparture="",getsubCategory="";if($stateParams.query){var urlArray1=$stateParams.query.split("|"),mainquery="",mainPrice="",toPrice=0,fromPrice=0,fromToPrice=0,toDay="",fromDay="",fromToDay=0;urlArray1.forEach(function(getData){if(getData.indexOf("world=")!=-1||getData.indexOf("indian=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],$scope.filterDataArray[stateParameter]=getData,""!=mainquery?(mainquery=mainquery+","+getData,$scope.modifiedMainquery=mainquery.replace(/,\s*$/,"")):(mainquery=getData,$scope.modifiedMainquery=mainquery.replace(/,\s*$/,""))}if(getData.indexOf("priceRange=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],mainPrice=getData,$scope.mainPrice=mainPrice;var priceListArray=getData.split(",");$scope.priceList.push(priceListArray),$scope.filterDataArray[stateParameter]=getData}if(getData.indexOf("fromToPrice=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],fromToPrice=getData;var priceListArray=getData.split("to");$scope.filterDataArray[stateParameter]=getData,priceListArray[0]&&(fromPrice=priceListArray[0]),priceListArray[1]&&(toPrice=priceListArray[1])}if(getData.indexOf("dateOfTravel=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],getDate=getData,$scope.filterDataArray[stateParameter]=getData}if(getData.indexOf("travelMonth=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],getMonth=getData,$scope.filterDataArray[stateParameter]=getData}if(getData.indexOf("dayRange=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],getDuration=getData;var dayListArray=getData.split(",");$scope.dayList.push(dayListArray),$scope.filterDataArray[stateParameter]=getData}if(getData.indexOf("fromToDay=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],fromToDay=getData;var dayListArray=getData.split("to");$scope.filterDataArray[stateParameter]=getData,dayListArray[0]&&(fromDay=dayListArray[0]),dayListArray[1]&&(toDay=dayListArray[1])}if(getData.indexOf("brandType=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],getBrand=getData;var brandArray=getData.split(",");$scope.brandList.push(brandArray),$scope.filterDataArray[stateParameter]=getData}if(getData.indexOf("departureType=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],getdeparture=getData;var departureArray=getData.split(",");$scope.departureList.push(departureArray),$scope.filterDataArray[stateParameter]=getData}if(getData.indexOf("category=")!=-1){var stateParameter=getData.split("=")[0];getData=getData.split("=")[1],getsubCategory=getData;var subCategoryArray=getData.split(",");$scope.subCategoryList.push(subCategoryArray),$scope.filterDataArray[stateParameter]=getData}}),$scope.modifiedMainquery?$http.get("https://api.kesari.in/route/inventory/getAllFiltersWithSectorWeb/?query=zone=["+$scope.modifiedMainquery+"]").success(function(awesomeThings){$scope.priceFilterList=awesomeThings[2].list[0].rangeUpto,$scope.daysFilterList=awesomeThings[3].list[0].range;var priceFilterList=awesomeThings[2].range,daysFilterList=awesomeThings[3].range;$scope.specialityFilterList=awesomeThings[4].range,$scope.departureFilterList=awesomeThings[6].range,$scope.subCategory=awesomeThings[5].range,$scope.priceFilter.min=$scope.priceFilter.lower_price_bound=priceFilterList[0],$scope.priceFilter.top=$scope.priceFilter.upper_price_bound=priceFilterList[1],$scope.Duration.min=$scope.Duration.lower_day_bound=daysFilterList[0],$scope.Duration.top=$scope.Duration.upper_day_bound=daysFilterList[1]}):$http.get("https://api.kesari.in/route/inventory/getAllFiltersWithSectorWeb/?query=zone=["+$stateParams.tourName+"]").success(function(awesomeThings){$scope.priceFilterList=awesomeThings[2].list[0].rangeUpto,$scope.daysFilterList=awesomeThings[3].list[0].range;var priceFilterList=awesomeThings[2].range,daysFilterList=awesomeThings[3].range;$scope.specialityFilterList=awesomeThings[4].range,$scope.departureFilterList=awesomeThings[6].range,$scope.subCategory=awesomeThings[5].range,$scope.priceFilter.min=$scope.priceFilter.lower_price_bound=priceFilterList[0],$scope.priceFilter.top=$scope.priceFilter.upper_price_bound=priceFilterList[1],$scope.Duration.min=$scope.Duration.lower_day_bound=daysFilterList[0],$scope.Duration.top=$scope.Duration.upper_day_bound=daysFilterList[1],mainquery=$stateParams.tourName})}else $stateParams.tourName&&$http.get("https://api.kesari.in/route/inventory/getAllFiltersWithSectorWeb/?query=zone=["+$stateParams.tourName+"]").success(function(awesomeThings){$scope.priceFilterList=awesomeThings[2].list[0].rangeUpto,$scope.daysFilterList=awesomeThings[3].list[0].range;var daysFilterList=awesomeThings[3].range,priceFilterList=awesomeThings[2].range;$scope.specialityFilterList=awesomeThings[4].range,$scope.departureFilterList=awesomeThings[6].range,$scope.subCategory=awesomeThings[5].range,$scope.priceFilter.min=$scope.priceFilter.lower_price_bound=priceFilterList[0],$scope.priceFilter.top=$scope.priceFilter.upper_price_bound=priceFilterList[1],$scope.Duration.min=$scope.Duration.lower_day_bound=daysFilterList[0],$scope.Duration.top=$scope.Duration.upper_day_bound=daysFilterList[1],mainquery=$stateParams.tourName});var limit=0;$scope.disableButton=!1,$scope.allPackages=[],mainPrice||(mainPrice=""),fromPrice||(fromPrice=""),toPrice||(toPrice="");var searchPageView=0;if($location.path().indexOf("/query=")!=-1&&(searchPageView=1),1==searchPageView&&($scope.modifiedMainquery?($scope.hasparameter=!1,$scope.modifiedMainquery.indexOf(",")!=-1?$scope.regionListView=$scope.modifiedMainquery.split(","):$scope.regionListView[0]=$scope.modifiedMainquery,mainPrice.indexOf(",")!=-1?($scope.priceListView=mainPrice.split(","),$scope.priceListView=fromToPrice):$scope.priceListView[0]=mainPrice,$scope.priceListView1=fromToPrice,$http.get("https://api.kesari.in/route/filterData/getFilteredData/?sectors=["+$scope.modifiedMainquery+"]&price=["+mainPrice+"]&fromPrice="+fromPrice+"&toPrice="+toPrice+"&skip="+limit+"&dateOfTravel="+getDate+"&travelMonth="+getMonth+"&days=["+getDuration+"]&fromDays="+fromDay+"&toDays="+toDay+"&brand=["+getBrand+"]&exRegion=["+getdeparture+"]&subCategory=["+getsubCategory+"]").success(function(filterData){0==filterData.length&&($scope.message="Tour Packages are coming soon !!!"),$scope.TourZoneSeries=filterData,$scope.total=$scope.TourZoneSeries.length,$scope.loading=!1,tourzoneSort(),limit+=30,$scope.TourZoneSeries.length>=30&&($scope.loadMore=function(){$http.get("https://api.kesari.in/route/filterData/getFilteredData/?sectors=["+$scope.modifiedMainquery+"]&price=["+mainPrice+"]&fromPrice="+fromPrice+"&toPrice="+toPrice+"&skip="+limit+"&dateOfTravel="+getDate+"&travelMonth="+getMonth+"&days=["+getDuration+"]&fromDays="+fromDay+"&toDays="+toDay+"&brand=["+getBrand+"]&exRegion=["+getdeparture+"]&subCategory=["+getsubCategory+"]").success(function(filterData){$scope.TourZoneSeries=$scope.TourZoneSeries.concat(filterData),$scope.total=$scope.TourZoneSeries.length,tourzoneSort(),0==filterData&&($scope.disableButton=!0),limit+=30})})})):$scope.hasparameter||($scope.hasparameter=!1,mainPrice.indexOf(",")!=-1?$scope.priceListView=mainPrice.split(","):$scope.priceListView[0]=mainPrice,$http.get("https://api.kesari.in/route/filterData/getFilteredData/?sectors=["+$stateParams.tourName+"]&price=["+mainPrice+"]&fromPrice="+fromPrice+"&toPrice="+toPrice+"&skip="+limit+"&dateOfTravel="+getDate+"&travelMonth="+getMonth+"&days=["+getDuration+"]&fromDays="+fromDay+"&toDays="+toDay+"&brand=["+getBrand+"]&exRegion=["+getdeparture+"]&subCategory=["+getsubCategory+"]").success(function(filterData){0==filterData.length&&($scope.message="Tour Packages are coming soon !!!"),$scope.TourZoneSeries=filterData,$scope.total=$scope.TourZoneSeries.length,$scope.totalPackage=$scope.total,tourzoneSort(),limit+=30,$scope.loading=!1,$scope.TourZoneSeries.length>=30&&($scope.loadMore=function(){$http.get("https://api.kesari.in/route/filterData/getFilteredData/?sectors=["+$stateParams.tourName+"]&price=["+mainPrice+"]&fromPrice="+fromPrice+"&toPrice="+toPrice+"&skip="+limit+"&dateOfTravel="+getDate+"&travelMonth="+getMonth+"&days=["+getDuration+"]&fromDays="+fromDay+"&toDays="+toDay+"&brand=["+getBrand+"]&exRegion=["+getdeparture+"]&subCategory=["+getsubCategory+"]").success(function(filterData){$scope.TourZoneSeries=$scope.TourZoneSeries.concat(filterData),$scope.total=$scope.TourZoneSeries.length,tourzoneSort(),0==filterData&&($scope.disableButton=!0),limit+=30})})}))),$scope.loaddom=function(name,status){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|")),url="",count=0;Object.keys($scope.selection.dom).forEach(function(data){1==$scope.selection.dom[data]&&data&&""!=data&&(url+=0==count?data:","+data,count++)}),$scope.filterDataArray?(""!=$scope.filterDataArray.indian?$scope.filterDataArray.indian=url:$scope.filterDataArray.indian=url,basePageUrl=basePageUrl?basePageUrl+"query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange=|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType=|category=":$location.path()+"/query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange=|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType=|category=",$location.path(basePageUrl)):$location.path()},!$location.path().indexOf("world=")>-1&&!$location.path().indexOf("indian=")>-1){var process=$scope.tour.tourName;$scope.selection.inter=$scope.selection.inter||{},$scope.selection.dom=$scope.selection.dom||{},$scope.regionList=$scope.regionList||[],$scope.TourZoneSeries=$scope.TourZoneSeries||[],$location.path().indexOf("/query=")==-1&&(1==$location.path().indexOf("World-Tours")?$scope.selection.inter[process]=!0:$scope.selection.dom[process]=!0)}$scope.getButtonLabel=function(label){var priceFilterListData="";return $scope.priceFilterList.forEach(function(priceFilterList){priceFilterList.value==label&&(priceFilterListData=priceFilterList.list)}),!(!priceFilterListData||""==priceFilterListData)&&priceFilterListData},$scope.subCategory=[],$scope.getButtonLabelDesc=function(subcat){var subCatageriesData="";return $scope.subCategory.forEach(function(subCategoriesFilterList){subCategoriesFilterList.value==subcat&&(subCatageriesData=subCategoriesFilterList.description,$scope.description=subCatageriesData)}),!(!subCatageriesData||""==subCatageriesData)&&subCatageriesData},$scope.chcekedPrice=function(range,status){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|")),url="",count=0;Object.keys($scope.selection.range).forEach(function(data){1==$scope.selection.range[data]&&data&&""!=data&&(url+=0==count?data:","+data,count++)}),$scope.filterDataArray?(""!=$scope.filterDataArray.priceRange?$scope.filterDataArray.priceRange=url:$scope.filterDataArray.priceRange=url,basePageUrl=basePageUrl?basePageUrl+"query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange="+$scope.filterDataArray.priceRange+"|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType="+$scope.filterDataArray.departureType+"|category="+$scope.filterDataArray.category:$location.path()+"/query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange="+$scope.filterDataArray.priceRange+"|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType="+$scope.filterDataArray.departureType+"|category="+$scope.filterDataArray.category,$location.path(basePageUrl)):$location.path()},$scope.chcekedDuration=function(duration,status){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|")),url="",count=0;Object.keys($scope.selection.duration).forEach(function(data){1==$scope.selection.duration[data]&&data&&""!=data&&(url+=0==count?data:","+data,count++)}),$scope.filterDataArray?(""!=$scope.filterDataArray.dayRange?$scope.filterDataArray.dayRange=url:$scope.filterDataArray.dayRange=url,basePageUrl=basePageUrl?basePageUrl+"query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange="+$scope.filterDataArray.priceRange+"|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType="+$scope.filterDataArray.departureType+"|category="+$scope.filterDataArray.category:$location.path()+"/query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange="+$scope.filterDataArray.priceRange+"|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType="+$scope.filterDataArray.departureType+"|category="+$scope.filterDataArray.category,$location.path(basePageUrl)):$location.path()},$scope.searchBrand=function(Brand,status){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|")),url="",count=0;Object.keys($scope.selection.brand).forEach(function(data){1==$scope.selection.brand[data]&&data&&""!=data&&(url+=0==count?data:","+data,count++)}),$scope.filterDataArray?(""!=$scope.filterDataArray.brandType?$scope.filterDataArray.brandType=url:$scope.filterDataArray.brandType=url,basePageUrl=basePageUrl?basePageUrl+"query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange="+$scope.filterDataArray.priceRange+"|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType="+$scope.filterDataArray.departureType+"|category="+$scope.filterDataArray.category:$location.path()+"/query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange="+$scope.filterDataArray.priceRange+"|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType="+$scope.filterDataArray.departureType+"|category="+$scope.filterDataArray.category,$location.path(basePageUrl)):$location.path()},$scope.searchDeparture=function(Departure,status){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|")),url="",count=0;Object.keys($scope.selection.departure).forEach(function(data){1==$scope.selection.departure[data]&&data&&""!=data&&(url+=0==count?data:","+data,count++)}),$scope.filterDataArray?(""!=$scope.filterDataArray.departureType?$scope.filterDataArray.departureType=url:$scope.filterDataArray.departureType=url,basePageUrl=basePageUrl?basePageUrl+"query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange="+$scope.filterDataArray.priceRange+"|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType="+$scope.filterDataArray.departureType+"|category="+$scope.filterDataArray.category:$location.path()+"/query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange="+$scope.filterDataArray.priceRange+"|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType="+$scope.filterDataArray.departureType+"|category="+$scope.filterDataArray.category,$location.path(basePageUrl)):$location.path()},$scope.categoryFilter=function(name,status){var basePageUrl=$location.path().substring(0,$location.path().indexOf("query=|"));$scope.filterDataArray.category=name,$scope.filterDataArray?(basePageUrl=basePageUrl?basePageUrl+"query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange="+$scope.filterDataArray.priceRange+"|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType="+$scope.filterDataArray.departureType+"|category="+$scope.filterDataArray.category:$location.path()+"/query=|world="+$scope.filterDataArray.world+"|indian="+$scope.filterDataArray.indian+"|priceRange="+$scope.filterDataArray.priceRange+"|fromToPrice="+$scope.filterDataArray.fromToPrice+"|dateOfTravel="+$scope.filterDataArray.dateOfTravel+"|travelMonth="+$scope.filterDataArray.travelMonth+"|dayRange="+$scope.filterDataArray.dayRange+"|fromToDay="+$scope.filterDataArray.fromToDay+"|brandType="+$scope.filterDataArray.brandType+"|departureType="+$scope.filterDataArray.departureType+"|category="+$scope.filterDataArray.category,$location.path(basePageUrl)):$location.path()}}).controller("groupTourCtrl",["$scope","DataService","smoothScroll","$http","$window","$cookieStore","$stateParams",function(a,ht,smoothScroll,htp,wdw,$cookieStore){wdw.scrollTo(0,0),a.interNationalLoaded=!1,a.domesticLoaded=!1,a.startsWith=function(state,viewValue){return state.substr(0,viewValue.length).toLowerCase()==viewValue.toLowerCase()},a.awesomeThings=[],
a.price=[],a.tZone=[],a.filterPrice=!1,a.lower_price_bound=0,a.upper_price_bound=0;var month=["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];a.result=[],a.selectedTour="",a.AllZone=[],a.priceFilter={lower_price_bound:0,upper_price_bound:0,top:0,min:0},a.search=function(){a.startsWith=function(state,viewValue){return state.substr(0,viewValue.length).toLowerCase()==viewValue.toLowerCase()},a.result=[],a.selectedTour.name&&(a.selectedTour=a.selectedTour.name),a.AllZone.forEach(function(tour){tour.name.indexOf(a.selectedTour)>-1&&a.result.push(tour)}),a.result.sortOn("COST_2DAY"),a.total=a.result.length,""==a.selectedTour&&a.reset()},a.loading=!0,a.loadingDomestic=!1,ht.getData("webHeaderMenu/getWebPackages/").then(function(awesomeThings){a.iZone=a.interZone=awesomeThings.INTERNATION_PACKAGE,a.interNationalLoaded=!0,a.interZone.forEach(function(zone){if(zone.pass="America"==zone.name?"USA":zone.name,0==a.lower_price_bound?(a.lower_price_bound=zone.COST_2DAY,a.priceFilter.lower_price_bound=parseInt(zone.COST_2DAY)):a.lower_price_bound>zone.COST_2DAY&&(a.lower_price_bound=zone.COST_2DAY,a.priceFilter.lower_price_bound=parseInt(zone.COST_2DAY)),0==a.upper_price_bound?(a.upper_price_bound=parseInt(zone.COST_2DAY),a.priceFilter.upper_price_bound=parseInt(zone.COST_2DAY)):a.upper_price_bound<zone.COST_2DAY&&(a.upper_price_bound=parseInt(zone.COST_2DAY),a.priceFilter.upper_price_bound=parseInt(zone.COST_2DAY)),a.price.push(zone.COST_2DAY),zone.tour="World-Tours",zone.FirstDate){var start=zone.FirstDate.split("-");start[1]<10&&(start[1]=10-start[1]),zone.FirstDate=month[start[1]]+""+start[0]}if(zone.LastDate){var end=zone.LastDate.split("-");end[1]<10&&(end[1]=10-end[1]),zone.LastDate=month[end[1]]+""+end[0]}}),a.loading=!1,a.dZone=a.domZone=awesomeThings.DOMESTIC_PACKAGE,a.domesticLoaded=!0,a.domZone.forEach(function(zone){zone.pass=zone.name;"https://www.kesari.in/India-Tours/"+zone.pass+"-Tours";if(a.price.push(zone.COST_2DAY),zone.tour="India-Tours",zone.FirstDate){var start=zone.FirstDate.split("-");start[1]<10&&(start[1]=10-start[1]),zone.FirstDate=month[start[1]]+""+start[0]}if(zone.LastDate){var end=zone.LastDate.split("-");end[1]<10&&(end[1]=10-end[1]),zone.LastDate=month[end[1]]+""+end[0]}}),a.loadingDomestic=!0}).finally(function(){Array.prototype.push.apply(a.AllZone,a.domZone),Array.prototype.push.apply(a.AllZone,a.interZone),a.total=a.AllZone.length-1,a.priceFilter.min=a.priceFilter.lower_price_bound,a.priceFilter.top=a.priceFilter.upper_price_bound,a.AllZone.forEach(function(zone){0==a.lower_price_bound?(a.lower_price_bound=zone.COST_2DAY,a.priceFilter.lower_price_bound=a.lower_price_bound):a.lower_price_bound<zone.COST_2DAY&&(a.lower_price_bound=zone.COST_2DAY),0==a.upper_price_bound?a.upper_price_bound=zone.COST_2DAY:a.upper_price_bound>zone.COST_2DAY&&(a.upper_price_bound=zone.COST_2DAY)})}),a.onSliderChange=function(){a.filterPrice=!0,a.result=[],a.AllZone.forEach(function(tour){void 0!=tour.COST_2DAY&&tour.COST_2DAY<=a.priceFilter.top&&tour.COST_2DAY>=a.priceFilter.min&&(a.result.push(tour),a.total=a.result.length)}),a.result.sortOn("COST_2DAY")},a.translate=function(value){return"â‚¹"+value.toLocaleString()},Array.prototype.sortOn=function(key){this.sort(function(a,b){return a[key]<b[key]?-1:a[key]>b[key]?1:0})},a.reset=function(){a.result=[],a.selectedTour="",a.total=a.AllZone.length-1,a.priceFilter.min=a.priceFilter.lower_price_bound,a.priceFilter.top=a.priceFilter.upper_price_bound}}]).controller("TourThankyouCtrl",function($scope,$location,$http,$stateParams,$timeout){$scope.user,$scope.valid=!1,$http.get("https://login.kesari.in/route/gitenquiry/"+$stateParams.id).success(function(data,status){200==status?($scope.valid=!0,$scope.user=data.Name,$timeout(function(){$location.path("/")},3e5)):$location.path("/"),setTimeout(function(){$(".alert").alert("close"),window.history.go(-1)},5e3)}).error(function(data){$http.get("https://api.kesari.in/route/gitenquiry/"+$stateParams.id).success(function(data,status){200==status?($scope.valid=!0,$scope.user=data.Name,$timeout(function(){$location.path("/")},3e5)):$location.path("/")})})}).controller("landingPageCtrl",function($scope,$http,$stateParams,$modal,$log,DataService,$location,$window,$cookieStore,$state){var source=$location.search();$scope.dataLoaded={},$scope.loaded=!1,source.url=$location.path();$location.path();$scope.to17=!1,$scope.errors={},$scope.fbtm=!1,$scope.showShare=function(){$scope.fbtm=$scope.fbtm===!1},$scope.disableButton=!1,$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.minDate=new Date,$scope.maxDate=new Date(2020,5,22),$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0],$scope.example={value:new Date,anniversary:new Date},$scope.open=function(){$scope.opened=!0},$http.get("https://api.kesari.in/route/webLandingPage/webLandingPage/"+$stateParams.tourName).success(function(data,status){$scope.data=data,$scope.trcd=data.tours[0].tourcodes,$scope.trid=$scope.trcd[0].TOUR_ID}).error(function(data,status){$state.go("redirect",{id:$stateParams.tourName})}),$scope.open2=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/touritinerary/ad-landing.html",controller:"gitInquiryCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start")},function(){$log.info("Modal dismissed at: "+new Date)})},$(window).scroll(function(event){var scroll=$(window).scrollTop();scroll<500||void 0==scroll?$scope.showUpArrow=!1:$scope.showUpArrow=!0,$scope.$apply()}),$scope.scroll=function(scrollDuration){$("html, body").animate({scrollTop:0},600)},$scope.leadChecking=function(){ga("send","event",{eventCategory:"lead",eventAction:"submit",eventLabel:"inquiryform",eventValue:1})},$scope.save=function(form){$scope.leadChecking(),form.$valid&&0==$scope.disableButton&&($scope.Inquiry.basedUpon=$stateParams.tourName,$scope.Inquiry.url="https://www.kesari.in"+source.url,$scope.Inquiry.utmsearch=source,$scope.disableButton=!0,$http.post("https://login.kesari.in/route/gitenquiry/",$scope.Inquiry).success(function(data,status){data&&(source.utm_source?$http.post("https://login.kesari.in/route/utmdashboard/",source).success(function(data1,status){data1&&$location.path("thankyou/"+data.message)}):$location.path("thankyou/"+data.message))}).error(function(data,status){$http.post("https://api.kesari.in/route/gitenquiry/",$scope.Inquiry).success(function(data,status){data&&$uibModalInstance.close(!0),$location.path("thankyou/"+data.message)})}))}}),angular.module("websiteApp").controller("jlPricingCtrl",function($scope,$modal,items,$modalInstance){$scope.items=items.data,$scope.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("websiteApp").controller("DatePricingCtrl",function($scope,$modal,items,$modalInstance){$scope.items=items.data,$scope.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("websiteApp").controller("itineraryPopUpCtrl",function($scope,$modal,items,$modalInstance,$location,$cookieStore,DataService){if($scope.tourCode=items.data.TOURCODE,$scope.tourName=items.data.TM_ZONE,$scope.seeAll=function(region){"I"==region?$location.path("/World-Tours/"+$scope.tour.split(" ").join("-")+"-Tours"):"D"==region?$location.path("/India-Tours/"+$scope.tour.split(" ").join("-")+"-Tours"):"spl"==region&&$location.path("/Speciality-Tours/"+$scope.tour.split(" ").join("-")+"-Tours")},items.data.TOURCODE&&items.data.TM_ZONE){$scope.url="";items.data.F_BRAND.indexOf("Speciality-Tours")>-1?($location.path().indexOf("tourIti2017")>-1?$scope.url="inventory/getTourPackageData17/0/Brand:"+$scope.tour.zone.split("-").join(" ")+"/"+$scope.tour.code.split("-").join(" "):$scope.url="inventory/getTourPackageData/0/Brand:"+$scope.tour.zone.split("-").join(" ")+"/"+$scope.tour.code.split("-").join(" "),$cookieStore.put("tour",{type:"Speciality-Tours",zone:items.data.TOURCODE,tourcode:$scope.tour.code.split("-").join(" "),path:$location.path()})):($location.path().indexOf("tourIti2017")>-1?$scope.url="inventory/getTourPackageData17/0/"+items.data.TM_ZONE.split("-").join(" ")+"/"+items.data.TOURCODE.split("-").join(" "):$scope.url="inventory/getTourPackageData/0/"+items.data.TM_ZONE.split("-").join(" ")+"/"+items.data.TOURCODE,$cookieStore.put("tour",{type:"Group-Tours",zone:items.data.TM_ZONE,tourcode:items.data.TOURCODE.split("-").join(" "),path:$location.path()})),DataService.getData($scope.url).then(function(awesomeThings){$scope.tourData=awesomeThings[0],$scope.tourData&&$scope.tourData.tour_usp&&($scope.tourData.usp=$scope.tourData.tour_usp),$scope.tourDate=[];$scope.tourData&&$scope.tourData.TOURMAS0&&$scope.tourData.TOURMAS0.forEach(function(date){if(null!=date){var tempDeparture=date.TM_SDESC?date.TM_SDESC.split("-"):"";date.departure=tempDeparture[0];var price=parseInt(date.COST_2DAY)-parseInt(date.DISC_2DAY),tempDate=new Date(date.TM_DT1.substring(0,date.TM_DT1.indexOf("T")));tempDate>new Date&&""===date.TM_FULL&&(void 0!=date.bonanza_cost&&null!=date.bonanza_cost&&" "!=date.bonanza_cost?$scope.tourDate.push({date:date.TM_DT1.substring(0,date.TM_DT1.indexOf("T")),COST_2DAY:date.COST_2DAY,DISC_2DAY:price,TM_TCD:date.TM_TCD,tm_days:date.TM_DAYS,value:new Date(date.TM_DT1).getMonth()+1,departure:date.departure,category:date.TM_FINCATG,bonanza_cost:date.bonanza_cost}):$scope.tourDate.push({date:date.TM_DT1.substring(0,date.TM_DT1.indexOf("T")),COST_2DAY:date.COST_2DAY,DISC_2DAY:price,TM_TCD:date.TM_TCD,tm_days:date.TM_DAYS,value:new Date(date.TM_DT1).getMonth()+1,departure:date.departure,category:date.TM_FINCATG}));new Date(date.TM_DT1).getMonth()}}),$scope.tourDate=$scope.tourDate.sort(function(a,b){var c=new Date(a.date),d=new Date(b.date);return c-d}),$scope.Iti=$scope.tourData.ITINERARY_NEW[0].itnr,$scope.itiLoaded=!0,$scope.dayIti=[],$scope.dayIti2=[],$scope.dayIti3=[],$scope.dayIti4=[],$scope.tourData.ITINERARY_NEW[1]&&($scope.Iti2=$scope.tourData.ITINERARY_NEW[1].itnr),$scope.tourData.ITINERARY_NEW[2]&&($scope.Iti3=$scope.tourData.ITINERARY_NEW[2].itnr),$scope.tourData.ITINERARY_NEW[3]&&($scope.Iti4=$scope.tourData.ITINERARY_NEW[3].itnr),$scope.days=$scope.Iti.TM_DAYS,$scope.nights=parseInt($scope.Iti.TM_DAYS)-1,$scope.stays=$scope.Iti.STAY1+$scope.Iti.STAY2+$scope.Iti.STAY3,$scope.Iti.STAY4+$scope.Iti.STAY5+$scope.Iti.STAY6,$scope.stays=String($scope.stays).replace(/<[^>]+>/gm,""),$scope.dayIti=$scope.tourData.ITINERARY_NEW[0].itnr.days,$scope.dayIti&&($scope.dayItiValidity={from:new Date($scope.tourData.ITINERARY_NEW[0].itnr.valid_from),to:new Date($scope.tourData.ITINERARY_NEW[0].itnr.valid_to)}),$scope.Iti2&&($scope.dayIti2=$scope.tourData.ITINERARY_NEW[1].itnr.days,$scope.dayIti2Validity={from:new Date($scope.tourData.ITINERARY_NEW[1].itnr.valid_from),to:new Date($scope.tourData.ITINERARY_NEW[1].itnr.valid_to)}),$scope.Iti3&&($scope.dayIti3=$scope.tourData.ITINERARY_NEW[2].itnr.days,$scope.dayIti3Validity={from:new Date($scope.tourData.ITINERARY_NEW[2].itnr.valid_from),to:new Date($scope.tourData.ITINERARY_NEW[2].itnr.valid_to)}),$scope.Iti4&&($scope.dayIti4=$scope.tourData.ITINERARY_NEW[3].itnr.days,$scope.dayIti4Validity={from:new Date($scope.tourData.ITINERARY_NEW[3].itnr.valid_from),to:new Date($scope.tourData.ITINERARY_NEW[3].itnr.valid_to)})})}$scope.cancel=function(){$modalInstance.dismiss("cancel")}}).controller("mlandingPageCtrl",function(smoothScroll){smoothScroll.scrollTo("start")}).controller("dubaiVatCtrl",function(smoothScroll){}),angular.module("websiteApp").filter("unsafe",function($sce){return function(val){return $sce.trustAsHtml(val)}}),angular.module("websiteApp").filter("customFilter",["$filter",function($filter){return function(input){if(input)return input.replace(/[\. ,:-]+/g,"-").replace("'","")}}]).controller("tourElasticSearchCtrl",function($scope,$http,$stateParams,$location,$state,$log,$modal,DataService,smoothScroll){$scope.query=$stateParams.query,$scope.awesomeThings=[],$scope.interTourStatus=[],$http.get("https://api.kesari.in/route/elastic/getProductSearch/"+$scope.query).success(function(awesomeThings){$scope.interTourStatus=awesomeThings,0==awesomeThings.length&&($scope.loading=!1,$scope.message="Tour Packages are coming soon !!!")}),DataService.getData("webHeaderMenu/getWebPackages/").then(function(awesomeThings){$scope.iZone=$scope.interZone=awesomeThings.INTERNATION_PACKAGE,$scope.interNationalLoaded=!0,$scope.loading=!1,$scope.dZone=$scope.domZone=awesomeThings.DOMESTIC_PACKAGE,$scope.domesticLoaded=!0,$scope.loadingDomestic=!0}),$scope.go=function(TOURCODE,TM_ZONE,TOURNAME){$state.go("tourIti",{code:TOURCODE,type:"Group-Tours",zone:TM_ZONE.split(" ").join("-"),name:TOURNAME.split(" - ").join("-").trim().split(" ").join("-")})},$scope.open2=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/touritinerary/ad-landing.html",controller:"gitInquiryCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start"),$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.open3=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/tour/jlPricing.html",controller:"jlPricingCtrl",size:"md",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})}}),angular.module("websiteApp").controller("ModalInstanceCtrl",function($state,$window,$scope,$http,$modalInstance,items,DataService){$scope.tourSlab=[],$scope.showDate="",$scope.items=items,$scope.date=$scope.items.date.split("-"),$scope.showDate=$scope.date[2]+""+$scope.date[1]+$scope.date[0].substring(2);$scope.currentRate={},$scope.currentRate.singleAdult=0,$scope.currentRate.twoAdult=0,$scope.currentRate.threeAdult=0,$scope.currentRate.child=0,$scope.currentRate.infant=0,$scope.currentRate.childWB=0,$scope.converionRate=0,$scope.flag=!0,$scope.tempInr={},$scope.tempForeign={},$scope.curr=null,$scope.showTourCode=null,$scope.showLoader=!0,$scope.tourID,$scope.print=function(){var printWindow=$window.open("","","height=400,width=800,scrollbars=1");printWindow.document.write("<html><head><title></title>"),printWindow.document.write('<style type="text/css" media="print,screen">html {overflow: -moz-scrollbars-vertical;}body table{width:100%;}body th,td{border-bottom:1px solid grey;}</style>'),printWindow.document.write("</head><body>"),printWindow.document.write(angular.element("#print-worldTour").html()),printWindow.document.write("</body></html>"),printWindow.print()},$scope.print1=function(){var printWindow=$window.open("","","height=400,width=800,scrollbars=1");printWindow.document.write("<html><head><title></title>"),printWindow.document.write('<style type="text/css" media="print,screen">html {overflow: -moz-scrollbars-vertical;}body table{width:100%;}body th,td{border-bottom:1px solid grey;}</style>'),printWindow.document.write("</head><body>"),printWindow.document.write(angular.element("#print-worldTour").html()),printWindow.document.write("</body></html>"),printWindow.print()};var url="rsData/getTourMasZeroDataWithTCDForPriceChart/"+$scope.items.TM_TCD;DataService.getData(url).then(function(data){if($scope.type=[],$scope.priceInr=[],$scope.priceForex=[],$scope.forexToInr=[],$scope.priceWithoutDisc=[],$scope.discArr=[],$scope.netpayable=[],$scope.forexcode=data.PRICE_CHART[0].forex_code,data.PRICE_CHART.forEach(function(price){$scope.type.push({name:price.type}),$scope.priceInr.push({amt:price.price_inr}),$scope.priceForex.push({amt:price.price_forex,toInr:price.price_forex_inr}),$scope.priceWithoutDisc.push({amt:price.price_without_disc}),$scope.discArr.push({amt:price.curr_disc}),$scope.netpayable.push({amt:price.price_with_disc})}),$scope.tourID=data.TOURMAS0[0].TM_ID,$scope.showTourName=data.TOURNAME[0].TOURNAME,$scope.show=data,$scope.showLoader=!1,data.PRICE_CHART.length>0)for(var index=null,prev=null,i=0;i<data.PRICE_CHART.length;i++)"INR"!=data.PRICE_CHART[i].TC_CURCODE&&($scope.tempForeign=data.PRICE_CHART[i],index=i,0===index&&(prev=1),1===index&&(prev=0),$scope.tempInr=data.PRICE_CHART[prev],$scope.converionRate=data.CURTABLE[0].CN_SELL,$scope.currentRate.singleAdult=parseInt(data.PRICE_CHART[index].TC_SING)*$scope.converionRate+data.PRICE_CHART[prev].TC_SING,$scope.currentRate.twoAdult=parseInt(data.PRICE_CHART[index].TC_AD)*$scope.converionRate+parseInt(data.PRICE_CHART[prev].TC_AD),$scope.currentRate.threeAdult=parseInt(data.PRICE_CHART[index].TC_AD3)*$scope.converionRate+parseInt(data.PRICE_CHART[prev].TC_AD3),$scope.currentRate.child=parseInt(data.PRICE_CHART[index].TC_CH1)*$scope.converionRate+parseInt(data.PRICE_CHART[prev].TC_CH1),$scope.currentRate.infant=parseInt(data.PRICE_CHART[index].TC_CH2)*$scope.converionRate+parseInt(data.PRICE_CHART[prev].TC_CH2),$scope.currentRate.childWB=parseInt(data.PRICE_CHART[index].TC_CH1WB)*$scope.converionRate+parseInt(data.PRICE_CHART[prev].TC_CH1WB),$scope.flag=!1,$scope.rooms=[{title:"Room 1"}],$scope.count=$scope.rooms.length,"Honeymoon"!=data.TOURMAS0[0].TM_FINCATG&&"A2AHoneymoon"!=data.TOURMAS0[0].TM_FINCATG?$scope.list=[{title:"1 Adult",value:1,price:$scope.currentRate.singleAdult,base:$scope.currentRate.singleAdult},{title:"2 AdultS",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult},{title:"2 Adults + 1 Child",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult,child1:[{title:"Infant (0-2)",price:$scope.currentRate.infant},{title:"Child With bed",price:$scope.currentRate.childWB},{title:"Child Without Bed",price:$scope.currentRate.child}]},{title:"2 Adults + 2 Child",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult,child1:[{title:"Infant (0-2)",price:$scope.currentRate.infant},{title:"Child With bed",price:$scope.currentRate.childWB},{title:"Child Without Bed",price:$scope.currentRate.child}],child2:[{title:"Infant (0-2)",price:$scope.currentRate.infant},{title:"Child With bed",price:$scope.currentRate.childWB},{title:"Child Without Bed",price:$scope.currentRate.child}]},{title:"3 Adults",value:3,price:3*$scope.currentRate.threeAdult,base:$scope.currentRate.threeAdult}]:$scope.list=[{title:"2 AdultS",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult}],$scope.JL_Alerts=$scope.show.JL_ALERT[0].JL_1+$scope.show.JL_ALERT[0].JL_2+$scope.show.JL_ALERT[0].JL_3+$scope.show.JL_ALERT[0].JL_4+$scope.show.JL_ALERT[0].JL_5+$scope.show.JL_ALERT[0].JL_6+$scope.show.JL_ALERT[0].JL_7+$scope.show.JL_ALERT[0].JL_8+$scope.show.JL_ALERT[0].JL_9+$scope.show.JL_ALERT[0].JL_10+$scope.show.JL_ALERT[0].JL_11+$scope.show.JL_ALERT[0].JL_12+$scope.show.JL_ALERT[0].JL_13+$scope.show.JL_ALERT[0].JL_14+$scope.show.JL_ALERT[0].JL_15+$scope.show.JL_ALERT[0].JL_16+$scope.show.JL_ALERT[0].JL_17+$scope.show.JL_ALERT[0].JL_18);else data.PRICE_CHART&&($scope.tempInr.TC_SING=$scope.currentRate.singleAdult=data.TOURSLBD[0].RM_SING_1+data.TOURMAS0[0].ADDBIL_2DY,$scope.tempInr.TC_AD=$scope.currentRate.twoAdult=data.TOURSLBD[0].RM_AD_1+data.TOURMAS0[0].ADDBIL_2DY,$scope.tempInr.TC_AD3=$scope.currentRate.threeAdult=data.TOURSLBD[0].RM_AD3_1+data.TOURMAS0[0].ADDBIL_2DY,$scope.tempInr.TC_CH1WB=$scope.currentRate.childWB=data.TOURSLBD[0].RM_CH1_1+data.TOURMAS0[0].ADDBIL_2DY,$scope.tempInr.TC_CH1=$scope.currentRate.child=data.TOURSLBD[0].RM_CH2_1+data.TOURMAS0[0].ADDBIL_2DY,$scope.tempInr.TC_CH2=$scope.currentRate.infant=data.TOURSLBD[0].RM_CH3_1+data.TOURMAS0[0].ADDBIL_2DY,$scope.tempInr.TC_CH3=$scope.currentRate.infant1=data.TOURSLBD[0].RM_CH4_1,$scope.tempInr.TC_CH4=$scope.currentRate.ebed=data.TOURSLBD[0].RM_EBED_1,$scope.flag=!1,$scope.rooms=[{title:"Room 1",disable:!1}],$scope.count=$scope.rooms.length,"Honeymoon"!=data.TOURMAS0[0].TM_FINCATG&&"A2AHoneymoon"!=data.TOURMAS0[0].TM_FINCATG?$scope.list=[{title:"1 Adult",value:1,price:$scope.currentRate.singleAdult,base:$scope.currentRate.singleAdult},{title:"2 AdultS",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult},{title:"2 Adults + 1 Child",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult,child1:[{title:"Infant (0-2)",price:$scope.currentRate.infant},{title:"Child With bed",price:$scope.currentRate.childWB},{title:"Child Without Bed",price:$scope.currentRate.child}]},{title:"2 Adults + 2 Child",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult,child1:[{title:"Infant (0-2)",price:$scope.currentRate.infant},{title:"Child With bed",price:$scope.currentRate.childWB},{title:"Child Without Bed",price:$scope.currentRate.child}],child2:[{title:"Infant (0-2)",price:$scope.currentRate.infant},{title:"Child With bed",price:$scope.currentRate.childWB},{title:"Child Without Bed",price:$scope.currentRate.child}]},{title:"3 Adults",value:3,price:3*$scope.currentRate.threeAdult,base:$scope.currentRate.threeAdult}]:$scope.list=[{title:"2 AdultS",value:2,price:2*$scope.currentRate.twoAdult,base:$scope.currentRate.twoAdult}]);data.PRICE_CHART.forEach(function(disData){for(var i=1;i<=8;i++)$scope.tourSlab.push({start:disData["SEAT_"+i+"1"],ends:disData["SEAT_"+i+"2"],amt:disData["AMTDISC_"+i]}),console.log($scope.tourSlab)})}),$scope.ok=function(){$modalInstance.close($scope.selected.item)},$scope.price=parseInt($scope.items.COST_2DAY),$scope.indexPos={},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("websiteApp").controller("BonanzaModalInstanceCtrl",function($scope,$http,$window,$modalInstance,items,DataService){$scope.items=items;var url="rsData/getTourMasZeroDataWithTCDForPriceChart/"+items.TM_TCD;DataService.getData(url).then(function(data){$scope.data,$scope.TOURNAME=data.TOURNAME[0].TOURNAME," "!=data.TOURMAS0[0].bonanza_cost&&void 0!=data.TOURMAS0[0].bonanza_cost&&($scope.data=data.TOURMAS0[0])}),$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.print=function(){var printWindow=$window.open("","","height=400,width=800,scrollbars=1");printWindow.document.write("<html><head><title></title>"),printWindow.document.write('<style type="text/css" media="print,screen">html {overflow: -moz-scrollbars-vertical;}body table{width:100%;}body th,td{border-bottom:1px solid grey;}</style>'),printWindow.document.write("</head><body>"),printWindow.document.write(angular.element("#tobeprint").html()),printWindow.document.write("</body></html>"),printWindow.print()},$scope.print1=function(){var printWindow=$window.open("","","height=400,width=800,scrollbars=1");printWindow.document.write("<html><head><title></title>"),printWindow.document.write('<style type="text/css" media="print,screen">html {overflow: -moz-scrollbars-vertical;}body table{width:100%;}body th,td{border-bottom:1px solid grey;}</style>'),printWindow.document.write("</head><body>"),printWindow.document.write(angular.element("#tobeprint").html()),printWindow.document.write("</body></html>"),printWindow.print()}}),angular.module("websiteApp").controller("GuestLinkModalInstanceCtrl",function($scope,$http,$window,$modalInstance,items,$location){$scope.items=items,$scope.ok=function(){$modalInstance.close($scope.selected.item)},$scope.cancel=function(){$modalInstance.dismiss("cancel"),$location.path("//kesari.in/guestLink/Group-Tours/"+$scope.items)}}),angular.module("websiteApp").controller("guestLinkCtrl",["$scope","$window","$http","$location","$stateParams","$modal","$state","Lightbox","smoothScroll","$log","DataService","localStorageService","$cookieStore",function($scope,$window,$http,$location,$stateParams,$modal,$state,Lightbox,smoothScroll,$log,DataService,localStorageService,$cookieStore){smoothScroll.scrollTo("start"),$scope.show=!1,$scope.showMail=!1,$window.scrollTo(0,0),$scope.awesomeThings=[],$scope.itiLoaded=!1,$scope.simillar=[],$scope.tour=$stateParams,$scope.loading=!0,$scope.defaults=!0,$scope.value=null,$scope.showAlert=!1,$scope.selectedtour=$scope.tour.code,$scope.main_image=!1,$scope.loaded=!1,$scope.LoadMoreCalled=!0,$scope.rate=0,$scope.max=5,$scope.isReadonly=!1,$http.get("https://login.kesari.in/route/guestDetails/getGuestLink/"+$scope.tour.id).success(function(guest){$scope.itiLoaded=!0,$scope.guest=guest,console.log($scope.guest),guest.GuestData.forEach(function(data){""!=data.ITINERARY_NEW&&(data.ITINERARY_NEW[0].itnr.valid_from=new Date(data.ITINERARY_NEW[0].itnr.valid_from),data.ITINERARY_NEW[0].itnr.valid_to=new Date(data.ITINERARY_NEW[0].itnr.valid_to)),$scope.loading=!1,data.CHART=data,$scope.loading=!1})}).error(function(data){alert("something went wrong"),$location.path("/")}),$scope.loadMore=function(){$scope.LoadMoreCalled=!0,$scope.main_image=!0,$scope.guest.GuestData.forEach(function(data){DataService.getData("inventory/getTourPackageData/0/"+data.TM_ZONE+"/0").then(function(simillar){data.simillar=simillar,$scope.loaded=!0,$scope.main_image=!0,$scope.LoadMoreCalled=!1})})},$scope.showPriceChart=function(tour,index){$scope.loading=!0,$scope.selectedtour=tour,$http.get("https://api.kesari.in/route/rsData/getPriceChartForSeries/"+tour).success(function(data){$scope.guest.GuestData[index].CHART=data,$scope.guest.GuestData[index].CHART.TOURMAS0[0].PRICE_DATA={PRICE_CHART:data.PRICE_CHART,WEB_ALERTS:data.WEB_ALERTS},$scope.loading=!1})},$scope.get150img=function(img){return img.replace("uploads","uploads/150")},$scope.get980img=function(img){return img.replace("uploads","uploads/980")},$scope.hoveringOver=function(value){$scope.overStar=value,$scope.percent=100*(value/$scope.max),console.log("rating=="+$scope.overStar)},$scope.ratingStates=[{stateOn:"glyphicon-ok-sign",stateOff:"glyphicon-ok-circle"},{stateOn:"glyphicon-star",stateOff:"glyphicon-star-empty"},{stateOn:"glyphicon-heart",stateOff:"glyphicon-ban-circle"},{stateOn:"glyphicon-heart"},{stateOff:"glyphicon-off"}],$scope.setRating=function(rate){$scope.rate=rate,$scope.rate>0&&$http.post("https://login.kesari.in/route/guestDetails/rateYourCall/"+$scope.tour.id+"/"+$scope.rate).success(function(data,status){data&&alert("Thank you for your feedback")})}}]),angular.module("websiteApp").controller("tourItiCtrl",["$scope","$window","$http","$location","$stateParams","$modal","$state","Lightbox","smoothScroll","$log","DataService","localStorageService","$cookieStore",function($scope,$window,$http,$location,$stateParams,$modal,$state,Lightbox,smoothScroll,$log,DataService,localStorageService,$cookieStore){smoothScroll.scrollTo("start"),$scope.show=!1,$scope.showMail=!1,$window.scrollTo(0,0),$scope.awesomeThings=[],$scope.itiLoaded=!1,$scope.simillar=[],$scope.tour=$stateParams,$scope.tour.name=$scope.tour.name.split("-").join(" "),$scope.active="",$scope.to17=!1,$location.path().indexOf("tourIti2017")>-1&&($scope.to17=!0),$scope.selectedDate={},$scope.selectedValue={date:null},$scope.defaults=!0,$scope.value=null,$scope.month=[];var month=new Array;month[0]="Jan",month[1]="Feb",month[2]="Mar",month[3]="Apr",month[4]="May",month[5]="Jun",month[6]="Jul",month[7]="Aug",month[8]="Sep",month[9]="Oct",month[10]="Nov",month[11]="Dec",$scope.showAlert=!1,$scope.tourType=!1,$scope.breadcrum=$location.path().split("/"),$scope.seeCommon=function(region){"I"==region?($scope.breadcrum[3].indexOf("America")>-1&&($scope.breadcrum[3]=$scope.breadcrum[3].replace("America","USA")),$location.path("/World-Tours/"+$scope.breadcrum[3].split(" ").join("-")+"-Tours")):"D"==region?$location.path("/India-Tours/"+$scope.tour.zone.split(" ").join("-")+"-Tours"):"spl"==region&&"Economy-Tour"!=$scope.tour.zone?$location.path("/Speciality-Tours/"+$scope.tour.zone.split(" ").join("-")+"-Tours"):$location.path("/Speciality-Tours/Low-Price-Tours")},$scope.seeAll=function(region){"I"==region?$location.path("/World-Tours/"+$scope.tour.zone.split(" ").join("-")+"-Tours"):"D"==region?$location.path("/India-Tours/"+$scope.tour.zone.split(" ").join("-")+"-Tours"):"spl"==region&&"Economy-Tour"!=$scope.tour.zone?$location.path("/Speciality-Tours/"+$scope.tour.zone.split(" ").join("-")+"-Tours"):$location.path("/Speciality-Tours/Low-Price-Tours")};var locUrl=$location.path();if("/tourIti/Group-Tours/Europe/E5/ENCHANTING-EUROPE"!=locUrl&&"/tourIti/Group-Tours/Europe/P6/ENTICING-EUROPE"!=locUrl&&"/tourIti/Group-Tours/Europe/E9/HIGHLIGHTS-OF-EUROPE"!=locUrl&&"/tourIti/Group-Tours/Europe/P5/ICONS-OF-EUROPE"!=locUrl&&"/tourIti/Group-Tours/Europe/E8/GLIMPSES-OF-EUROPE"!=locUrl&&"/tourIti/Group-Tours/Europe/PB/SWISS-AUSTRIA"!=locUrl&&"/tourIti/Group-Tours/Europe/PT/BALTIC-EUROPE"!=locUrl&&"/tourIti/Group-Tours/Europe/PV/BUDAPEST-BRATISLAVA-VIENNA-PRAGUE"!=locUrl&&"/tourIti/Group-Tours/Europe/PY/MIDNIGHT-SUN"!=locUrl&&"/tourIti/Group-Tours/Europe/PC/BEST-OF-ICELAND"!=locUrl&&"/tourIti/Group-Tours/Europe/ZE/CENTRAL-EUROPE-WITH-DANUBE-RIVER-CRUISE"!=locUrl||$location.path("/World-Tours/Europe-Tours"),"/tourIti/Group-Tours/America/US/USA-WEST-COAST-WITH-DISNEY"!=locUrl&&"/tourIti/Group-Tours/America/UY/WEST-COAST-WITH-YSTONE-AND-RUSHMORE"!=locUrl&&"/tourIti/Group-Tours/America/UX/USA-WEST-COAST-WITH-MEXICAN-RIVIERA-CRUISE"!=locUrl||$location.path("/World-Tours/USA-Tours"),"/tourIti/Group-Tours/South-Africa-Kenya/VG/SOUTH-AFRICA-WITH-GONDWANA"==locUrl&&$location.path("/World-Tours/South-Africa-Kenya-Tours"),"/tourIti/Group-Tours/Australia-NewZealand/AV/AUSTRALIA-WITH-VIVID-FESTIVAL"==locUrl&&$location.path("/World-Tours/Australia-NewZealand-Tours"),"/tourIti/Group-Tours/Kashmir/K7/KASHMIR-ECONOMY"==locUrl&&$location.path("/India-Tours/Kashmir-Tours"),"/tourIti/Group-Tours/South-East-Asia/CI/HONEYMOON-BALI"==locUrl&&$location.path("/Speciality-Tours/Honeymoon-Special-Tours"),"/tourIti/Group-Tours/Europe/LR/BEST-OF-ICELAND-MFL"==locUrl&&$location.path("/Speciality-Tours/My-Fair-Lady-Tours"),"/tourIti/Group-Tours/America/UE/USA---EAST-COAST"==locUrl&&$location.path("/tourIti/Group-Tours/America/UE/USA-EAST-COAST"),"/tourIti/Group-Tours/America/UM/YELLOWSTONE-AND-MT.-RUSHMORE"==locUrl&&$location.path("/tourIti/Group-Tours/America/UM/YELLOWSTONE-AND-MOUNT-RUSHMORE"),"/tourIti/Group-Tours/America/UW/USA---WEST-COAST"==locUrl&&$location.path("/tourIti/Group-Tours/America/UW/USA-WEST-COAST"),"/tourIti/Group-Tours/Dubai/D5/DUBAI-FERRARI-WORLD-ABU-DHABI-&-YAS-WATERWORLD"==locUrl&&$location.path("/tourIti/Group-Tours/Dubai/D5/DUBAI-FERRARI-WORLD-ABU-DHABI-AND-YAS-WATERWORLD"),"/tourIti/Group-Tours/Europe/LV/SCANDINAVIA-RUSSIA---MY-FAIR-LADY"==locUrl&&$location.path("/tourIti/Group-Tours/Europe/LV/SCANDINAVIA-RUSSIA-MY-FAIR-LADY"),"/tourIti/Group-Tours/Europe/LY/MIDNIGHT-SUN---MY-FAIR-LADY"==locUrl&&$location.path("/tourIti/Group-Tours/Europe/LY/MIDNIGHT-SUN-MY-FAIR-LADY"),"/tourIti/Group-Tours/Europe/WL/CHOTA-BREAK---LONDON"==locUrl&&$location.path("/tourIti/Group-Tours/Europe/WL/CHOTA-BREAK-LONDON"),"/tourIti/Group-Tours/Nepal/LP/NEPAL---MY-FAIR-LADY"==locUrl&&$location.path("/tourIti/Group-Tours/Nepal/LP/NEPAL-MY-FAIR-LADY"),"/tourIti/Group-Tours/Seychelles/MY/SEYCHELLES-WITH-ABU-DHABI-&-DUBAI"==locUrl&&$location.path("/tourIti/Group-Tours/Seychelles/MY/SEYCHELLES-WITH-ABU-DHABI-AND-DUBAI"),"/tourIti/Group-Tours/South-East-Asia/LQ/SINGAPORE-THAILAND-MALAYSIA----MY-FAIR-LADY"==locUrl&&$location.path("/tourIti/Group-Tours/South-East-Asia/LQ/SINGAPORE-THAILAND-MALAYSIA-MY-FAIR-LADY"),"/tourIti/Group-Tours/South-East-Asia/TT/STUDENT-SPECIAL---THAILAND"==locUrl&&$location.path("/tourIti/Group-Tours/South-East-Asia/TT/STUDENT-SPECIAL-THAILAND"),"/tourIti/Group-Tours/South-East-Asia/CG/HONEYMOON---SINGAPORE"==locUrl&&$location.path("/tourIti/Group-Tours/South-East-Asia/CG/HONEYMOON-SINGAPORE"),"/tourIti/Group-Tours/Himachal/CE/SHIMLA-MANALI-HONEYMOON---ECONOMY-TOUR"==locUrl&&$location.path("/tourIti/Group-Tours/Himachal/CE/SHIMLA-MANALI-HONEYMOON-ECONOMY-TOUR"),"/tourIti/Group-Tours/Himachal/H6/SHIMLA-MANALI---ECONOMY"==locUrl&&$location.path("/tourIti/Group-Tours/Himachal/H6/SHIMLA-MANALI-ECONOMY"),
"/tourIti/Group-Tours/Himachal/H9/MAGICAL-MANALI---ECONOMY"==locUrl&&$location.path("/tourIti/Group-Tours/Himachal/H9/MAGICAL-MANALI-ECONOMY"),"/tourIti/Group-Tours/Himachal/Y3/SHIMLA-MANALI-HONEYMOON---ECONOMY-TOUR"==locUrl&&$location.path("/tourIti/Group-Tours/Himachal/Y3/SHIMLA-MANALI-HONEYMOON-ECONOMY-TOUR"),"/tourIti/Group-Tours/Himachal/Y3/SHIMLA-MANALI-HONEYMOON---ECONOMY-TOUR"==locUrl&&$location.path("/tourIti/Group-Tours/Himachal/Y3/SHIMLA-MANALI-HONEYMOON-ECONOMY-TOUR"),"/tourIti/Group-Tours/Nainital/B2/NAINITAL-MUSSOORIE-CORBETT--MY-FAIR-LADY"==locUrl&&$location.path("/tourIti/Group-Tours/Nainital/B2/NAINITAL-MUSSOORIE-CORBETT-MY-FAIR-LADY"),"/tourIti/Group-Tours/Nainital/BB/NAINITAL-MUSSOORIE-CORBETT---MY-FAIR-LADY"==locUrl&&$location.path("/tourIti/Group-Tours/Nainital/BB/NAINITAL-MUSSOORIE-CORBETT-MY-FAIR-LADY"),"/tourIti/Group-Tours/Nainital/NA/NAINITAL-CORBETT-PARK---PREMIUM"==locUrl&&$location.path("/tourIti/Group-Tours/Nainital/NA/NAINITAL-CORBETT-PARK-PREMIUM"),"/tourIti/Group-Tours/Nainital/NC/NAINITAL-CORBETT-PARK---ECONOMY-TOUR"==locUrl&&$location.path("/tourIti/Group-Tours/Nainital/NC/NAINITAL-CORBETT-PARK-ECONOMY-TOUR"),"/tourIti/Group-Tours/Gujarat/OB/SAURASHTRA-WITH-BHUJ-&-RANN-UTSAV"==locUrl&&$location.path("/tourIti/Group-Tours/Gujarat/OB/SAURASHTRA-WITH-BHUJ-AND-RANN-UTSAV"),"/tourIti/Group-Tours/Rajasthan/B1/RAJASTHAN-MEWAD-MARWAD---MY-FAIR-LADY"==locUrl&&$location.path("/tourIti/Group-Tours/Rajasthan/B1/RAJASTHAN-MEWAD-MARWAD-MY-FAIR-LADY"),"/tourIti/Group-Tours/Rajasthan/BA/RAJASTHAN-MEWAD-MARWAD---MY-FAIR-LADY"==locUrl&&$location.path("/tourIti/Group-Tours/Rajasthan/BA/RAJASTHAN-MEWAD-MARWAD-MY-FAIR-LADY"),"/tourIti/Group-Tours/Rajasthan/R6/RAJASTHAN-MEWAD---ECONOMY"==locUrl&&$location.path("/tourIti/Group-Tours/Rajasthan/R6/RAJASTHAN-MEWAD-ECONOMY"),"/tourIti/Speciality-Tours/Marigold/OB/SAURASHTRA-WITH-BHUJ-&-RANN-UTSAV"==locUrl&&$location.path("/tourIti/Speciality-Tours/Marigold/OB/SAURASHTRA-WITH-BHUJ-AND-RANN-UTSAV"),"/tourIti/Speciality-Tours/My-Fair-Lady/B2/NAINITAL-MUSSOORIE-CORBETT--MY-FAIR-LADY"==locUrl&&$location.path("/tourIti/Speciality-Tours/My-Fair-Lady/B2/NAINITAL-MUSSOORIE-CORBETT-MY-FAIR-LADY"),"/tourIti/Group-Tours/Dubai/D1/DUBAI-ABU-DHABI-WITH-THEME-PARKS"==locUrl&&$location.path("/tourIti/Group-Tours/Dubai-and-MiddleEast/D1/DUBAI-ABU-DHABI-WITH-THEME-PARKS"),"/tourIti/Group-Tours/Dubai/D2/DUBAI-WITH-SHARJAH-AND-ABU-DHABI"==locUrl&&$location.path("/tourIti/Group-Tours/Dubai-and-MiddleEast/D2/DUBAI-WITH-SHARJAH-AND-ABU-DHABI"),"/tourIti/Group-Tours/Dubai/D3/DUBAI"==locUrl&&$location.path("/tourIti/Group-Tours/Dubai-and-MiddleEast/D3/DUBAI"),"/tourIti/Group-Tours/Dubai/D4/DUBAI-WITH-DSF-AND-DUBAI-PARKS"==locUrl&&$location.path("/tourIti/Group-Tours/Dubai-and-MiddleEast/D4/DUBAI-WITH-DSF-AND-DUBAI-PARKS"),"/tourIti/Group-Tours/Dubai/D5/DUBAI-ABU-DHABI-FERRARI-PARK-&-YAS-WATERWORLD"==locUrl&&$location.path("/tourIti/Group-Tours/Dubai-and-MiddleEast/D5/DUBAI-ABU-DHABI-FERRARI-PARK-&-YAS-WATERWORLD"),"/tourIti/Group-Tours/Dubai/DG/DUBAI-WITH-FERRARI-WORLD-AND-BOLLYWOOD-PARK"==locUrl&&$location.path("/tourIti/Group-Tours/Dubai-and-MiddleEast/DG/DUBAI-WITH-FERRARI-WORLD-AND-BOLLYWOOD-PARK"),"/tourIti/Group-Tours/Dubai/DM/BEST-OF-OMAN"==locUrl&&$location.path("/tourIti/Group-Tours/Dubai-and-MiddleEast/DM/BEST-OF-OMAN"),"/tourIti/Group-Tours/Dubai/DO/DUBAI-ABU-DHABI-OMAN"==locUrl&&$location.path("/tourIti/Group-Tours/Dubai-and-MiddleEast/DO/DUBAI-ABU-DHABI-OMAN"),"/tourIti/Group-Tours/Dubai/DP/DUBAI-ABU-DHABI-WITH-BOLLYWOOD-&-FERRARI-PARK"==locUrl&&$location.path("/tourIti/Group-Tours/Dubai-and-MiddleEast/DP/DUBAI-ABU-DHABI-WITH-BOLLYWOOD-&-FERRARI-PARK"),"/tourIti/Group-Tours/Dubai/LD/DUBAI-ABU-DHABI-WITH-THEME-PARKS"==locUrl&&$location.path("/tourIti/Group-Tours/Dubai-and-MiddleEast/LD/DUBAI-ABU-DHABI-WITH-THEME-PARKS"),"/tourIti/Group-Tours/Dubai/TD/DUBAI-STUDENT-SPECIAL"==locUrl&&$location.path("/tourIti/Group-Tours/Dubai-and-MiddleEast/TD/DUBAI-STUDENT-SPECIAL"),"/tourIti/Group-Tours/Dubai/XD/DUBAI-SECOND-INNINGS"==locUrl&&$location.path("/tourIti/Group-Tours/Dubai-and-MiddleEast/XD/DUBAI-SECOND-INNINGS"),"/tourIti/Group-Tours/Middle-East/WU/TASHKENT-CHOTA-BREAK"==locUrl&&$location.path("/tourIti/Group-Tours/Dubai-and-MiddleEast/WU/TASHKENT-CHOTA-BREAK"),"/tourIti/Group-Tours/South-Africa-Kenya/LK/SOUTH-AFRICA-WITH-PILANESBERG-NATIONAL-MFL"==locUrl&&$location.path("/tourIti/Group-Tours/Africa/LK/SOUTH-AFRICA-WITH-PILANESBERG-NATIONAL-MFL"),"/tourIti/Group-Tours/South-Africa-Kenya/V1/S.AFRICA-KENYA-WITH-VICTORIA-FALLS"==locUrl&&$location.path("/tourIti/Group-Tours/Africa/V1/SOUTH-AFRICA-KENYA-WITH-VICTORIA-FALLS"),"/tourIti/Group-Tours/South-Africa-Kenya/VE/MYSTERIES-OF-EGYPT"==locUrl&&$location.path("/tourIti/Group-Tours/Africa/VE/MYSTERIES-OF-EGYPT"),"/tourIti/Group-Tours/South-Africa-Kenya/VK/KENYA-SAFARI"==locUrl&&$location.path("/tourIti/Group-Tours/Africa/VK/KENYA-SAFARI"),"/tourIti/Group-Tours/South-Africa-Kenya/VS/SOUTH-AFRICA-WITH-PILANESBURG-NATIONAL-PARK"==locUrl&&$location.path("/tourIti/Group-Tours/Africa/VS/SOUTH-AFRICA-WITH-PILANESBERG-NATIONAL-PARK"),"/tourIti/Group-Tours/South-Africa-Kenya/VT/TANZANIA-GREAT-MIGRATION-SPECIAL"==locUrl&&$location.path("/tourIti/Group-Tours/Africa/VT/TANZANIA-GREAT-MIGRATION-SPECIAL"),"/tourIti/Group-Tours/South-Africa-Kenya/VU/UGANDA-SAFARI"==locUrl&&$location.path("/tourIti/Group-Tours/Africa/VU/UGANDA-SAFARI"),"/tourIti/Group-Tours/South-Africa-Kenya/VA/ADVENTURE-SPECIAL-SOUTH-AFRICA"==locUrl&&$location.path("/tourIti/Group-Tours/Africa/VA/ADVENTURE-SPECIAL-SOUTH-AFRICA"),"/tourIti/Group-Tours/South-Africa-Kenya/VO/KILIMANJARO-TREK"==locUrl&&$location.path("/tourIti/Group-Tours/Africa/VO/KILIMANJARO-TREK"),"/tourIti/Group-Tours/America/ZL/ALASKA"==locUrl&&$location.path("/World-Tours/USA-Tours"),"/tourIti/Group-Tours/Karnataka/SP/HAMPI-BADAMI"==locUrl&&$location.path("/India-Tours/Karnataka-Tours"),"/tourIti/Group-Tours/Europe/PI/BEST-OF-IRELAND"==locUrl&&$location.path("/World-Tours/Europe-Tours"),"/tourIti/Group-Tours/Europe/EN/OFFBEAT%20SWISS"==locUrl&&$location.path("/tourIti/Group-Tours/Europe/EN/BEST-OF-ICELAND"),"/tourIti/Group-Tours/Dubai/IU/MICE-INCENTIVE-DUBAI"==locUrl&&$location.path("/World-Tours/Dubai-and-MiddleEast-Tours"),"/tourIti/Group-Tours/Europe/EJ/BEST-OF-SPAIN"==locUrl&&$location.path("/World-Tours/Europe-Tours"),"/tourIti/Group-Tours/Europe/PE/MYSTERIES-OF-EGYPT"==locUrl&&$location.path("/World-Tours/Europe-Tours"),"/tourIti/Group-Tours/Europe/PE/MYSTERIES-OF-EGYPT"==locUrl&&$location.path("/World-Tours/Europe-Tours"),"/tourIti/Group-Tours/Dubai/DO/DUBAI ABU DHABI OMAN"==locUrl&&$location.path("/tourIti/Group-Tours/Dubai-and-MiddleEast/DO/DUBAI-ABU-DHABI-OMAN"),"/tourIti/Group-Tours/America/U1/USA WITH BAHAMAS CRUISE"==locUrl&&$location.path("/tourIti/Group-Tours/America/U1/USA-WITH-BAHAMAS-CRUISE"),"/tourIti/Economy-Tour/South East Asia/Q2/SINGAPORE-THAILAND-MALAYSIA"==locUrl&&$location.path("/tourIti/Speciality-Tours/Economy-Tour/Q2/SINGAPORE-THAILAND-MALAYSIA-ECONOMY"),"/tourIti/Group-Tours/South East Asia/Q2/SINGAPORE-THAILAND-MALAYSIA-ECONOMY"==locUrl&&$location.path("/tourIti/Group-Tours/South-East-Asia/Q2/SINGAPORE-THAILAND-MALAYSIA-ECONOMY"),"/tourIti//Kashmir/K7/KASHMIR"==locUrl&&$location.path("/India-Tours/Kashmir-Tours"),"/tourIti/Group-Tours/Andhra Pradesh/W2/HYDERABAD-RAMOJII-FILM-CITY"==locUrl&&$location.path("/tourIti/Group-Tours/Andhra-Pradesh/W2/HYDERABAD-RAMOJII-FILM-CITY"),"/tourIti/Group-Tours/Nainital/NF/NAINITAL MUSSOORIE CORBETT PARK ECONOMY"==locUrl&&$location.path("/tourIti/Group-Tours/Nainital/NF/NAINITAL-MUSSOORIE-CORBETT-PARK-ECONOMY"),"/tourIti/Group-Tours/South-East-Asia/FB/PHUKET-KRABI"==locUrl&&$location.path("/World-Tours/South-East-Asia-Tours"),"/tourIti/Group-Tours/Maharashtra/W3/TARKARLI-SINDHUDURG"==locUrl&&$location.path("/tourIti/Speciality-Tours/Chota-Break/W3/MOUNT-ABU-KUMBHALGARH-UDAIPUR"),"/tourIti/Group-Tours/Rajasthan/RD/RAJASTHAN MEWAD MARWAD"!=locUrl&&"/tourIti/Speciality-Tours/A2A/RD/RAJASTHAN-MEWAD-MARWAD"!=locUrl||$location.path("/tourIti/Group-Tours/Rajasthan/RD/RAJASTHAN-MEWAD-MARWAD"),"/tourIti/Group-Tours/Kerala/SJ/MAGICAL-KERALA"==locUrl&&$location.path("/India-Tours/Kerala-Tours"),"/tourIti/Speciality-Tours/A2AHoneymoon/Y3/SHIMLA-MANALI-(K&S)---HONEYMOON"==locUrl&&$location.path("/tourIti/Speciality-Tours/Honeymoon-Special/Y3/SHIMLA-MANALI-HONEYMOON-ECONOMY-TOUR"),"/tourIti/Speciality-Tours/Economy-Tour/N6/NAINITAL-MUSSOORIE-CORBETT-PARK-K&S"==locUrl&&$location.path("/tourIti/Speciality-Tours/Economy-Tour/N6/NAINITAL-MUSSOORIE-CORBETT-PARK-ECONOMY"),"/tourIti/Group-Tours/South-East-Asia/ZE/SINGAPORE-WITH-4N-COSTA-CRUISE"==locUrl&&$location.path("/tourIti/Group-Tours/South-East-Asia/ZD/SINGAPORE-WITH-GENTING-DREAM-CRUISE"),"/tourIti/Group-Tours/South-East-Asia/ZE/SINGAPORE-WITH-4N-COSTA-CRUISE"==locUrl&&$location.path("/World-Tours/South-East-Asia-Tours"),"/tourIti/Speciality-Tours/Kesari-Cruises/ZE/CENTRAL-EUROPE-WITH-DANUBE-RIVER-CRUISE"==locUrl&&$location.path("/Speciality-Tours"),"/tourIti/Group-Tours/South-East-Asia/LQ/THAILAND"==locUrl&&$location.path("/World-Tours/South-East-Asia-Tours"),"/tourIti/Speciality-Tours/Honeymoon/CM/MAURITIUS"!=locUrl&&"/tourIti/Honeymoon-Special/Mauritius/CM/MAURITIUS"!=locUrl||$location.path("/tourIti/Speciality-Tours/Honeymoon-Special/CM/MAURITIUS"),"/tourIti/Speciality-Tours/My-Fair-Lady/LW/MFL-SCANDANAVIA"==locUrl&&$location.path("/tourIti/Speciality-Tours/My-Fair-Lady/LW/MFL-SCANDINAVIA"),"/tourIti/Group-Tours/Europe/EJ/BEST-OF-SPAIN"!=locUrl&&"/tourIti/Group-Tours/Europe/EJ/BEST OF SPAIN"!=locUrl||$location.path("/World-Tours/Europe-Tours"),"/tourIti/Group-Tours/South-East-Asia/LK/THAILAND-WITH-KIDS-MFL"!=locUrl&&"/tourIti/Speciality-Tours/My-Fair-Lady+Kids/LK/MFL-WITH-KIDS-THAI"!=locUrl||$location.path("/tourIti/Speciality-Tours/My-Fair-Lady/LK/SOUTH-AFRICA-WITH-PILANESBERG-NATIONAL-MFL"),"/tourIti/Group-Tours/Karnataka/SP/HAMPI-BADAMI"==locUrl&&$location.path("/tourIti/Group-Tours/Karnataka/W8/HAMPI-BADAMI-BIJAPUR"),"/tourIti/Group-Tours/Europe/E0/SCANDINAVIAN NORTHERN LIGHTS"==locUrl&&$location.path("/tourIti/Group-Tours/Europe/E0/SCANDINAVIAN-NORTHERN-LIGHTS"),"/tourIti/Group-Tours/South-East-Asia/ZK/PENANG-PHUKET-KRABI-WITH-STAR-CRUISE"==locUrl&&$location.path("/World-Tours/South-East-Asia-Tours"),"/tourIti/Group-Tours/South-East-Asia/ZK/THAILAND"==locUrl&&$location.path("/World-Tours/South-East-Asia-Tours"),"/tourIti/Group-Tours/Europe/EP/AMSTERDAM-PARIS-LONDON-SCOTLAND"!=locUrl&&"/tourIti/Group-Tours/Europe/EP/AMSTERDAM PARIS LONDON SCOTLAND"!=locUrl&&"/tourIti2017/Group-Tours/Europe/EP/AMSTERDAM-PARIS-LONDON-SCOTLAND"!=locUrl||$location.path("/tourIti/Group-Tours/Europe/EP/SCOTLAND-LONDON-AMSTERDAM-PARIS"),"/tourIti/Group-Tours/Nainital/T2/JIM-CORBETT-STUDENT-CAMP"==locUrl&&$location.path("/tourIti/Group-Tours/Kerala/T2/VIKRAM-SARABHAI-SPACE-CENTER-AND-KANYAKUMARI"),"/tourIti/Group-Tours/Europe/EC/AUSTRIA-MUNICH"==locUrl&&$location.path("/tourIti/Group-Tours/Europe/EC/AUSTRIA-SWISS"),"/tourIti/Group-Tours/Dubai/D2/DUBAI-WITH-SHARJAH-AND-ABU-DHABI-ECONOMY"==locUrl&&$location.path("/tourIti/Group-Tours/Dubai-and-MiddleEast/D2/DUBAI-WITH-SHARJAH-AND-ABU-DHABI-ECONOMY"),"/tourIti/Group-Tours/Mauritius/M3/SYECHELLS-WITH-MAURITIUS"==locUrl&&$location.path("/tourIti/Group-Tours/Mauritius/M3/SEYCHELLS-WITH-MAURITIUS"),"/tourIti/Speciality-Tours/Marigold/OH/KARNATAKA-TEMPLE-TOUR"==locUrl&&$location.path("/tourIti/Speciality-Tours/Marigold/OH/HERITAGE-OF-KARNATAKA"),"/tourIti/Group-Tours/Europe/EK/BEST OF SPAIN WITH LA TOMATINO"==locUrl&&$location.path("/tourIti/Group-Tours/Europe/EK/BALTIC-EUROPE"),"/tourIti/Group-Tours/Rajasthan/R2/RAJASTHAN MEWAD"==locUrl&&$location.path("/tourIti/Group-Tours/Rajasthan/R2/RAJASTHAN-MEWAD"),"/tourIti/Group-Tours/Kerala/S6/KERALA-KANYAKUMARI-(K&S)"==locUrl&&$location.path("/tourIti/Group-Tours/Kerala/S6/KERALA-KANYAKUMARI-ECONOMY"),"/tourIti/Group-Tours/South-East-Asia/ZP/THAILAND"==locUrl&&$location.path("/tourIti/Group-Tours/South-East-Asia/ZP/SINGAPORE-PENANG-PHUKET-WITH-DREAM-CRUISE"),"/tourIti2017/Group-Tours/Europe/E2/POPULAR-EUROPE"==locUrl&&$location.path("/tourIti/Group-Tours/Europe/E2/EUROPE-WITH-SCOTLAND"),"/tourIti/Group-Tours/Sri-Lanka/MS/SRI-LANKA"==locUrl&&$location.path("/tourIti/Group-Tours/SriLanka-Maldives/MS/SRI-LANKA"),"/tourIti//Europe/EN/OFFBEAT SWISS"!=locUrl&&"/tourIti2017/Group-Tours/Europe/EN/OFFBEAT-SWISS"!=locUrl||$location.path("/tourIti/Group-Tours/Europe/EN/BEST-OF-ICELANDA"),"/tourIti/Group-Tours/Maharashtra/WA/AURANGABAD-WTH-ELLORA-AND-AJANTA"==locUrl&&$location.path("/tourIti/Group-Tours/Himachal/WA/AMRITSAR"),"/tourIti/Group-Tours/South East Asia/FH/HONG-KONG-MACAU-SHENZHEN"!=locUrl&&"/tourIti/Group-Tours/South-East-Asia/FH/HONG-KONG-MACAU-SHENZHEN Dec 17 (1500 x"!=locUrl||$location.path("/tourIti/Group-Tours/South-East-Asia/FH/HONG-KONG-MACAU-SHENZHEN"),"/tourIti2017/Group-Tours/Europe/P9/PANORAMIC-EUROPE"==locUrl&&$location.path("/tourIti/Group-Tours/Europe/P9/HIGHLIGHTS-OF-EUROPE"),"/tourIti/Group-Tours/South-East-Asia/QA/THAILAND"==locUrl&&$location.path("/tourIti/Group-Tours/South-East-Asia/QA/THAILAND-ECONOMY"),"/tourIti//Europe/LE/EUROPE"==locUrl&&$location.path("/tourIti/Group-Tours/Europe/LE/EUROPE"),"/India-Tours/West Bengal-Tours"!=locUrl&&"/World-Tours/West-Bengal-Tours"!=locUrl||$location.path("/India-Tours/West-Bengal-Tours"),"/tourIti2017/Group-Tours/Europe/EO/ENGLAND-SCOTLAND-IRELAND-WALES"==locUrl&&$location.path("/tourIti/Group-Tours/Europe/EO/ENGLAND-SCOTLAND-IRELAND-WALES"),"/tourIti/Group-Tours/Sri-Lanka-Maldives/ML/SRI-LANKA-MALDIVES"!=locUrl&&"/tourIti/Group-Tours/SriLanka Maldives/ML/SRI LANKA MALDIVES"!=locUrl||$location.path("/tourIti/Group-Tours/SriLanka-Maldives/ML/SRI-LANKA-MALDIVES"),"/tourIti/Group-Tours/Kerala/WM/CHOTA-BREAK-MUNNAR"==locUrl&&$location.path("/tourIti/Group-Tours/Kerala/WM/MUNNAR-KUMARAKOM"),"/tourIti//Europe/XE/EUROPE"==locUrl&&$location.path("/tourIti/Group-Tours/Europe/XE/EUROPE"),"/tourIti/Speciality-Tours/My-Fair-Lady/ZL/MFL-SINGAPORE-WITH-STAR-CRUISE"!=locUrl&&"/tourIti/Group-Tours/South-East-Asia/ZL/MFL-SINGAPORE-WITH-STAR-CRUISE-ECONOMY"!=locUrl&&"/tourIti/Speciality-Tours/My-Fair-Lady/ZL/MFL-SINGAPORE-WITH-STAR-CRUISE"!=locUrl||$location.path("/Group-Tours"),"/tourIti/Speciality-Tours/Economy-Tour/CI/HONEYMOON-BALI"!=locUrl&&"/tourIti/Speciality-Tours/Honeymoon-Special/CI/HONEYMOON-BALI"!=locUrl||$location.path("/Speciality-Tours/Honeymoon-Special-Tours"),"/tourIti/Group-Tours/Europe/E7/IMAGES-OF-EUROPE"==locUrl&&$location.path("/tourIti/Group-Tours/Europe/E7/ENTICING-EUROPE"),"/tourIti/Group-Tours/Nainital/NV/VALLEY-OF-FLOWERS"==locUrl&&$location.path("/tourIti/Group-Tours/Nainital/NV/VALLEY-OF-FLOWERS-WITH-BADRINATH"),"/tourIti/Group-Tours/South East Asia/FV/VIETNAM-CAMBODIA-PHILIPPINES"==locUrl&&$location.path("/tourIti/Group-Tours/South-East-Asia/FV/VIETNAM-CAMBODIA"),"/tourIti/Group-Tours/South Africa Kenya/V1/SOUTH-AFRICA-KENYA-WITH-VICTORIA-FALLS"==locUrl&&$location.path("/tourIti/Group-Tours/Africa/V1/SOUTH-AFRICA-KENYA-WITH-VICTORIA-FALLS"),"/tourIti/Group-Tours/Europe/ER/BEST-OF-GERMANY"==locUrl&&$location.path("/tourIti/Group-Tours/Europe/ER/SLOVENIA-CROATIA"),"/tourIti/Group-Tours/Europe/EZ/BEST-OF-GREECE"==locUrl&&$location.path("/tourIti/Group-Tours/Europe/EZ/MIDNIGHT-SUN"),"/tourIti/Speciality-Tours/Economy-Tour/QA/THAILAND"==locUrl&&$location.path("/tourIti/Speciality-Tours/Economy-Tour/QA/THAILAND-ECONOMY"),"/tourIti/Group-Tours/South-East-Asia/QA/THAILAND"==locUrl&&$location.path("/tourIti/Speciality-Tours/Economy-Tour/QA/THAILAND-ECONOMY"),"/tourIti/Group-Tours/America/UB/SOUTH-AMERICA"==locUrl&&$location.path("/tourIti/Group-Tours/America/UB/SOUTH-AMERICA-WITH-RIO-CARNIVAL"),"/tourIti/Group-Tours/South East Asia/Q3/SINGAPORE-THAILAND-MALAYSIA-ECONOMY"!=locUrl&&"/tourIti/Group-Tours/South-East-Asia/Q3/SING-THAI-MALY"!=locUrl||$location.path("/tourIti/Group-Tours/South-East-Asia/Q3/SINGAPORE-THAILAND-MALAYSIA-ECONOMY"),"/tourIti/Group-Tours/Kashmir/K9/KASHMIR"==locUrl&&$location.path("/tourIti/Group-Tours/Kashmir/K9/KASHMIR-ECONOMY"),"/tourIti/Group-Tours/Goa/L4/GOA"==locUrl&&$location.path("/tourIti/Group-Tours/Uttar-Pradesh/L4/MFL-DELHI-WITH-KOD"),$scope.tour.zone&&$scope.tour.code){$scope.url="";$scope.tour.type.indexOf("Speciality-Tours")>-1?($location.path().indexOf("tourIti2017")>-1?$scope.url="inventory/getTourPackageData17/0/Brand:"+$scope.tour.zone.split("-").join(" ")+"/"+$scope.tour.code.split("-").join(" "):$scope.url="inventory/getTourPackageData/0/Brand:"+$scope.tour.zone.split("-").join(" ")+"/"+$scope.tour.code.split("-").join(" "),$cookieStore.put("tour",{type:"Speciality-Tours",zone:$scope.tour.zone,tourcode:$scope.tour.code.split("-").join(" "),path:$location.path()})):($location.path().indexOf("tourIti2017")>-1?$scope.url="inventory/getTourPackageData17/0/"+$scope.tour.zone.split("-").join(" ")+"/"+$scope.tour.code.split("-").join(" "):$scope.url="inventory/getTourPackageData/0/"+$scope.tour.zone.split("-").join(" ")+"/"+$scope.tour.code,$cookieStore.put("tour",{type:"Group-Tours",zone:$scope.tour.zone,tourcode:$scope.tour.code.split("-").join(" "),path:$location.path()})),DataService.getData($scope.url).then(function(awesomeThings){$scope.tourData=awesomeThings[0],$scope.tourData.TOURNAME=$scope.tourData.TOURNAME.trim(),$scope.tour.name=$scope.tour.name.trim(),$scope.tourData&&$scope.tourData.tour_usp&&($scope.tourData.usp=$scope.tourData.tour_usp),$scope.tourDate=[];var Dummy=[];$scope.tourData&&$scope.tourData.TOURMAS0&&$scope.tourData.TOURMAS0.forEach(function(date){if(null!=date){date.additionalDiscount&&(date.anniversaryDisc=date.additionalDiscount.amount,date.anniversaryDiscName=date.additionalDiscount.name,date.anniversaryDiscNew=parseInt(date.COST_2DAY)-parseInt(date.DISC_2DAY)-parseInt(date.anniversaryDisc));var tempDeparture=date.TM_SDESC?date.TM_SDESC.split("-"):"";date.departure=tempDeparture[0];var price=parseInt(date.COST_2DAY)-parseInt(date.DISC_2DAY),tempDate=new Date(date.TM_DT1.substring(0,date.TM_DT1.indexOf("T")));tempDate>new Date&&""===date.TM_FULL&&(void 0!=date.bonanza_cost&&null!=date.bonanza_cost&&" "!=date.bonanza_cost?$scope.tourDate.push({date:date.TM_DT1.substring(0,date.TM_DT1.indexOf("T")),COST_2DAY:date.COST_2DAY,DISC_2DAY:price,TM_TCD:date.TM_TCD,tm_days:date.TM_DAYS,value:new Date(date.TM_DT1).getMonth()+1,departure:date.departure,category:date.TM_FINCATG,bonanza_cost:date.bonanza_cost,anniversaryDisc:date.anniversaryDisc,anniversaryDiscName:date.anniversaryDiscName,anniversaryDiscNew:date.anniversaryDiscNew,lmd_cost:0!=date.LST_2DEAL?date.LST_2DEAL:null,bonDisCost:0!=date.bonDisCost?date.bonDisCost:null,seatStatus:date.seatStatus}):$scope.tourDate.push({date:date.TM_DT1.substring(0,date.TM_DT1.indexOf("T")),COST_2DAY:date.COST_2DAY,DISC_2DAY:price,TM_TCD:date.TM_TCD,tm_days:date.TM_DAYS,value:new Date(date.TM_DT1).getMonth()+1,departure:date.departure,category:date.TM_FINCATG,anniversaryDisc:date.anniversaryDisc,anniversaryDiscName:date.anniversaryDiscName,anniversaryDiscNew:date.anniversaryDiscNew,lmd_cost:0!=date.LST_2DEAL?date.LST_2DEAL:null,bonDisCost:0!=date.bonDisCost?date.bonDisCost:null,seatStatus:date.seatStatus}));var tempIndex=new Date(date.TM_DT1).getMonth();$scope.month.indexOf([new Date(date.TM_DT1).getMonth()]);void 0===Dummy[tempIndex]&&($scope.month.push({name:month[tempIndex],value:tempIndex+1}),Dummy[tempIndex]=tempIndex)}}),$scope.tourDate=$scope.tourDate.sort(function(a,b){var c=new Date(a.date),d=new Date(b.date);return c-d}),$scope.Iti=$scope.tourData.ITINERARY_NEW[0].itnr,$scope.itiLoaded=!0,$scope.dayIti=[],$scope.dayIti2=[],$scope.dayIti3=[],$scope.dayIti4=[],$scope.active="",$scope.Iti.note&&($scope.active="note"),$scope.Iti.xtop&&""==$scope.active&&($scope.active="xtop"),$scope.Iti.splt&&""==$scope.active&&($scope.active="splt"),$scope.Iti.rpdr&&""==$scope.active&&($scope.active="rpdr"),$scope.Iti.road&&""==$scope.active&&($scope.active="road"),$scope.tourData.ITINERARY_NEW[1]&&($scope.Iti2=$scope.tourData.ITINERARY_NEW[1].itnr),$scope.tourData.ITINERARY_NEW[2]&&($scope.Iti3=$scope.tourData.ITINERARY_NEW[2].itnr),$scope.tourData.ITINERARY_NEW[3]&&($scope.Iti4=$scope.tourData.ITINERARY_NEW[3].itnr),$scope.mealsSingle=[],$scope.days=$scope.Iti.TM_DAYS,$scope.nights=parseInt($scope.Iti.TM_DAYS)-1,$scope.stays=$scope.Iti.STAY1+$scope.Iti.STAY2+$scope.Iti.STAY3,$scope.Iti.STAY4+$scope.Iti.STAY5+$scope.Iti.STAY6,$scope.stays=String($scope.stays).replace(/<[^>]+>/gm,""),$scope.dayIti=$scope.tourData.ITINERARY_NEW[0].itnr.days,$scope.meals=[],$scope.dayIti&&($scope.dayItiValidity={from:new Date($scope.tourData.ITINERARY_NEW[0].itnr.valid_from),to:new Date($scope.tourData.ITINERARY_NEW[0].itnr.valid_to)}),$scope.Iti2&&($scope.dayIti2=$scope.tourData.ITINERARY_NEW[1].itnr.days,$scope.dayIti2Validity={from:new Date($scope.tourData.ITINERARY_NEW[1].itnr.valid_from),to:new Date($scope.tourData.ITINERARY_NEW[1].itnr.valid_to)}),$scope.Iti3&&($scope.dayIti3=$scope.tourData.ITINERARY_NEW[2].itnr.days,$scope.dayIti3Validity={from:new Date($scope.tourData.ITINERARY_NEW[2].itnr.valid_from),to:new Date($scope.tourData.ITINERARY_NEW[2].itnr.valid_to)}),$scope.Iti4&&($scope.dayIti4=$scope.tourData.ITINERARY_NEW[3].itnr.days,$scope.dayIti4Validity={from:new Date($scope.tourData.ITINERARY_NEW[3].itnr.valid_from),to:new Date($scope.tourData.ITINERARY_NEW[3].itnr.valid_to)})}),$scope.get150img=function(img){return img.replace("uploads","uploads/150")},$scope.get980img=function(img){return img.replace("uploads","uploads/980")};"inventory/getItinerary/"+$scope.tour.code;$http.get("https://api.kesari.in/route/inventory/getSimilarTours/"+$scope.tour.code).success(function(awesomeThings){var similarTours=[];awesomeThings.forEach(function(data,i){""==data.generated_NETCOST||similarTours.push(awesomeThings[i])}),$scope.simillar=similarTours})}else $location.path("/");$http.get("https://api.kesari.in/route/complimentaryItems/getComplimentaryItems/"+$scope.tour.code).success(function(complimentries){$scope.complimentries=complimentries}),$scope.assign=function(index){$scope.selectedDate=$scope.tourDate[index],$scope.showAlert=!1},$scope.booking=function(){""===$scope.selectedDate.date||null===$scope.selectedDate.date||void 0===$scope.selectedDate.date?$scope.showAlert=!0:(localStorageService.set("lastUrl","booking/"+$scope.tour.zone+"/"+$scope.tour.code+"/"+$scope.selectedDate.TM_TCD),$state.go("booking",{zone:$scope.tour.zone,date:$scope.tour.code,code:$scope.selectedDate.TM_TCD}))},$scope.open=function(date){if($scope.selectedDate=$scope.tourDate[date],$scope.selectedDate.code=$scope.tour.code,""===$scope.selectedDate.date||null===$scope.selectedDate.date||void 0===$scope.selectedDate.date)$scope.showAlert=!0;else{$scope.showAlert=!1;var modalInstance=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/touritinerary/priceModal.html",controller:"ModalInstanceCtrl",size:"lg",resolve:{items:function(){return $scope.selectedDate}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)}),$scope.$watch(function(){return $location.path()},function(value){})}},$scope.open3=function(date){if($scope.selectedDate=$scope.tourDate[date],$scope.selectedDate.code=$scope.tour.code,""===$scope.selectedDate.date||null===$scope.selectedDate.date||void 0===$scope.selectedDate.date)$scope.showAlert=!0;else{$scope.showAlert=!1;var modalInstance=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/touritinerary/price-bonaza-modal.html",controller:"BonanzaModalInstanceCtrl",size:"lg",resolve:{items:function(){return $scope.selectedDate}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)}),$scope.$watch(function(){return $location.path()},function(value){})}},$scope.print=function(id){var printWindow=$window.open("","","height=400,width=800,scrollbars=1");printWindow.document.write("<html><head><title></title>"),printWindow.document.write('<style type="text/css" media="print"> html {overflow: -moz-scrollbars-vertical;}</style>'),printWindow.document.write("</head><body>"),1==id&&printWindow.document.write(angular.element("#printIti").html()),2==id&&printWindow.document.write(angular.element("#printIti2").html()),3==id&&printWindow.document.write(angular.element("#printIti3").html()),4==id&&printWindow.document.write(angular.element("#printIti4").html()),printWindow.document.write("</body></html>"),printWindow.print()},$scope.sendmail=function(id){var pass;1==id&&(pass=angular.element("#printIti").html()),2==id&&(pass=angular.element("#printIti2").html()),3==id&&(pass=angular.element("#printIti3").html()),4==id&&(pass=angular.element("#printIti4").html());var modalInstance3=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/touritinerary/mail.html",controller:"mailCtrl",size:"sm",resolve:{items:function(){return{data:pass,id:id}}}});modalInstance3.result.then(function(items){smoothScroll.scrollTo("start"),$scope.showMail=items},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.updateIndex=function(val){$scope.defaults=!1,$scope.value=$scope.month[val].value},$scope.showAll=function(){$scope.defaults=!0},$scope.openLightboxModal=function(images,Striker){var counter=images.length,index=0,dummy=[];images.forEach(function(img){index++,img=img,dummy.push(img),setTimeout(function(){counter-=1,0===counter&&Lightbox.openModal(dummy,Striker)},1)})},$scope.open2=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/touritinerary/ad-landing.html",controller:"gitInquiryCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start"),$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.inclusion=function(data){$scope.show=!1;var path;"I"==data&&(path="app/touritinerary/Inclusion.html"),"D"==data&&(path="app/touritinerary/Inclusiondom.html");var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:path,controller:"InclusionCtrl",size:"lg",resolve:{items:function(){return{data:"Inclusion"}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start"),$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.visaAudio=function(id){$scope.show=!1;var modalInstance4=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/touritinerary/visaAudio.html",controller:"visaAudioCtrl",size:"sm",resolve:{items:function(){return{data:"Audio"}}}});modalInstance4.result.then(function(items){smoothScroll.scrollTo("start"),$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})}}]),angular.module("websiteApp").controller("gitInquiryCtrl",function($scope,$http,$location,$stateParams,$q,$modal,items,$state,$modalInstance,$uibModalInstance,$cookieStore){var source=$location.search();source.url=$location.path(),$scope.errors={},$scope.items=items,$scope.disableButton=!1,$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.minDate=new Date,$scope.maxDate=new Date(2020,5,22),$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0],$scope.example={value:new Date,anniversary:new Date},$scope.open=function(){$scope.opened=!0},$scope.cancel=function(){$uibModalInstance.dismiss("cancel")},$scope.save=function(form){form.$valid&&0==$scope.disableButton&&($scope.Inquiry.basedUpon=$scope.items.data,$scope.disableButton=!0,source.utm_source&&($scope.Inquiry.utm=source),$scope.Inquiry.url="https://www.kesari.in"+source.url,$scope.Inquiry.utmsearch=source,$http.post("https://login.kesari.in/route/gitenquiry/",$scope.Inquiry).success(function(data,status){data&&(source.utm_source?$http.post("https://login.kesari.in/route/utmdashboard/",source).success(function(data1,status){data1&&$modalInstance.close(!0),$location.path("thankyou/"+data.message)}):($modalInstance.close(!0),$location.path("thankyou/"+data.message)))}).error(function(data,status){$http.post("https://api.kesari.in/route/gitenquiry/",$scope.Inquiry).success(function(data,status){data&&$uibModalInstance.close(!0),$location.path("thankyou/"+data.message)})}))}});var INTEGER_REGEXP=/^\-?\d+$/;angular.module("websiteApp").directive("integer",function(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){ctrl.$validators.integer=function(modelValue,viewValue){return!!ctrl.$isEmpty(modelValue)||!!INTEGER_REGEXP.test(viewValue)}}}}),angular.module("websiteApp").controller("mailCtrl",function($state,$scope,$http,$modalInstance,items,DataService){$scope.disableButton=!1,$scope.items=items,$scope.save=function(form){if(form.$valid){$scope.disableButton=!0;var iti="#printIti";iti=3===items.id?"#printIti2":"#printIti",$http.post("https://login.kesari.in/route/rsData/sentItineraryViaMail",{to:$scope.Mail.email,mailbody:angular.element(iti).html()}).success(function(data,status){data&&$modalInstance.close(!0)})}}}).controller("InclusionCtrl",function($scope,$modal,items,$modalInstance){$scope.cancel=function(){$modalInstance.dismiss("cancel")}}).controller("visaAudioCtrl",function($scope,$modal,items,$modalInstance){$scope.cancel=function(){$modalInstance.dismiss("cancel")}}).controller("whyBookCtrl",function($scope,$modal,$modalInstance){$scope.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("websiteApp").controller("userCtrl",function($scope,Auth,User,$http,$location,$stateParams,$modal,$log,$uibModal,smoothScroll,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0),$scope.name=$stateParams.name,console.log($scope.name),$scope.user={},$http.get("/api/users/me").then(function(result){$scope.userId=result.data._id,$scope.user=result.data,"false"==result.data.verified&&($scope.verifyuser=!0),$http.get("//login.kesari.in/route/ReferalAdvisoryData/referal/"+$scope.user.referralId).success(function(data){$scope.referredGuest=data}),$scope.name!=$scope.user.name&&(Auth.logout(),$location.path("/login"))}),$scope.save=function(form){},null==$scope.name||void 0==$scope.name?$location.path("/"):($scope.tabs=[{title:"Dynamic Title 1",content:"Dynamic content 1"},{title:"Dynamic Title 2",content:"Dynamic content 2",disabled:!0}],$scope.PassportCollapsed=!0,$scope.hotelCollapsed=!0,$scope.flightCollapsed=!0,$scope.holidayCollapsed=!0,$scope.visaCollapsed=!0,$scope.getCurrentUser=Auth.getCurrentUser,$scope.open=function(){var modalInstance=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/user/userProfile.html",controller:"userProfileCtrl",size:"lg",resolve:{items:function(){return{user:$scope.user}}}});modalInstance.result.then(function(selectedItem){$scope.selected=selectedItem},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.open2=function(){var modalInstance=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/Advisory/advisory.html",controller:"AdvisoryModalInstanceCtrl",size:"md",resolve:{items:function(){return{referal_id:$scope.user.referralId,registrationId:$scope.user.registrationId,referredby:$scope.user.name+" "+$scope.user.lastname,referredbycontact:$scope.user.mobile}}}});modalInstance.result.then(function(result1){$scope.show=result1,$http.get("//login.kesari.in/route/ReferalAdvisoryData/referal/"+$scope.user.referralId).success(function(data){$scope.referredGuest=data})},function(){$log.info("Modal dismissed at: "+new Date),$http.get("//login.kesari.in/route/ReferalAdvisoryData/referal/"+$scope.user.referralId).success(function(data){$scope.referredGuest=data})}),$scope.cancel=function(){modalInstance.dismiss("cancel")}},$scope.open3=function(size){var modalInstance=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/user/numberVerify.html",controller:"verifyNumberCtrl",size:"sm",resolve:{items:function(){
return{mobile:$scope.user.mobile,id:$scope.user.registrationId}}}});modalInstance.result.then(function(results){$http.get("/api/users/me").then(function(result){"false"==result.data.verified&&($scope.verifyuser=!0)})})})}).controller("userProfileCtrl",function($scope,$http,$stateParams,$modalInstance,items){console.log(items.user),$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.minDate=new Date,$scope.maxDate=new Date(2020,5,22),$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0],$scope.example={value:new Date,anniversary:new Date},$scope.open=function(){$scope.opened=!0}}).controller("AdvisoryModalInstanceCtrl",function($scope,$http,$modalInstance,$timeout,items,DataService){DataService.getData("rsData/getAgentBranch/").then(function(awesomeThings){$scope.zBrn=awesomeThings}),$scope.referralId=items.referal_id,$scope.advisory={},$scope.disableButton=!1,$scope.hide=!1,$scope.save=function(form){form.$valid&&($scope.msg="Submitting Your Response",$scope.disableButton=!0,$scope.advisory.referance_id=$scope.referralId,$scope.advisory.referredby=items.referredby,$scope.advisory.referredbycontact=items.referredbycontact,$scope.advisory.registrationId=items.registrationId,$scope.advisory.nearestBranch=$scope.advisory.nearestBranch.BKA_CODE,$http.post("//login.kesari.in/route/ReferalAdvisoryData/",$scope.advisory).success(function(data,status){data&&($scope.msg="Thanks For Your Valuable Referal Advisory",$scope.hide=!0,$timeout(function(){$modalInstance.close(!0)},3e3))}))},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}).controller("verifyMail",function($scope,$http,$stateParams,Auth,$timeout,$location){$scope.errors={},$scope.verified=!0,$scope.message="Wait verifying you..........",$scope.verificationId=$stateParams.verificationId,Auth.verifyMail($scope.verificationId).then(function(){$scope.verified=!1,$scope.message="verification done successfully wait you will be redirect",$timeout(function(){$location.path("/login")},3e3)}).catch(function(){$scope.errors.other="Incorrect Link",$scope.message="Incorrect Link",$timeout(function(){$location.path("/")},100)})}).controller("verifyNumberCtrl",function($scope,$modalInstance,items,Auth,$timeout){$scope.mobile=items.mobile,$scope.showOTP=!1,$scope.verified=!1,$scope.otp,$scope.cancel=function(){$modalInstance.dismiss("cancel")},$scope.sendOTP=function(){Auth.generateOTP(items.id).then(function(){$scope.verified=!1,$scope.showOTP=!0}).catch(function(){$scope.message="Please try after sometime"})},$scope.submitOTP=function(form,otp){console.log(otp),form.$valid&&Auth.submitOTP(items.id,otp).then(function(){$scope.verified=!0,$scope.message="verification done successfully wait you will be redirect",$timeout(function(){$modalInstance.close(!0)},3e3)}).catch(function(){$scope.message="Invalid OTP"}),$scope.message="Please Enter OTP"}}),angular.module("websiteApp").factory("Auth",function($location,$rootScope,$http,User,$cookieStore,$q){var currentUser={};return $cookieStore.get("token")&&(currentUser=User.get()),{login:function(user,callback){var cb=callback||angular.noop,deferred=$q.defer();return $http.post("/auth/local",{email:user.email,password:user.password}).success(function(data){return $cookieStore.put("token",data.token),currentUser=User.get(),deferred.resolve(data),cb()}).error(function(err){return this.logout(),deferred.reject(err),cb(err)}.bind(this)),deferred.promise},logout:function(){$cookieStore.remove("token"),currentUser={}},createUser:function(user,callback){var cb=callback||angular.noop;return User.save(user,function(data){return $cookieStore.put("token",data.token),currentUser=User.get(),cb(user)},function(err){return this.logout(),cb(err)}.bind(this)).$promise},changePassword:function(oldPassword,newPassword,callback){var cb=callback||angular.noop;return User.changePassword({id:currentUser._id},{oldPassword:oldPassword,newPassword:newPassword},function(user){return cb(user)},function(err){return cb(err)}).$promise},resetPassword:function(linkId,newPassword,callback){var cb=callback||angular.noop;return User.resetPassword({id:linkId},{newPassword:newPassword},function(user){return cb(user)},function(err){return cb(err)}).$promise},verifyMail:function(registrationId,callback){var cb=callback||angular.noop;return User.verifyMail({id:registrationId},{},function(user){return cb(user)},function(err){return cb(err)}).$promise},generateOTP:function(registrationId,callback){var cb=callback||angular.noop;return User.generateOTP({id:registrationId},{},function(user){return cb(user)},function(err){return cb(err)}).$promise},submitOTP:function(id,otp,callback){var cb=callback||angular.noop;return User.submitOTP({id:id},{otp:otp},function(user){return cb(user)},function(err){return cb(err)}).$promise},forgottenPassword:function(mailId,callback){var cb=callback||angular.noop;return User.forgottenPassword({id:mailId},{},function(user){return cb(user)},function(err){return cb(err)}).$promise},verifyLink:function(userid,callback){var cb=callback||angular.noop;return User.verifyLink({id:userid},{},function(user){return cb(user)},function(err){return cb(err)}).$promise},getCurrentUser:function(){return currentUser},isLoggedIn:function(){return currentUser.hasOwnProperty("role")},isLoggedInAsync:function(cb){currentUser.hasOwnProperty("$promise")?currentUser.$promise.then(function(){cb(!0)}).catch(function(){cb(!1)}):cb(currentUser.hasOwnProperty("role")?!0:!1)},isAdmin:function(){return"admin"===currentUser.role},getToken:function(){return $cookieStore.get("token")}}}),angular.module("websiteApp").factory("User",function($resource){return $resource("/api/users/:id/:controller",{id:"@_id"},{changePassword:{method:"PUT",params:{controller:"password"}},get:{method:"GET",params:{id:"me"}},verifyMail:{method:"PUT",params:{controller:"mail"}},forgottenPassword:{method:"PUT",params:{controller:"forgottenPassword"}},verifyLink:{method:"GET",params:{controller:"verifyLink"}},resetPassword:{method:"PUT",params:{controller:"resetpassword"}},generateOTP:{method:"PUT",params:{controller:"generateOTP"}},submitOTP:{method:"PUT",params:{controller:"submitOTP"}}})}),+function($){var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.prototype.close=function(e){function removeElement(){$parent.trigger("closed.bs.alert").remove()}var $this=$(this),selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=$(selector);e&&e.preventDefault(),$parent.length||($parent=$this.hasClass("alert")?$this:$this.parent()),$parent.trigger(e=$.Event("close.bs.alert")),e.isDefaultPrevented()||($parent.removeClass("in"),$.support.transition&&$parent.hasClass("fade")?$parent.one($.support.transition.end,removeElement).emulateTransitionEnd(150):removeElement())};var old=$.fn.alert;$.fn.alert=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.alert");data||$this.data("bs.alert",data=new Alert(this)),"string"==typeof option&&data[option].call($this)})},$.fn.alert.Constructor=Alert,$.fn.alert.noConflict=function(){return $.fn.alert=old,this},$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close)}(jQuery),+function($){var Button=function(element,options){this.$element=$(element),this.options=$.extend({},Button.DEFAULTS,options),this.isLoading=!1};Button.DEFAULTS={loadingText:"loading..."},Button.prototype.setState=function(state){var d="disabled",$el=this.$element,val=$el.is("input")?"val":"html",data=$el.data();state+="Text",data.resetText||$el.data("resetText",$el[val]()),$el[val](data[state]||this.options[state]),setTimeout($.proxy(function(){"loadingText"==state?(this.isLoading=!0,$el.addClass(d).attr(d,d)):this.isLoading&&(this.isLoading=!1,$el.removeClass(d).removeAttr(d))},this),0)},Button.prototype.toggle=function(){var changed=!0,$parent=this.$element.closest('[data-toggle="buttons"]');if($parent.length){var $input=this.$element.find("input");"radio"==$input.prop("type")&&($input.prop("checked")&&this.$element.hasClass("active")?changed=!1:$parent.find(".active").removeClass("active")),changed&&$input.prop("checked",!this.$element.hasClass("active")).trigger("change")}changed&&this.$element.toggleClass("active")};var old=$.fn.button;$.fn.button=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.button"),options="object"==typeof option&&option;data||$this.data("bs.button",data=new Button(this,options)),"toggle"==option?data.toggle():option&&data.setState(option)})},$.fn.button.Constructor=Button,$.fn.button.noConflict=function(){return $.fn.button=old,this},$(document).on("click.bs.button.data-api","[data-toggle^=button]",function(e){var $btn=$(e.target);$btn.hasClass("btn")||($btn=$btn.closest(".btn")),$btn.button("toggle"),e.preventDefault()})}(jQuery),+function($){var Carousel=function(element,options){this.$element=$(element),this.$indicators=this.$element.find(".carousel-indicators"),this.options=options,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))};Carousel.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},Carousel.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval)),this},Carousel.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},Carousel.prototype.to=function(pos){var that=this,activeIndex=this.getActiveIndex();if(!(pos>this.$items.length-1||pos<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){that.to(pos)}):activeIndex==pos?this.pause().cycle():this.slide(pos>activeIndex?"next":"prev",$(this.$items[pos]))},Carousel.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&$.support.transition&&(this.$element.trigger($.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},Carousel.prototype.next=function(){if(!this.sliding)return this.slide("next")},Carousel.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},Carousel.prototype.slide=function(type,next){var $active=this.$element.find(".item.active"),$next=next||$active[type](),isCycling=this.interval,direction="next"==type?"left":"right",fallback="next"==type?"first":"last",that=this;if(!$next.length){if(!this.options.wrap)return;$next=this.$element.find(".item")[fallback]()}if($next.hasClass("active"))return this.sliding=!1;var e=$.Event("slide.bs.carousel",{relatedTarget:$next[0],direction:direction});return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(this.sliding=!0,isCycling&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var $nextIndicator=$(that.$indicators.children()[that.getActiveIndex()]);$nextIndicator&&$nextIndicator.addClass("active")})),$.support.transition&&this.$element.hasClass("slide")?($next.addClass(type),$next[0].offsetWidth,$active.addClass(direction),$next.addClass(direction),$active.one($.support.transition.end,function(){$next.removeClass([type,direction].join(" ")).addClass("active"),$active.removeClass(["active",direction].join(" ")),that.sliding=!1,setTimeout(function(){that.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*$active.css("transition-duration").slice(0,-1))):($active.removeClass("active"),$next.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),isCycling&&this.cycle(),this)};var old=$.fn.carousel;$.fn.carousel=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.carousel"),options=$.extend({},Carousel.DEFAULTS,$this.data(),"object"==typeof option&&option),action="string"==typeof option?option:options.slide;data||$this.data("bs.carousel",data=new Carousel(this,options)),"number"==typeof option?data.to(option):action?data[action]():options.interval&&data.pause().cycle()})},$.fn.carousel.Constructor=Carousel,$.fn.carousel.noConflict=function(){return $.fn.carousel=old,this},$(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var href,$this=$(this),$target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")),options=$.extend({},$target.data(),$this.data()),slideIndex=$this.attr("data-slide-to");slideIndex&&(options.interval=!1),$target.carousel(options),(slideIndex=$this.attr("data-slide-to"))&&$target.data("bs.carousel").to(slideIndex),e.preventDefault()}),$(window).on("load",function(){$('[data-ride="carousel"]').each(function(){var $carousel=$(this);$carousel.carousel($carousel.data())})})}(jQuery),+function($){function clearMenus(e){$(backdrop).remove(),$(toggle).each(function(){var $parent=getParent($(this)),relatedTarget={relatedTarget:this};$parent.hasClass("open")&&($parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget)),e.isDefaultPrevented()||$parent.removeClass("open").trigger("hidden.bs.dropdown",relatedTarget))})}function getParent($this){var selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}var backdrop=".dropdown-backdrop",toggle="[data-toggle=dropdown]",Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.prototype.toggle=function(e){var $this=$(this);if(!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(clearMenus(),!isActive){"ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length&&$('<div class="dropdown-backdrop"/>').insertAfter($(this)).on("click",clearMenus);var relatedTarget={relatedTarget:this};if($parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget)),e.isDefaultPrevented())return;$parent.toggleClass("open").trigger("shown.bs.dropdown",relatedTarget),$this.focus()}return!1}},Dropdown.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var $this=$(this);if(e.preventDefault(),e.stopPropagation(),!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(!isActive||isActive&&27==e.keyCode)return 27==e.which&&$parent.find(toggle).focus(),$this.click();var desc=" li:not(.divider):visible a",$items=$parent.find("[role=menu]"+desc+", [role=listbox]"+desc);if($items.length){var index=$items.index($items.filter(":focus"));38==e.keyCode&&index>0&&index--,40==e.keyCode&&index<$items.length-1&&index++,~index||(index=0),$items.eq(index).focus()}}}};var old=$.fn.dropdown;$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.dropdown");data||$this.data("bs.dropdown",data=new Dropdown(this)),"string"==typeof option&&data[option].call($this)})},$.fn.dropdown.Constructor=Dropdown,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=old,this},$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle+", [role=menu], [role=listbox]",Dropdown.prototype.keydown)}(jQuery),+function($){var Modal=function(element,options){this.options=options,this.$element=$(element),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};Modal.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},Modal.prototype.toggle=function(_relatedTarget){return this[this.isShown?"hide":"show"](_relatedTarget)},Modal.prototype.show=function(_relatedTarget){var that=this,e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this)),this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");that.$element.parent().length||that.$element.appendTo(document.body),that.$element.show().scrollTop(0),transition&&that.$element[0].offsetWidth,that.$element.addClass("in").attr("aria-hidden",!1),that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$element.find(".modal-dialog").one($.support.transition.end,function(){that.$element.focus().trigger(e)}).emulateTransitionEnd(300):that.$element.focus().trigger(e)}))},Modal.prototype.hide=function(e){e&&e.preventDefault(),e=$.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),$(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),$.support.transition&&this.$element.hasClass("fade")?this.$element.one($.support.transition.end,$.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},Modal.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",$.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},Modal.prototype.hideModal=function(){var that=this;this.$element.hide(),this.backdrop(function(){that.removeBackdrop(),that.$element.trigger("hidden.bs.modal")})},Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},Modal.prototype.backdrop=function(callback){var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;if(this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",$.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),doAnimate&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!callback)return;doAnimate?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback()):callback&&callback()};var old=$.fn.modal;$.fn.modal=function(option,_relatedTarget){return this.each(function(){var $this=$(this),data=$this.data("bs.modal"),options=$.extend({},Modal.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("bs.modal",data=new Modal(this,options)),"string"==typeof option?data[option](_relatedTarget):options.show&&data.show(_relatedTarget)})},$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());$this.is("a")&&e.preventDefault(),$target.modal(option,this).one("hide",function(){$this.is(":visible")&&$this.focus()})}),$(document).on("show.bs.modal",".modal",function(){$(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){$(document.body).removeClass("modal-open")})}(jQuery),+function($){var Tooltip=function(element,options){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",element,options)};Tooltip.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},Tooltip.prototype.init=function(type,element,options){this.enabled=!0,this.type=type,this.$element=$(element),this.options=this.getOptions(options);for(var triggers=this.options.trigger.split(" "),i=triggers.length;i--;){var trigger=triggers[i];if("click"==trigger)this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if("manual"!=trigger){var eventIn="hover"==trigger?"mouseenter":"focusin",eventOut="hover"==trigger?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS},Tooltip.prototype.getOptions=function(options){return options=$.extend({},this.getDefaults(),this.$element.data(),options),options.delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},Tooltip.prototype.getDelegateOptions=function(){var options={},defaults=this.getDefaults();return this._options&&$.each(this._options,function(key,value){defaults[key]!=value&&(options[key]=value)}),options},Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(self.timeout),self.hoverState="in",self.options.delay&&self.options.delay.show?void(self.timeout=setTimeout(function(){"in"==self.hoverState&&self.show()},self.options.delay.show)):self.show()},Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(self.timeout),self.hoverState="out",self.options.delay&&self.options.delay.hide?void(self.timeout=setTimeout(function(){"out"==self.hoverState&&self.hide()},self.options.delay.hide)):self.hide()},Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var that=this,$tip=this.tip();this.setContent(),this.options.animation&&$tip.addClass("fade");var placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,autoToken=/\s?auto?\s?/i,autoPlace=autoToken.test(placement);autoPlace&&(placement=placement.replace(autoToken,"")||"top"),$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if(autoPlace){var $parent=this.$element.parent(),orgPlacement=placement,docScroll=document.documentElement.scrollTop||document.body.scrollTop,parentWidth="body"==this.options.container?window.innerWidth:$parent.outerWidth(),parentHeight="body"==this.options.container?window.innerHeight:$parent.outerHeight(),parentLeft="body"==this.options.container?0:$parent.offset().left;placement="bottom"==placement&&pos.top+pos.height+actualHeight-docScroll>parentHeight?"top":"top"==placement&&pos.top-docScroll-actualHeight<0?"bottom":"right"==placement&&pos.right+actualWidth>parentWidth?"left":"left"==placement&&pos.left-actualWidth<parentLeft?"right":placement,$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement),this.hoverState=null;var complete=function(){that.$element.trigger("shown.bs."+that.type)};$.support.transition&&this.$tip.hasClass("fade")?$tip.one($.support.transition.end,complete).emulateTransitionEnd(150):complete()}},Tooltip.prototype.applyPlacement=function(offset,placement){var replace,$tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,marginTop=parseInt($tip.css("margin-top"),10),marginLeft=parseInt($tip.css("margin-left"),10);isNaN(marginTop)&&(marginTop=0),isNaN(marginLeft)&&(marginLeft=0),offset.top=offset.top+marginTop,offset.left=offset.left+marginLeft,$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0),$tip.addClass("in");var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if("top"==placement&&actualHeight!=height&&(replace=!0,offset.top=offset.top+height-actualHeight),/bottom|top/.test(placement)){var delta=0;offset.left<0&&(delta=offset.left*-2,offset.left=0,$tip.offset(offset),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight),this.replaceArrow(delta-width+actualWidth,actualWidth,"left")}else this.replaceArrow(actualHeight-height,actualHeight,"top");replace&&$tip.offset(offset)},Tooltip.prototype.replaceArrow=function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},Tooltip.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},Tooltip.prototype.hide=function(){function complete(){"in"!=that.hoverState&&$tip.detach(),that.$element.trigger("hidden.bs."+that.type)}var that=this,$tip=this.tip(),e=$.Event("hide.bs."+this.type);if(this.$element.trigger(e),!e.isDefaultPrevented())return $tip.removeClass("in"),$.support.transition&&this.$tip.hasClass("fade")?$tip.one($.support.transition.end,complete).emulateTransitionEnd(150):complete(),this.hoverState=null,this},Tooltip.prototype.fixTitle=function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},Tooltip.prototype.hasContent=function(){return this.getTitle()},Tooltip.prototype.getPosition=function(){var el=this.$element[0];return $.extend({},"function"==typeof el.getBoundingClientRect?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())},Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return"bottom"==placement?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:"top"==placement?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:"left"==placement?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}},Tooltip.prototype.getTitle=function(){var title,$e=this.$element,o=this.options;return title=$e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},Tooltip.prototype.tip=function(){return this.$tip=this.$tip||$(this.options.template)},Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},Tooltip.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},Tooltip.prototype.enable=function(){this.enabled=!0},Tooltip.prototype.disable=function(){this.enabled=!1},Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled},Tooltip.prototype.toggle=function(e){var self=e?$(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;self.tip().hasClass("in")?self.leave(self):self.enter(self)},Tooltip.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tooltip"),options="object"==typeof option&&option;(data||"destroy"!=option)&&(data||$this.data("bs.tooltip",data=new Tooltip(this,options)),"string"==typeof option&&data[option]())})},$.fn.tooltip.Constructor=Tooltip,$.fn.tooltip.noConflict=function(){return $.fn.tooltip=old,this}}(jQuery),+function($){var Popover=function(element,options){this.init("popover",element,options)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype),Popover.prototype.constructor=Popover,Popover.prototype.getDefaults=function(){return Popover.DEFAULTS},Popover.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title),$tip.find(".popover-content")[this.options.html?"string"==typeof content?"html":"append":"text"](content),$tip.removeClass("fade top bottom left right in"),$tip.find(".popover-title").html()||$tip.find(".popover-title").hide()},Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()},Popover.prototype.getContent=function(){var $e=this.$element,o=this.options;return $e.attr("data-content")||("function"==typeof o.content?o.content.call($e[0]):o.content)},Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},Popover.prototype.tip=function(){return this.$tip||(this.$tip=$(this.options.template)),this.$tip};var old=$.fn.popover;$.fn.popover=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.popover"),options="object"==typeof option&&option;(data||"destroy"!=option)&&(data||$this.data("bs.popover",data=new Popover(this,options)),"string"==typeof option&&data[option]())})},$.fn.popover.Constructor=Popover,$.fn.popover.noConflict=function(){return $.fn.popover=old,this}}(jQuery),+function($){var Tab=function(element){this.element=$(element)};Tab.prototype.show=function(){var $this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.data("target");if(selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")),!$this.parent("li").hasClass("active")){var previous=$ul.find(".active:last a")[0],e=$.Event("show.bs.tab",{relatedTarget:previous});if($this.trigger(e),!e.isDefaultPrevented()){var $target=$(selector);this.activate($this.parent("li"),$ul),this.activate($target,$target.parent(),function(){$this.trigger({type:"shown.bs.tab",relatedTarget:previous})})}}},Tab.prototype.activate=function(element,container,callback){function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),element.addClass("active"),transition?(element[0].offsetWidth,element.addClass("in")):element.removeClass("fade"),element.parent(".dropdown-menu")&&element.closest("li.dropdown").addClass("active"),callback&&callback()}var $active=container.find("> .active"),transition=callback&&$.support.transition&&$active.hasClass("fade");transition?$active.one($.support.transition.end,next).emulateTransitionEnd(150):next(),$active.removeClass("in")};var old=$.fn.tab;$.fn.tab=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tab");data||$this.data("bs.tab",data=new Tab(this)),"string"==typeof option&&data[option]()})},$.fn.tab.Constructor=Tab,$.fn.tab.noConflict=function(){return $.fn.tab=old,this},$(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),
$(this).tab("show")})}(jQuery),+function($){var Affix=function(element,options){this.options=$.extend({},Affix.DEFAULTS,options),this.$window=$(window).on("scroll.bs.affix.data-api",$.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",$.proxy(this.checkPositionWithEventLoop,this)),this.$element=$(element),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};Affix.RESET="affix affix-top affix-bottom",Affix.DEFAULTS={offset:0},Affix.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(Affix.RESET).addClass("affix");var scrollTop=this.$window.scrollTop(),position=this.$element.offset();return this.pinnedOffset=position.top-scrollTop},Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1)},Affix.prototype.checkPosition=function(){if(this.$element.is(":visible")){var scrollHeight=$(document).height(),scrollTop=this.$window.scrollTop(),position=this.$element.offset(),offset=this.options.offset,offsetTop=offset.top,offsetBottom=offset.bottom;"top"==this.affixed&&(position.top+=scrollTop),"object"!=typeof offset&&(offsetBottom=offsetTop=offset),"function"==typeof offsetTop&&(offsetTop=offset.top(this.$element)),"function"==typeof offsetBottom&&(offsetBottom=offset.bottom(this.$element));var affix=!(null!=this.unpin&&scrollTop+this.unpin<=position.top)&&(null!=offsetBottom&&position.top+this.$element.height()>=scrollHeight-offsetBottom?"bottom":null!=offsetTop&&scrollTop<=offsetTop&&"top");if(this.affixed!==affix){this.unpin&&this.$element.css("top","");var affixType="affix"+(affix?"-"+affix:""),e=$.Event(affixType+".bs.affix");this.$element.trigger(e),e.isDefaultPrevented()||(this.affixed=affix,this.unpin="bottom"==affix?this.getPinnedOffset():null,this.$element.removeClass(Affix.RESET).addClass(affixType).trigger($.Event(affixType.replace("affix","affixed"))),"bottom"==affix&&this.$element.offset({top:scrollHeight-offsetBottom-this.$element.height()}))}}};var old=$.fn.affix;$.fn.affix=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.affix"),options="object"==typeof option&&option;data||$this.data("bs.affix",data=new Affix(this,options)),"string"==typeof option&&data[option]()})},$.fn.affix.Constructor=Affix,$.fn.affix.noConflict=function(){return $.fn.affix=old,this},$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this),data=$spy.data();data.offset=data.offset||{},data.offsetBottom&&(data.offset.bottom=data.offsetBottom),data.offsetTop&&(data.offset.top=data.offsetTop),$spy.affix(data)})})}(jQuery),+function($){var Collapse=function(element,options){this.$element=$(element),this.options=$.extend({},Collapse.DEFAULTS,options),this.transitioning=null,this.options.parent&&(this.$parent=$(this.options.parent)),this.options.toggle&&this.toggle()};Collapse.DEFAULTS={toggle:!0},Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"},Collapse.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var startEvent=$.Event("show.bs.collapse");if(this.$element.trigger(startEvent),!startEvent.isDefaultPrevented()){var actives=this.$parent&&this.$parent.find("> .panel > .in");if(actives&&actives.length){var hasData=actives.data("bs.collapse");if(hasData&&hasData.transitioning)return;actives.collapse("hide"),hasData||actives.data("bs.collapse",null)}var dimension=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[dimension](0),this.transitioning=1;var complete=function(){this.$element.removeClass("collapsing").addClass("collapse in")[dimension]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!$.support.transition)return complete.call(this);var scrollSize=$.camelCase(["scroll",dimension].join("-"));this.$element.one($.support.transition.end,$.proxy(complete,this)).emulateTransitionEnd(350)[dimension](this.$element[0][scrollSize])}}},Collapse.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var startEvent=$.Event("hide.bs.collapse");if(this.$element.trigger(startEvent),!startEvent.isDefaultPrevented()){var dimension=this.dimension();this.$element[dimension](this.$element[dimension]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var complete=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return $.support.transition?void this.$element[dimension](0).one($.support.transition.end,$.proxy(complete,this)).emulateTransitionEnd(350):complete.call(this)}}},Collapse.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var old=$.fn.collapse;$.fn.collapse=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.collapse"),options=$.extend({},Collapse.DEFAULTS,$this.data(),"object"==typeof option&&option);!data&&options.toggle&&"show"==option&&(option=!option),data||$this.data("bs.collapse",data=new Collapse(this,options)),"string"==typeof option&&data[option]()})},$.fn.collapse.Constructor=Collapse,$.fn.collapse.noConflict=function(){return $.fn.collapse=old,this},$(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var href,$this=$(this),target=$this.attr("data-target")||e.preventDefault()||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""),$target=$(target),data=$target.data("bs.collapse"),option=data?"toggle":$this.data(),parent=$this.attr("data-parent"),$parent=parent&&$(parent);data&&data.transitioning||($parent&&$parent.find('[data-toggle=collapse][data-parent="'+parent+'"]').not($this).addClass("collapsed"),$this[$target.hasClass("in")?"addClass":"removeClass"]("collapsed")),$target.collapse(option)})}(jQuery),+function($){function ScrollSpy(element,options){var href,process=$.proxy(this.process,this);this.$element=$($(element).is("body")?window:element),this.$body=$("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",process),this.options=$.extend({},ScrollSpy.DEFAULTS,options),this.selector=(this.options.target||(href=$(element).attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=$([]),this.targets=$([]),this.activeTarget=null,this.refresh(),this.process()}ScrollSpy.DEFAULTS={offset:10},ScrollSpy.prototype.refresh=function(){var offsetMethod=this.$element[0]==window?"offset":"position";this.offsets=$([]),this.targets=$([]);var self=this;this.$body.find(this.selector).map(function(){var $el=$(this),href=$el.data("target")||$el.attr("href"),$href=/^#./.test(href)&&$(href);return $href&&$href.length&&$href.is(":visible")&&[[$href[offsetMethod]().top+(!$.isWindow(self.$scrollElement.get(0))&&self.$scrollElement.scrollTop()),href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){self.offsets.push(this[0]),self.targets.push(this[1])})},ScrollSpy.prototype.process=function(){var i,scrollTop=this.$scrollElement.scrollTop()+this.options.offset,scrollHeight=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,maxScroll=scrollHeight-this.$scrollElement.height(),offsets=this.offsets,targets=this.targets,activeTarget=this.activeTarget;if(scrollTop>=maxScroll)return activeTarget!=(i=targets.last()[0])&&this.activate(i);if(activeTarget&&scrollTop<=offsets[0])return activeTarget!=(i=targets[0])&&this.activate(i);for(i=offsets.length;i--;)activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(!offsets[i+1]||scrollTop<=offsets[i+1])&&this.activate(targets[i])},ScrollSpy.prototype.activate=function(target){this.activeTarget=target,$(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]',active=$(selector).parents("li").addClass("active");active.parent(".dropdown-menu").length&&(active=active.closest("li.dropdown").addClass("active")),active.trigger("activate.bs.scrollspy")};var old=$.fn.scrollspy;$.fn.scrollspy=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.scrollspy"),options="object"==typeof option&&option;data||$this.data("bs.scrollspy",data=new ScrollSpy(this,options)),"string"==typeof option&&data[option]()})},$.fn.scrollspy.Constructor=ScrollSpy,$.fn.scrollspy.noConflict=function(){return $.fn.scrollspy=old,this},$(window).on("load",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);$spy.scrollspy($spy.data())})})}(jQuery),+function($){function transitionEnd(){var el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames)if(void 0!==el.style[name])return{end:transEndEventNames[name]};return!1}$.fn.emulateTransitionEnd=function(duration){var called=!1,$el=this;$(this).one($.support.transition.end,function(){called=!0});var callback=function(){called||$($el).trigger($.support.transition.end)};return setTimeout(callback,duration),this},$(function(){$.support.transition=transitionEnd()})}(jQuery),angular.module("websiteApp").factory("Modal",function($rootScope,$modal){function openModal(scope,modalClass){var modalScope=$rootScope.$new();return scope=scope||{},modalClass=modalClass||"modal-default",angular.extend(modalScope,scope),$modal.open({templateUrl:"components/modal/modal.html",windowClass:modalClass,scope:modalScope})}return{confirm:{delete:function(del){return del=del||angular.noop,function(){var deleteModal,args=Array.prototype.slice.call(arguments),name=args.shift();deleteModal=openModal({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+name+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(e){deleteModal.close(e)}},{classes:"btn-default",text:"Cancel",click:function(e){deleteModal.dismiss(e)}}]}},"modal-danger"),deleteModal.result.then(function(event){del.apply(event,args)})}}}}}),angular.module("websiteApp").directive("mongooseError",function(){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModel){element.on("keydown",function(){return ngModel.$setValidity("mongoose",!0)})}}}),angular.module("websiteApp").controller("NavbarCtrl",function($scope,$location,Auth,$http,$modal,$log,DataService,$cookieStore,$window){function showPopup(){$(".cookies-message").show()}$scope.menu=[{title:"Home",link:"/"}],$scope.showNav=!1,$scope.show=!1,$window.scrollTo(0,0),$scope.isCollapsed=!0,$scope.isLoggedIn=Auth.isLoggedIn,$scope.isAdmin=Auth.isAdmin,$scope.getCurrentUser=Auth.getCurrentUser,$scope.name=$scope.getCurrentUser().name,$scope.iZone=[],$scope.dZone=[],$scope.isCollapsed=!0,$scope.sideNavCollapsed=!0,null!=$scope.name&&($scope.show=!0),$scope.getLocation=function(val){if(val.length>1)return $http.get("https://api.kesari.in/route/elastic/getProductSearch/"+val).then(function(response){return response.data.filter(function(item){if(item.searchValue="",item.searchValue='<div class="search-row"><div class="search-row__tour-code">'+item.TOURCODE+'</div><div class="search-row__content"><div class="search-row__content__top"><span class="no__search">'+item.DAYS+'</span><span class="search__price">'+item.PRICE+'</span><div class="search-row__tour-details"><div class="search-row__tour-name">'+item.TOURNAME+'<div><div class="hidden-xs">'+item.visit+"</div></div></div></div></div>",""!=item.TM_ZONE&&""!=item.TOURCODE&&""!=item.TOURNAME)return item})})},$scope.GoTOUR=function(){var path="/tourIti/Group-Tours/"+$scope.selectedSearch.TM_ZONE.split(" ").join("-")+"/"+$scope.selectedSearch.TOURCODE+"/"+$scope.selectedSearch.TOURNAME.split(" ").join("-");$scope.selectedSearch="",$location.path(path)},$scope.GoTOUR1=function(){if($scope.selectedSearch){var path="/search/"+$scope.selectedSearch;$scope.selectedSearch="",$location.path(path)}},$scope.closeNav=function(){$scope.sideNavCollapsed=!0},DataService.getData("webHeaderMenu/").then(function(awesomeThings){$scope.splZone=awesomeThings.SPECIALITY[0].TYPE,$scope.tZone=awesomeThings.FIT.sort(),awesomeThings.FIT.forEach(function(zone){"D"==zone._id?$scope.domFIT=zone.COUNTRY:$scope.intFIT=zone.COUNTRY}),$scope.corZone=awesomeThings.CORPORATE[0].TYPE,$scope.tCruise=awesomeThings.CRUISE[0].TYPE,awesomeThings.GIT.forEach(function(group){"I"==group._id&&($scope.iZone=group.COUNTRY),"D"==group._id&&($scope.dZone=group.COUNTRY)})}),$(window).scroll(function(event){var scroll=$(window).scrollTop();scroll<500||void 0==scroll?$scope.showUpArrow=!1:$scope.showUpArrow=!0,$scope.$apply()}),$scope.scroll=function(scrollDuration){$("html, body").animate({scrollTop:0},600)},$(window).scroll(function(){var menu=$(window).scrollTop();menu>66?$(".custom-topnav").addClass("sticky upper-navbar"):$(".custom-topnav").removeClass("sticky upper-navbar")});var lastZone=$cookieStore.get("zone");lastZone&&"Europe"==lastZone.tourname&&($scope.banner=!0),$scope.goadd=function(){$location.path("/World-Tours/Europe-Tours"),$scope.banner=!1},$scope.logout=function(){Auth.logout(),$location.path("/login")},$scope.isActive=function(route){return route===$location.path()},$scope.open=function(){var modalInstance=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/guest-feedback/modal.html",controller:"feedbackModalInstanceCtrl",size:"sm",resolve:{items:function(){return 1}}});modalInstance.result.then(function(result1){$scope.show=result1},function(){$log.info("Modal dismissed at: "+new Date)}),$scope.cancel=function(){modalInstance.dismiss("cancel")}},$scope.close_banner=function(){$scope.banner=!1},$scope.value=$cookieStore.get("invoices"),$scope.poupCookieExists=$cookieStore.get("invoices1"),$scope.checkForPopupCookie=function(cookiesData){cookiesData?$(".cookies-message").hide():showPopup()},$scope.closedPopup=function(value){$scope.cookier={popupCookie:value},$cookieStore.put("invoices1",$scope.cookier),$(".cookies-message").hide()}}).controller("footerCtrl",function(){}),angular.module("websiteApp").factory("socket",function(socketFactory){var ioSocket=io("",{path:"/socket.io-client"}),socket=socketFactory({ioSocket:ioSocket});return{socket:socket,syncUpdates:function(modelName,array,cb){cb=cb||angular.noop,socket.on(modelName+":save",function(item){var oldItem=_.find(array,{_id:item._id}),index=array.indexOf(oldItem),event="created";oldItem?(array.splice(index,1,item),event="updated"):array.push(item),cb(event,item,array)}),socket.on(modelName+":remove",function(item){var event="deleted";_.remove(array,{_id:item._id}),cb(event,item,array)})},unsyncUpdates:function(modelName){socket.removeAllListeners(modelName+":save"),socket.removeAllListeners(modelName+":remove")}}}),angular.module("websiteApp").controller("CruiseCtrl",function($scope,$http,DataService,smoothScroll,$window){smoothScroll.scrollTo("start"),$window.scrollTo(0,0),$scope.awesomeThings=[],$scope.list=[],$scope.selectedTour="",$scope.filterStart=!1,$scope.loading=!0,DataService.getData("cruise_liner/liner/all").then(function(awesomeThings){$scope.cruiseLiner=awesomeThings,$scope.total=awesomeThings.length,$scope.loading=!1})}).controller("CruiseListCtrl",function($scope,$http,$window,DataService,$stateParams,smoothScroll,$sce,$cookieStore,$location,$modal,$state){$scope.LoadedZone=[],$scope.selection=[],smoothScroll.scrollTo("start"),$window.scrollTo(0,0),$scope.cruiseNm=$stateParams.cruiseLiner,$scope.cruiseLiner,$scope.cruisePackage,$scope.zoneLoad=!1,$scope.segment=[],$scope.filterstart=!1,$scope.segmentFilter=[],$scope.result=[],$scope.data="",$scope.width,$scope.hasparameter=!0,$scope.loaded=!0,$scope.selectedTour="",$scope.top=0;$scope.priceSlider={min:35e4,max:4e5,ceil:406646,floor:0},$scope.priceFilter={lower_price_bound:0,upper_price_bound:0,top:0,min:0},$scope.Duration={lower_day_bound:0,upper_day_bound:0,top:0,min:0},$scope.lower_price_bound=0,$scope.upper_price_bound=0;var locUrl=$location.path();"/cruises/Middle-East"==locUrl&&$location.path("/cruises"),$scope.loadPackage=function(zone,status){if($scope.loaded=!0,$scope.filterstart=!1,$scope.hasparameter=!0,$scope.zoneLoad||($scope.zoneLoad=!0,$scope.cruisePackage=[]),$scope.LoadedZone.indexOf(zone)==-1)$scope.LoadedZone.push(zone),DataService.getData("cruise_itinerary/region_package/"+zone).then(function(resp){if($scope.loaded=!1,$scope.hasparameter=!1,$scope.msg=resp.message,$scope.total=$scope.cruisePackage.length,$scope.total+=resp.package.length,resp.package.forEach(function(packages){$scope.cruisePackage.push(packages)}),resp.package.forEach(function(zone){zone.pass=zone.title,zone.tempPrice=zone.price,0==$scope.Duration.lower_day_bound?$scope.Duration.lower_day_bound=parseInt(zone.no_of_days):zone.no_of_days<$scope.Duration.lower_day_bound&&($scope.Duration.lower_day_bound=parseInt(zone.no_of_days)),0==$scope.Duration.upper_day_bound?$scope.Duration.upper_day_bound=parseInt(zone.no_of_days):zone.no_of_days>$scope.Duration.upper_day_bound&&($scope.Duration.upper_day_bound=parseInt(zone.no_of_days)),0==$scope.priceFilter.lower_price_bound?$scope.priceFilter.lower_price_bound=parseInt(zone.tempPrice):$scope.priceFilter.lower_price_bound>zone.tempPrice&&($scope.priceFilter.lower_price_bound=parseInt(zone.tempPrice)),0==$scope.priceFilter.upper_price_bound?$scope.priceFilter.upper_price_bound=parseInt(zone.tempPrice):$scope.priceFilter.upper_price_bound<zone.tempPrice&&($scope.priceFilter.upper_price_bound=parseInt(zone.tempPrice))}),$scope.LoadedZone=$scope.LoadedZone.slice($scope.LoadedZone.indexOf("/cruises/"),1),1==status){var url=$location.path();url.indexOf("region")>-1?url.indexOf(zone)>-1?url.indexOf(zone+",")>-1?$location.path(url.replace(zone+",","")):$location.path(url.replace(","+zone,"")):$location.path(url+","+zone):$location.path("/cruises/region="+zone)}}).finally(function(){$scope.total=$scope.cruisePackage.length,"No such details"==$scope.msg&&($scope.message="Cruise Packages are coming soon !!!"),$scope.priceFilter.min=$scope.priceFilter.lower_price_bound,$scope.priceFilter.top=$scope.priceFilter.upper_price_bound,$scope.Duration.min=$scope.Duration.lower_day_bound,$scope.Duration.top=$scope.Duration.upper_day_bound});else{var index=$scope.LoadedZone.indexOf(zone);$scope.LoadedZone.splice(index,1),$scope.cruisePackage=$scope.cruisePackage.filter(function(data){return data.region_name!=zone?data:void("No such details"==$scope.msg&&($scope.message="Cruise Packages are coming soon !!!"))});var url=$location.path().replace(zone+",","");$scope.hasparameter=!1,$location.path(url),$scope.total=$scope.cruisePackage.length,$scope.LoadedZone=$scope.LoadedZone.filter(function(data){if(data!=zone)return data}),0==$scope.LoadedZone.length&&($scope.filterstart=!1,$location.path("/cruises/"),DataService.getData("cruise_itinerary/package/Star%20Cruises").then(function(resp){$scope.cruisePackage=resp.package,$scope.segment=[],$scope.segment=resp.segments,$scope.total=resp.package.length})),$scope.loaded=!1,$scope.hasparameter=!1}};var tempUrl=$location.path();tempUrl.indexOf("region")>-1&&(tempUrl.indexOf(",")>-1?tempUrl.substring(tempUrl.indexOf("=")+1).split(",").forEach(function(region){""!=region&&($scope.selection.push(region),$scope.loadPackage(region,0))}):($scope.selection.push(tempUrl.substring(tempUrl.indexOf("=")+1).trim()),$scope.loadPackage(tempUrl.substring(tempUrl.indexOf("=")+1).trim(),0))),$scope.getHtml=function(data){return $scope.data=$sce.trustAsHtml(data),$scope.data},DataService.getData("cruise_region").then(function(awesomeThings){$scope.region=awesomeThings}),DataService.getData("cruise_liner/liner/all").then(function(resp){$scope.width=$window.outerWidth,$scope.cruiseLiner=resp,$scope.data=resp[0].specification,$scope.loaded=!1,$scope.hasparameter=!1}).finally(function(){$scope.total=$scope.cruisePackage.length,"No such details"==$scope.msg&&($scope.message="Cruise Packages are coming soon !!!"),$scope.priceFilter.min=$scope.priceFilter.lower_price_bound,$scope.priceFilter.top=$scope.priceFilter.upper_price_bound,$scope.Duration.min=$scope.Duration.lower_day_bound,$scope.Duration.top=$scope.Duration.upper_day_bound}),$scope.cruiseNm?($location.path().indexOf("region=")==-1&&DataService.getData("cruise_itinerary/package/"+$scope.cruiseNm.split("-").join(" ")).then(function(resp){$scope.hasparameter=!0,$scope.cruisePackage=resp.package,$scope.segment=resp.segments,$scope.msg=resp.message,"No such details"==$scope.msg&&($scope.message="Cruise Packages are coming soon !!!"),$scope.total=resp.package.length,$scope.cruisePackage.forEach(function(zone){zone.pass=zone.title,zone.tempPrice=zone.price,0==$scope.Duration.lower_day_bound?$scope.Duration.lower_day_bound=parseInt(zone.no_of_days):zone.no_of_days<$scope.Duration.lower_day_bound&&($scope.Duration.lower_day_bound=parseInt(zone.no_of_days)),0==$scope.Duration.upper_day_bound?$scope.Duration.upper_day_bound=parseInt(zone.no_of_days):zone.no_of_days>$scope.Duration.upper_day_bound&&($scope.Duration.upper_day_bound=parseInt(zone.no_of_days)),0==$scope.priceFilter.lower_price_bound?$scope.priceFilter.lower_price_bound=parseInt(zone.tempPrice):$scope.priceFilter.lower_price_bound>zone.tempPrice&&($scope.priceFilter.lower_price_bound=parseInt(zone.tempPrice)),0==$scope.priceFilter.upper_price_bound?$scope.priceFilter.upper_price_bound=parseInt(zone.tempPrice):$scope.priceFilter.upper_price_bound<zone.tempPrice&&($scope.priceFilter.upper_price_bound=parseInt(zone.tempPrice))})}).finally(function(){$scope.total=$scope.cruisePackage.length,"No such details"==$scope.msg&&($scope.message="Cruise Packages are coming soon !!!"),$scope.priceFilter.min=$scope.priceFilter.lower_price_bound,$scope.priceFilter.top=$scope.priceFilter.upper_price_bound,$scope.Duration.min=$scope.Duration.lower_day_bound,$scope.Duration.top=$scope.Duration.upper_day_bound}),$scope.reset=function(){$scope.filterStart=!1,$scope.result=[],$scope.selectedTour="",$scope.priceFilter.min=$scope.priceFilter.lower_price_bound,$scope.priceFilter.top=$scope.priceFilter.upper_price_bound,$scope.Duration.min=$scope.Duration.lower_day_bound,$scope.Duration.top=$scope.Duration.upper_day_bound}):$location.path("/cruises"),$scope.onSliderChange=function(){""==$scope.selectedTour?($scope.result=[],$scope.filterStart=!0,$scope.cruisePackage.forEach(function(tour){void 0!=tour.tempPrice&&tour.tempPrice<=$scope.priceFilter.top&&tour.tempPrice>=$scope.priceFilter.min&&($scope.result.push(tour),$scope.total=$scope.result.length,$scope.result.sortOn("tempPrice"))})):$scope.filterStart=!1},$scope.translate=function(value){return value.toLocaleString()},$scope.translateday=function(value){return value.toLocaleString()+" Days"},Array.prototype.sortOn=function(key){this.sort(function(a,b){return a[key]<b[key]?-1:a[key]>b[key]?1:0})},$scope.onDurationSliderChange=function(){$scope.result=[],$scope.filterStart=!0,$scope.cruisePackage.forEach(function(tour){void 0!=tour.tempPrice&&tour.no_of_days<=$scope.Duration.top&&tour.no_of_days>=$scope.Duration.min&&($scope.result.push(tour),$scope.total=$scope.result.length,$scope.result.sortOn("no_of_days"))})},$scope.showPackage=function(Liner){$scope.selection={},$scope.loaded=!0,$scope.hasparameter=!0,DataService.getData("cruise_itinerary/package/"+Liner.cruise_name).then(function(resp){$scope.cruisePackage=resp.package,$scope.segment=resp.segments,$scope.filterstart=!1,$scope.total=resp.package.length,$scope.loaded=!1,$scope.hasparameter=!1,$scope.tot_seg=$scope.segment.length})},$scope.filterSegment=function(seg){var temp=[],count=0;$scope.loaded=!0,$scope.hasparameter=!0,Object.keys($scope.selection.segment).forEach(function(data){$scope.selection.segment[data]&&(temp=temp||[],temp.push(data),count++)}),count>0?($scope.filterstart=!0,$scope.result=$scope.cruisePackage.filter(function(data){if(temp.indexOf(data.segment)>-1)return data}),$scope.total=$scope.result.length):($scope.filterstart=!1,$scope.total=$scope.cruisePackage.length),$scope.loaded=!1,$scope.hasparameter=!1},$scope.open2=function(data){var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/cruises/CruisesInquiry.html",controller:"cruzInquiryCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start")},function(){$log.info("Modal dismissed at: "+new Date)})}}).controller("CruiseMainDetailsCtrl",function($scope,$http,$window,DataService,$stateParams,smoothScroll,$modal,$log){$scope.myInterval=5e3,$scope.noWrapSlides=!1,smoothScroll.scrollTo("start"),$window.scrollTo(0,0),$scope.show,$scope.showImg;var img;$scope.counter=1,$scope.description,$scope.slideImages=[],$scope.MonthName=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DataService.getData("cruise_itinerary/Itinerary/"+$stateParams.cruise.split("-").join(" ")+"/"+$stateParams.vessel.split("-").join(" ")+"/"+$stateParams.packageName.split("-").join(" ")).then(function(resp){$scope.show=resp[0],$scope.showImg=resp[0].images[0],$scope.description=resp[0].itinerary[0].description,img=resp.images,$scope.show.dates=[],resp[0].dep_date_new.forEach(function(data){if(new Date(data)>new Date){new Date(data)}$scope.show.dates.push({date:data})});for(var i=0;i<$scope.show.no_of_days;i++)$scope.slideImages.push({image:$scope.show.images[i%4],description:$scope.show.itinerary[i].description,active:!1,destination:$scope.show.itinerary[i].destination,isCollapsed:!0});$scope.slideImages[0].active=!0}),$scope.changeIti=function(data,img){$scope.description=data.description,$scope.slideImages[img-1].active=!0},$scope.open2=function(data){var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/cruises/CruisesInquiry.html",controller:"cruzInquiryCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start")},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.onSlideChanged=function(nextSlide,direction){$scope.slideImages.forEach(function(data){data.isCollapsed=!0})}}).controller("cruzInquiryCtrl",function($scope,$http,$location,$stateParams,$q,$modal,items,$state,$modalInstance,$uibModalInstance){$scope.errors={},$scope.items=items,$scope.disableButton=!1;var source=$location.search();source.url=$location.path(),$scope.disabled=function(date,mode){return"day"===mode&&(0===date.getDay()||6===date.getDay())},$scope.dateOptions={formatYear:"yy",startingDay:1},$scope.minDate=new Date,$scope.maxDate=new Date(2020,5,22),$scope.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],$scope.format=$scope.formats[0],$scope.example={value:new Date,anniversary:new Date},$scope.open=function(){$scope.opened=!0},$scope.cancel=function(){$uibModalInstance.dismiss("cancel")},$scope.save=function(form){$scope.items.flag=!0,form.$valid&&($scope.disableButton=!0,$scope.Inquiry.basedUpon=$scope.items.data,$scope.Inquiry.url="https://www.kesari.in"+source.url,$scope.Inquiry.utmsearch=source,$http.post("https://login.kesari.in/route/cruise_enquiry/",$scope.Inquiry).success(function(data,status){data&&$uibModalInstance.close(!0),$location.path("thankyouCruises/"+data._id)}).error(function(data,status){$http.post("https://api.kesari.in/route/cruise_enquiry/",$scope.Inquiry).success(function(data,status){data&&$uibModalInstance.close(!0)})}))}}).controller("cruiseThankyouCtrl",function($scope,$location,$http,$stateParams,$timeout){$scope.user,$scope.valid=!1,console.log($stateParams.id),$http.get("https://login.kesari.in/route/cruise_enquiry/"+$stateParams.id).success(function(data,status){200==status?($scope.valid=!0,$scope.user=data.Name,$timeout(function(){$location.path("/")},3e5)):$location.path("/"),setTimeout(function(){$(".alert").alert("close"),window.history.go(-1)},5e3)}).error(function(data){200==status?($scope.valid=!0,$scope.user=data.Name,$timeout(function(){$location.path("/")},3e5)):$location.path("/")})}),angular.module("websiteApp").controller("forexCtrl",function($scope,$location,$state,$window,$http,$stateParams,smoothScroll,DataService,localStorageService){smoothScroll.scrollTo("start"),$window.scrollTo(0,0),$scope.myInterval=5e3,$scope.noWrapSlides=!1,$scope.slides=[],$scope.disableButton=!1,DataService.getData("rsData/view_schema_wrapper_collection_data/Forex_WebBanner").then(function(bannerData){$scope.img=bannerData}),$scope.save=function(form){form.$valid&&0==$scope.disableButton&&($scope.disableButton=!0,$http.post("https://login.kesari.in/route/forex_enquiry/",$scope.Inquiry).success(function(data){data&&($state.go("thankyouForex"),$scope.Inquiry=={})}))},$scope.viewCurrencyList=[],$scope.currencyRate,$scope.currencyName,$scope.orderType,$http.get("https://api.kesari.in/route/rsData/getCurrencyWithCurrentTax/").then(function(currencyData){$scope.viewCurrencyList=currencyData.data,$scope.currencyList=$scope.viewCurrencyList.currency}),$scope.changCurrency=function(name){$scope.currencyRate=name},$scope.totalCurrencyRate=function(forexAmount,amountFlag){$scope.Amount=$scope.currencyRate*forexAmount,$scope.INRAmount=Math.round($scope.Amount),$scope.orderType=amountFlag,"Buy"===amountFlag?($scope.INRAmountBuy=Math.round($scope.Amount),$scope.addTax($scope.INRAmountBuy),$scope.INRAmountSell=0,$scope.forexAmountSell=0):($scope.INRAmountSell=Math.round($scope.Amount),$scope.minusTax($scope.INRAmountSell),$scope.forexAmountBuy=0,$scope.INRAmountBuy=0)},$scope.addTax=function(INRAmountBuy){switch(!0){case INRAmountBuy>$scope.viewCurrencyList.Tax[0].fromAmout&&INRAmountBuy<$scope.viewCurrencyList.Tax[0].toAmount:$scope.totalTaxAmount=$scope.viewCurrencyList.Tax[0].gstAmountFixed,$scope.totalAmount=INRAmountBuy+$scope.totalTaxAmount;break;case INRAmountBuy>$scope.viewCurrencyList.Tax[1].fromAmout&&INRAmountBuy<$scope.viewCurrencyList.Tax[1].toAmount:$scope.totalGSTPercentage=$scope.secondTax=$scope.viewCurrencyList.Tax[1].gstAmoutPercent,$scope.totalTaxAmount=Math.round($scope.INRAmountBuy*$scope.totalGSTPercentage),$scope.totalAmount=Math.round($scope.INRAmountBuy+$scope.totalTaxAmount);break;case INRAmountBuy>$scope.viewCurrencyList.Tax[2].fromAmout&&INRAmountBuy<$scope.viewCurrencyList.Tax[2].toAmount:var taxOn1L=1e5*$scope.viewCurrencyList.Tax[1].gstAmoutPercent,remainingValue=INRAmountBuy-1e5,remainingTax=Math.round(remainingValue*$scope.viewCurrencyList.Tax[2].gstAmoutPercent);$scope.totalTaxAmount=taxOn1L+remainingTax,$scope.totalAmount=Math.round(INRAmountBuy+$scope.totalTaxAmount)}},$scope.minusTax=function(INRAmountSell){switch(!0){case INRAmountSell>$scope.viewCurrencyList.Tax[0].fromAmout&&INRAmountSell<$scope.viewCurrencyList.Tax[0].toAmount:$scope.totalTaxAmount=$scope.viewCurrencyList.Tax[0].gstAmountFixed,$scope.totalAmount=INRAmountSell-$scope.totalTaxAmount;break;case INRAmountSell>$scope.viewCurrencyList.Tax[1].fromAmout&&INRAmountSell<$scope.viewCurrencyList.Tax[1].toAmount:$scope.totalGSTPercentage=$scope.secondTax=$scope.viewCurrencyList.Tax[1].gstAmoutPercent,$scope.totalTaxAmount=Math.round($scope.INRAmountSell*$scope.totalGSTPercentage),$scope.totalAmount=Math.round($scope.INRAmountSell-$scope.totalTaxAmount);break;case INRAmountSell>$scope.viewCurrencyList.Tax[2].fromAmout&&INRAmountSell<$scope.viewCurrencyList.Tax[2].toAmount:var taxOn1L=1e5*$scope.viewCurrencyList.Tax[1].gstAmoutPercent,remainingValue=INRAmountSell-1e5,remainingTax=Math.round(remainingValue*$scope.viewCurrencyList.Tax[2].gstAmoutPercent);$scope.totalTaxAmount=taxOn1L+remainingTax,$scope.totalAmount=Math.round(INRAmountSell-$scope.totalTaxAmount)}};$scope.forexDoc={},$scope.buyForexes=[];$scope.saveForm=function(form){form.$valid&&($scope.currency=$scope.currencyList.filter(function(currency,index){return currency.CN_SELL==$scope.currencyRate||currency.CN_BUY==$scope.currencyRate}),$scope.forexData={currencyRate:$scope.currencyRate,INRAmount:$scope.INRAmount,INRAmountSell:$scope.INRAmountSell,
INRAmountBuy:$scope.INRAmountBuy,forexAmountBuy:$scope.forexAmountBuy,forexAmountSell:$scope.forexAmountSell,totalTaxAmount:$scope.totalTaxAmount,currencyName:$scope.currency[0].currencyName,orderType:$scope.orderType,productName:"Currency Notes",currencyCode:$scope.currency[0].CUR_CODE,totalAmount:$scope.totalAmount},console.log($scope.forexData,"$scope.forexData"),$state.go("forexSummary",$scope.forexData))},$scope.currencyCalculateTabsToggle=function(id){$scope.currencyList.CN_SELL="",$scope.currencyList.CN_BUY="",document.getElementById(id).reset(),$scope.currencyRate="",$scope.totalGST="",$scope.totalTaxAmount="",$scope.totalAmount=""}}).controller("forexSummaryCtrl",function($scope,$location,$state,$window,$http,$stateParams,smoothScroll,DataService){smoothScroll.scrollTo("start"),$window.scrollTo(0,0),$scope.forexDoc={},$scope.buyForexes=[];var finalData=[];$scope.selected=1,$scope.pickupDelivery={},$scope.pickupAdress,$scope.pickUplocation,$scope.forexArr=[];DataService.getData("dynamic/Popup/forexDocs").then(function(forexData){forexData.option.forEach(function(data,index){var finalObject={};finalObject.parent=data.name,finalObject.docs=_.pluck(data.values,"value"),finalData.push(finalObject)}),$scope.buyForexes=finalData}),DataService.getData("rsData/getAgentBranch/").then(function(getBranchData){$scope.branches=getBranchData}),$scope.getRadioValue=function(getRadioValue){$scope.msg="Foreign nationals are not authorized to buy foreign currency in India as per RBI guidelines. For any other assistance please call 8291297625.",alert($scope.msg)},$scope.forexData=$stateParams,$scope.changBuyForex=function(Buypurpose){$scope.forexDoc={},null!=$scope.forexData&&$scope.buyForexes.forEach(function(data,i){Buypurpose==data.parent&&($scope.documents=data.docs),$scope.forexDoc={Buypurpose:Buypurpose,documents:$scope.documents}})},$scope.documentReq=function(form){form.$valid&&$scope.forexDoc&&1==$scope.selected&&($scope.selected=2)},$scope.adrressChange=function(BKA_PRTADD,location){$scope.pickupAdress=BKA_PRTADD,$scope.pickUplocation=location},$scope.deliveryCheckToggle=function(value){$scope.pickUplocation=value},$scope.pickAddress=function(companyform){$scope.adrressChange($scope.pickupAdress,$scope.pickUplocation),$scope.deliveryCheckToggle($scope.pickUplocation),companyform.$valid&&2==$scope.selected&&($scope.selected=3)},"Buy"==$scope.forexData.orderType?$scope.forexDoc.documents=$scope.forexDoc.documents:"Sell"==$scope.forexData.orderType&&($scope.forexDoc.documents="Valid Passport"),$scope.bookOrder=function(){$scope.bookOrderData={source:"website-forex-booking",orderType:$scope.forexData.orderType,forexAmountBuy:$scope.forexData.forexAmountBuy,INRAmountBuy:$scope.forexData.INRAmountBuy,INRAmountSell:$scope.forexData.INRAmountSell,currencyRate:$scope.forexData.currencyRate,currencyCode:$scope.forexData.currencyCode,currencyName:$scope.forexData.currencyName,forexAmountSell:$scope.forexData.forexAmountSell,productName:$scope.forexData.productName,totalAmount:$scope.forexData.totalAmount,totalTaxAmount:$scope.forexData.totalTaxAmount,buyPurpose:$scope.forexDoc.Buypurpose,documents:$scope.forexDoc.documents,pickUpAddress:$scope.pickupAdress,name:$scope.pickupDelivery.name,email:$scope.pickupDelivery.email,address:$scope.pickupDelivery.address,landmark:$scope.pickupDelivery.landmark,pincode:$scope.pickupDelivery.zipcode,mobileNumber:$scope.pickupDelivery.mobileNumber,city:$scope.pickupDelivery.city,pickUplocation:$scope.pickUplocation},$http.post("https://login.kesari.in/route/forex_enquiry/",$scope.bookOrderData).success(function(data){$scope.disableButton=!0,data&&($state.go("forexvoucher",{totalData:data}),$scope.Inquiry=={})})},$scope.totalData=$stateParams.totalData}).controller("forexVoucherCtrl",function(smoothScroll,$scope,$location,$state,$window,$http,$stateParams){$window.scrollTo(0,0),$scope.totalData=$stateParams.totalData}).controller("ForexThankyouCtrl",function(smoothScroll,$window){$window.scrollTo(0,0)}),angular.module("websiteApp").controller("departureCtrl",function($scope,$http,$stateParams,$modal,$log,DataService,$location,$window,$cookieStore,$state,smoothScroll){smoothScroll.scrollTo("start"),$window.scrollTo(0,0),$scope.tab={bengaluruDepartures:!0,ahmedabadDepartures:!1,puneDepartures:!1,kochiDepartures:!1,hyderabadDepartures:!1,nagpurDepartures:!1,cocihnDepartures:!1},$http.get("https://api.kesari.in/route//filterData/getFilteredData/?exRegion=[Bangalore]").success(function(BangloreDep){$scope.iBanglore=BangloreDep}),$http.get("https://api.kesari.in/route//filterData/getFilteredData/?exRegion=[Ahmedabad]").success(function(AhmedabadDep){$scope.iAhmedabad=AhmedabadDep}),$http.get("https://api.kesari.in/route//filterData/getFilteredData/?exRegion=[Pune]").success(function(PuneDep){$scope.iPune=PuneDep}),$http.get("https://api.kesari.in/route//filterData/getFilteredData/?exRegion=[Cochin%20Airport]").success(function(CochinDep){$scope.iCochin=CochinDep}),$http.get("https://api.kesari.in/route//filterData/getFilteredData/?exRegion=[Hyderabad%20Aiport]").success(function(HyderabadDep){$scope.iHyderabad=HyderabadDep}),$http.get("https://api.kesari.in/route//filterData/getFilteredData/?exRegion=[Nagpur]").success(function(NagpurDep){$scope.iNagpur=NagpurDep}),$scope.open2=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/touritinerary/ad-landing.html",controller:"gitInquiryCtrl",size:"lg",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){smoothScroll.scrollTo("start"),$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})},$scope.open3=function(data){$scope.show=!1;var modalInstance2=$modal.open({animation:$scope.animationsEnabled,templateUrl:"app/tour/jlPricing.html",controller:"jlPricingCtrl",size:"md",resolve:{items:function(){return{data:data}}}});modalInstance2.result.then(function(items){$scope.show=items},function(){$log.info("Modal dismissed at: "+new Date)})}}).controller("dubaiWeblinkCtrl",function($scope,smoothScroll,$modal,$log,$http,Lightbox){smoothScroll.scrollTo("start"),$scope.images=[{url:"https://d3r8gwkgo0io6y.cloudfront.net/upload/duabi hotel;ald.jpg",caption:"Burj Al Arab",thumbUrl:"https://d3r8gwkgo0io6y.cloudfront.net/upload/duabi hotel;ald.jpg"},{url:"https://d3r8gwkgo0io6y.cloudfront.net/upload/atlantis hotel .jpg",caption:"World-famous Atlantis hotel",thumbUrl:"https://d3r8gwkgo0io6y.cloudfront.net/upload/atlantis hotel .jpg"},{url:"https://d3r8gwkgo0io6y.cloudfront.net/upload/Desert-Safari.jpg",caption:"Desert Dune Safari",thumbUrl:"https://d3r8gwkgo0io6y.cloudfront.net/upload/Desert-Safari.jpg"},{url:"https://d3r8gwkgo0io6y.cloudfront.net/upload/Downtown Dubai Overview.jpg",caption:"Impressive Burj Khalifa",thumbUrl:"https://d3r8gwkgo0io6y.cloudfront.net/upload/Downtown Dubai Overview.jpg"},{url:"https://d3r8gwkgo0io6y.cloudfront.net/upload/TD/motiongate.jpg",caption:"Exciting Motiongate Park",thumbUrl:"https://d3r8gwkgo0io6y.cloudfront.net/upload/TD/motiongate.jpg"},{url:"https://d3r8gwkgo0io6y.cloudfront.net/upload/TD/dubai_bollywood_parks_dubai_kesari_tours.jpg",caption:"Amusing Bollywood Park",thumbUrl:"https://d3r8gwkgo0io6y.cloudfront.net/upload/TD/dubai_bollywood_parks_dubai_kesari_tours.jpg"},{url:"https://d3r8gwkgo0io6y.cloudfront.net/upload/D3/dhow-dinner-cruise.jpg",caption:"Fascinating Dhow Dinner Cruise",thumbUrl:"https://d3r8gwkgo0io6y.cloudfront.net/upload/D3/dhow-dinner-cruise.jpg"},{url:"https://d3r8gwkgo0io6y.cloudfront.net/upload/D2/palm-islands.jpg",caption:"Impressive View of Palm Islands",thumbUrl:"https://d3r8gwkgo0io6y.cloudfront.net/upload/D2/palm-islands.jpg"}],$scope.openLightboxModal=function(index){Lightbox.openModal($scope.images,index)}}),angular.module("websiteApp").controller("webLinkCtrl",["$scope","$window","$http","$location","$stateParams","$modal","$state","Lightbox","smoothScroll","$log","DataService","localStorageService","$cookieStore",function($scope,$window,$http,$location,$stateParams,$modal,$state,Lightbox,smoothScroll,$log,DataService,localStorageService,$cookieStore){$scope.show=!1,$scope.showMail=!1,$window.scrollTo(0,0),$scope.awesomeThings=[],$scope.itiLoaded=!1,$scope.simillar=[],$scope.tour=$stateParams,$scope.loading=!0,$scope.defaults=!0,$scope.value=null,$scope.showAlert=!1,$scope.selectedtour=$scope.tour.code,$scope.main_image=!1,$scope.loaded=!1,$scope.LoadMoreCalled=!0,$scope.rate=0,$scope.max=5,$scope.isReadonly=!1,$http.get("//login.kesari.in/route/guestDetails/getGuestLink/"+$scope.tour.id).success(function(guest){$scope.itiLoaded=!0,$scope.guest=guest,guest.GuestData.forEach(function(data){""!=data.ITINERARY_NEW&&(data.ITINERARY_NEW[0].itnr.valid_from=new Date(data.ITINERARY_NEW[0].itnr.valid_from),data.ITINERARY_NEW[0].itnr.valid_to=new Date(data.ITINERARY_NEW[0].itnr.valid_to)),$scope.loading=!1,data.CHART=data,$scope.loading=!1})}).error(function(data){alert("something went wrong"),$location.path("/")}),$scope.loadMore=function(){$scope.LoadMoreCalled=!0,$scope.main_image=!0,$scope.guest.GuestData.forEach(function(data){DataService.getData("inventory/getTourPackageData/0/"+data.TM_ZONE+"/0").then(function(simillar){data.simillar=simillar,$scope.loaded=!0,$scope.main_image=!0,$scope.LoadMoreCalled=!1})})},$scope.images=[{url:"https://d3r8gwkgo0io6y.cloudfront.net/upload/BN/Volendam-kesari-tours.jpg",caption:"Optional caption",thumbUrl:"https://d3r8gwkgo0io6y.cloudfront.net/upload/BN/Volendam-kesari-tours.jpg"},{url:"https://d3r8gwkgo0io6y.cloudfront.net/upload/BN/tulips-in-netherland.jpg",caption:"Optional caption",thumbUrl:"https://d3r8gwkgo0io6y.cloudfront.net/upload/BN/tulips-in-netherland.jpg"},{url:"https://d3r8gwkgo0io6y.cloudfront.net/upload/BN/canal-cruise.jpg",caption:"Optional caption",thumbUrl:"https://d3r8gwkgo0io6y.cloudfront.net/upload/BN/canal-cruise.jpg"},{url:"https://d3r8gwkgo0io6y.cloudfront.net/upload/BN/Beautiful-Keukenhof-Garden.jpg",caption:"Optional caption",thumbUrl:"https://d3r8gwkgo0io6y.cloudfront.net/upload/BN/Beautiful-Keukenhof-Garden.jpg"},{url:"https://d3r8gwkgo0io6y.cloudfront.net/upload/E6/The-Eiffel-Tower.jpg",caption:"Optional caption",thumbUrl:"https://d3r8gwkgo0io6y.cloudfront.net/upload/E6/The-Eiffel-Tower.jpg"},{url:"https://d3r8gwkgo0io6y.cloudfront.net/upload/E6/london_eye_county_ha_JHacI.jpg",caption:"Optional caption",thumbUrl:"https://d3r8gwkgo0io6y.cloudfront.net/upload/E6/london_eye_county_ha_JHacI.jpg"},{url:"https://d3r8gwkgo0io6y.cloudfront.net/upload/BN/tulips-in-netherland.jpg",caption:"Optional caption",thumbUrl:"https://d3r8gwkgo0io6y.cloudfront.net/upload/BN/tulips-in-netherland.jpg"},{url:"https://d3r8gwkgo0io6y.cloudfront.net/upload/BN/Volendam-kesari-tours.jpg",caption:"Optional caption",thumbUrl:"https://d3r8gwkgo0io6y.cloudfront.net/upload/BN/Volendam-kesari-tours.jpg"}],$scope.openLightboxModal=function(index){Lightbox.openModal($scope.images,index)},$scope.showPriceChart=function(tour,index){$scope.loading=!0,$scope.selectedtour=tour,$http.get("//login.kesari.in/route/rsData/getPriceChartForSeries/"+tour).success(function(data){$scope.guest.GuestData[index].CHART=data,$scope.guest.GuestData[index].CHART.TOURMAS0[0].PRICE_DATA={PRICE_CHART:data.PRICE_CHART,WEB_ALERTS:data.WEB_ALERTS},$scope.loading=!1})},$scope.get150img=function(img){return img.replace("uploads","uploads/150")},$scope.get980img=function(img){return img.replace("uploads","uploads/980")},$scope.hoveringOver=function(value){$scope.overStar=value,$scope.percent=100*(value/$scope.max),console.log("rating=="+$scope.overStar)},$scope.ratingStates=[{stateOn:"glyphicon-ok-sign",stateOff:"glyphicon-ok-circle"},{stateOn:"glyphicon-star",stateOff:"glyphicon-star-empty"},{stateOn:"glyphicon-heart",stateOff:"glyphicon-ban-circle"},{stateOn:"glyphicon-heart"},{stateOff:"glyphicon-off"}],$scope.setRating=function(){$scope.rate>0&&$http.post("//login.kesari.in/route/guestDetails/rateYourCall/"+$scope.tour.id+"/"+$scope.rate).success(function(data,status){data&&alert("Thank you for your feedback")})}}]);